{"version":3,"sources":["tools.js","Components/i18n.js","Components/PageStart/index.js","Components/PageLoadImages/index.js","Components/PageEditor/ImageThumb.js","Components/PageEditor/ImageEditorZoomCanvas.js","Components/PageEditor/ImageEditorZoom.js","Components/PageEditor/ImageEditorColorCanvas.js","Components/PageEditor/ImageEditorBrightness.js","Components/PageEditor/ImageEditorColor.js","Components/PageEditor/ImageEditor.js","Components/PageEditor/index.js","Components/PageSetup/PageSetupFormats.js","Components/PageSetup/PageSetupArchive.js","Components/PageSetup/PageSetupSources.js","Components/PageSetup/PageSetupParameters.js","Components/PageSetup/index.js","Components/PagePrint/index.js","Components/SetupPin.js","Components/LoaderSplashScreen.js","App.js","index.js"],"names":["p","query","document","location","search","substr","result","split","forEach","part","item","decodeURIComponent","getJsonFromUrl","AJAX_URI","undefined","url","window","href","THEME","createMuiTheme","palette","primary","main","makeGetUri","param","str","key","hasOwnProperty","push","encodeURIComponent","uri","join","ColorCorrection","pixelArray","gain","contrast","gainR","gainG","gainB","intercept","i","data","length","saturate","amount","r","g","b","ColorSepia","calculateImageDimensions","app","indexImage","image","images","realRatio","editorState","imageZoom","ratio","viewportWidth","editorWidth","maskLR","viewportHeight","editorHeight","maskTB","sX","sliderPositionLR","sY","sliderPositionTB","sW","imgWidth","sH","imgHeight","imageRotate","centerX","TB","LR","cW","cH","cX","cY","pX","pY","pW","pH","dpi_dots2inch","dots","dpi","dpi_inch2dots","inch","Round","x","dec","String","replace","parseFloat","isNaN","toFixed","parseInt","setLang","newLang","i18n","LANG","getLangs","langs","prop","caption","langCaption","t","en","ua","Wait a moment while app loading","Last session terminated abnormally.","Do you want to recover last session?","Recover last","Start new session","Cancel","Warning","Next","Previous","Print","Save","Loaded already","Name","Height","Width","Surface","glance","matte","Files","Selected","Cost","Are you sure?","error","error status, let see log","Select CD, flash card or other source, then select format what you want, and press button","Select folder from list, and choose pictures to print. To view in fullscreen click on the name of picture","To continue you should select at least one image","Select all","Select none","No images","Current state of editor images will be lost.","Format","Amount","Total","Successful printed","The number of your order is","Dont forget to remove your source.","Thank you!","PageStart","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","clientUploadProgress","progress","percentage","Math","floor","loaded","total","appSetState","progressBarValue","clientUpload","event","formData","FormData","uploadfiles","target","files","isPleaseWait","config","onUploadProgress","Ev","headers","Content-Type","append","axios","post","tools","q","isSetupPassword","then","checkSources","catch","console","log","finally","openLangsPanel","setState","isLangsOpen","state","checkSourceTimer","checkSourceTimerMax","checkSourceTimerCount","clearTimeout","_this2","sources","slice","len","hasFiles","prevProps","prevState","snapshot","isUploadEnable","inputUpload","click","initRefresh","_this3","_loop","enabled","emptyhide","id","get","res","status","setTimeout","bind","_this4","langsList","react_default","a","createElement","ClickAwayListener_default","onClickAway","Paper_default","className","map","lang","index","onClick","scope","Icon_default","source","Card_default","currentSource","onClickSource","CardContent_default","src","icon","alt","name","formats","format","currentFormat","onClickFormat","height","width","round","surface","cost","disabled","onClickNextBtn","type","style","minWidth","title","isSetup","version","htmlFor","ref","input","multiple","onChange","e","LinearProgress_default","variant","value","React","Component","resetState","folders","tree","currentFolder","is_loadind_images","expandedImage","progressAjax","previewMaxResize","isAutoclearLoading","isAutoclearLoaded","PageLoadImages","nextPage","selectedimages","filter","marked","dirs","dir","params","URLSearchParams","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","_d","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_f","onDownloadProgress","progressEvent","percentCompleted","lengthComputable","thumbname","thumbs","lastIndexOf","orientation","tmpw","extension","width_pixel","height_pixel","thumb","works","count","imageZoomMax","imageZoomMin","colorR","colorG","colorB","brightness","sepia","initedImagePosition","initedMask","currentTab","response","responderEnd","onMessage","imagesContainer","isAutoclearTimer","autoclear","onClickDir","direction","scrollTop","scrollHeight","rowH","ceil","currentDir","list","level","_L","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","precache","imagesScroll","reopenThumb","_this5","newIm","reopen","mode","changed","children","viewHeight","clientHeight","is_appeared","rect","getBoundingClientRect","bottom","top","_this6","node","onScroll","PageLoadImages_ImagePreview","assign","itemIndex","onExpand","showExpandImg","onMark","MarkImage","setpreviewMaxResize","role","onClickPrevBtn","scrollImages","markAllImages","PageLoadImages_ModalExpand","itemCurrent","itemPrev","itemNext","onClose","hideExpandImg","ImagePreview","_this7","rotate","imgWrapper","clientWidth","imgStyle","backgroundImage","max","onDoubleClick","Fab_default","stopPropagation","aria-label","PureComponent","ModalExpand","_this8","imgsrc","ImageThumb","nodeThumb","scrollRef","selected","scrollIntoView","clrZoom","clrFilters","clrColors","onSelect","encodeURI","backgroundColor","color","contrastText","fontSize","ImageEditorZoomCanvas","onDragStart","preventDefault","movingStart","dragImage","dragX","dragY","movingOn","screenX","screenY","shiftX","shiftY","currentImage","appImageChanged","movingStop","canvasImg","Image","crossOrigin","_upd","updateCanvas","assertThisInitialized","onload","renderedImageIndex","imgSrc","appImageInitMask","appEditorChanged","myImgContainer","img_src","alignInit","myCanvas","ctx","getContext","canvasX","canvasY","drawImage","getImageData","putImageData","isDebugShow","_calculateImageDimens","z","lineWidth","strokeStyle","strokeRect","w","newImage","rL","rR","rT","rB","maskTBStyle","viewportStyles","left","maskLRStyle","canvasWidth","canvasHeight","canvasStyle","transform","onMouseMove","onMouseUp","draggable","onMouseDown","right","ImageEditorZoom","sliderZoom","L","T","newState","needUpdateCanvas","sliderChangeTB","sliderChangeLR","ImageEditorZoomCanvas_ImageEditorZoomCanvas","Slider_default","classes","vertical","min","trackAfter","alignTop","alignLeft","alignLandscape","alignPortrait","alignRight","alignBottom","appFormatRotate","ImageEditorColorCanvas","fakeThins","ImageEditorBrightness","sliderChangeBrightness","sliderChangeContrast","sliderChangeSaturate","sliderResetBrightness","sliderResetContrast","sliderResetSaturate","sliderChangeSepia","ImageEditorColorCanvas_ImageEditorColorCanvas","FormControlLabel_default","control","Switch_default","checked","label","sliderChangeColorR","sliderChangeColorG","sliderChangeColorB","sliderResetColorR","sliderResetColorG","sliderResetColorB","track","step","ImageEditor","showTabButton","tabChange","editorWrapper","ImageEditorZoom_ImageEditorZoom","ImageEditorBrightness_ImageEditorBrightness","ImageEditorColor_ImageEditorBrightness","changeCountImage","PageEditor","checkUndo","undo","history","current","clickUndo","currentUndo","skipChanges","checkRedo","clickRedo","selectImage","changeCurrentImage","newCurrent","countSumm","scrollIntoViewIfNeed","domNode","scrollIntoViewIfNeeded","openFormatsPanel","isFormatsOpen","repeatColors","colors","getColorsToRepeat","hasChange","confirmBack","imagesCount","imagesSum","nextProps","nextState","nextContext","wasChanged","l","leftChain","rightChain","compare2Objects","y","Date","RegExp","Number","toString","isPrototypeOf","constructor","prototype","indexOf","pop","arguments","start","savePages","back","formatsList","formatChange","rightwidget","backPressed","colSpan","dialogConfirmBack","Dialog_default","open","backConfirmed","aria-labelledby","aria-describedby","DialogTitle_default","DialogContent_default","DialogContentText_default","DialogActions_default","autoFocus","display","visibility","processCanvasNode","ImageThumb_ImageThumb","ImageEditor_ImageEditor","processCanvas","PageSetupFormats","editedFormats","formatNew","last","formatRemove","splice","ev","f","rotated","rotated_key","JSON","stringify","shift","newIndex","tmp","data-hint","h","portrait","formatMove","size","formatSave","PageSetupArchive","arhives","currentArchive","isLoading","archiveFiles","currentArchiveFile","isMultipleSelectOrders","isDeleteConfirmation","loadList","d","folder","archCount","as","_remove","archiveCount","archiveTotal","archiveDate","date","time","archiveFile","selectedArchiveCount","selectArchive","selectFile","file","toggleMultiple","tryDeleteArchive","deleteArchive","PageSetupSources","editedSources","listIcons","listScripts","scriptTxt","sourceNew","sourceRemove","sourceChange","script","data-value","path","scripton","viewScript","scriptoff","sourceMove","sourcesSave","maxWidth","readOnly","PageSetupParameters","inputNP","inputNP2","setup","removeOlder","removeArchiveOlder","inputTyped","needConfigure","reload","namingOption","autoComplete","savePass","processMode","setupChange","batchSaveMode","copiesMode","printNaming","n","copiesNaming","removeOlderToggle","saveParameters","PageSetup","openTab","tab","PageSetupFormats_PageSetupFormats","PageSetupSources_PageSetupSources","PageSetupParameters_PageSetupParameters","PageSetupArchive_PageSetupArchive","appWidth","appHeight","confirm","Logout","PagePrint","orderFolder","orderNum","savingImages","orderPrinted","saveImage","first","party","imageslen","processed","savePartialProgress","autoInitImage","canvas","fn_callback","img","alpha","fillStyle","fillRect","zX","zY","translate","PI","sx","sy","toDataURL","DataURL","job_done","temporary","_flen","ims","summary","totalSum","cnt","j","sum","checkBeforeSaveImage","SetupPin","pwd","passTyped","numb","isSetupLogged","onSubmit","Login","numbClick","LoaderSplashScreen","caseInfinityLoop","tm","serverError","langOnLoad","App","appstate","pages","is_loading_init","snackMessage","isAppStarting","stateToSave","initedFormat","initrotate","format_lanscape","image_landscape","init","viewportY","isWhiteFields","viewportX","checkLoadedState","fl","formats_rotated","concat","msg","onMessageHide","uploadEnable","pass","resetApp","scriptSource","s_key","scripts","autoclearSource","source_id","updateSavePageTimer","appWrapperNode","foundStateToRecover","force","removeEventListener","updateDimensions","addEventListener","message","reset","pageid","pagestate","OKmessage","newAppState","args","removeTmp","alert","wrongOrientation","toRenderd","LoaderSplashScreen_LoaderSplashScreen","PageSetup_PageSetup","PageStart_PageStart","sourceClick","formatClick","ClickNextBtn","PageLoadImages_PageLoadImages","ClickPrevBtn","PageEditor_PageEditor","PagePrint_PagePrint","CssBaseline_default","styles","theme","SetupPin_SetupPin","Snackbar_default","anchorOrigin","horizontal","autoHideDuration","ContentProps","action","IconButton_default","Close_default","ReactDOM","render","src_App_0","getElementById"],"mappings":"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","file":"static/js/main.b359983d.chunk.js","sourcesContent":["import { createMuiTheme } from '@material-ui/core/styles';\n\nlet p = getJsonFromUrl();\n// const AJAX_URI must has finishing slash\nexport const AJAX_URI = p.url!==undefined ? p.url : (window.location.href==='http://localhost:3000/' ? 'http://localhost:89/' : '/server/');\n\nexport const THEME = createMuiTheme({\n    palette: {\n        primary: {\n            main:'#007bff',\n        },\n    }\n});\n\nexport function getJsonFromUrl() {\n    let url = document.location.search;\n    var query = url.substr(1);\n    var result = {};\n    query.split(\"&\").forEach(function(part) {\n        var item = part.split(\"=\");\n        result[item[0]] = decodeURIComponent(item[1]);\n    });\n    return result;\n}\nexport function makeGetUri(param) {\n\n    let str = [];\n    for (let key in param)\n        if (param.hasOwnProperty(key)) {\n            str.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(param[key]));\n        }\n    let uri = str.join(\"&\");\n    uri = AJAX_URI+(uri!=='' ? '?'+uri : '');\n\n    return uri;\n}\n\n// 1 inch  2.54 cm\n// 300 dpi = 300/2.54  118.11 dpcm (dot per cantimeter)\n\nexport function ColorCorrection(pixelArray, gain, contrast, gainR, gainG, gainB) {\n    const intercept = 128 * (1 - contrast);\n\n    for (let i = 0; i < pixelArray.data.length; i += 4) {\n        pixelArray.data[i] *= gainR * gain;\n        pixelArray.data[i + 1] *= gainG *gain;\n        pixelArray.data[i + 2] *= gainB *gain;\n\n        pixelArray.data[i] = pixelArray.data[i] * contrast + intercept;\n        pixelArray.data[i+1] = pixelArray.data[i+1] * contrast + intercept;\n        pixelArray.data[i+2] = pixelArray.data[i+2] * contrast + intercept;\n\n        // pixelArray.data[i] = 255 * Math.pow(pixelArray.data[i] / 255, 1 / gamma);\n        // pixelArray.data[i + 1] = 255 * Math.pow(pixelArray.data[i + 1] / 255, 1 / gamma);\n        // pixelArray.data[i + 2] = 255* Math.pow(pixelArray.data[i + 2] / 255, 1 / gamma);\n        //\n        // pixelArray.data[i] = 255 * (pixelArray.data[i]/255 + offset);\n        // pixelArray.data[i + 1] = 255 * (pixelArray.data[i + 1] / 255 + offset);\n        // pixelArray.data[i + 2] = 255 * (pixelArray.data[i + 2] / 255 + offset);\n    }\n    return pixelArray;\n}\n\nexport function saturate(pixelArray, amount) {\n    let r,g,b;\n\n    for (let i=0; i < pixelArray.data.length; i += 4) {\n        r = (.213 + .787 * amount) * pixelArray.data[i]\n            + (.715 - .715 * amount) * pixelArray.data[i + 1]\n            + (.072 - .072 * amount) * pixelArray.data[i + 2];\n        g = (.213 - .213 * amount) * pixelArray.data[i]\n            + (.715 + .285 * amount) * pixelArray.data[i + 1]\n            + (.072 - .072 * amount) * pixelArray.data[i + 2];\n        b = (.213 - .213 * amount) * pixelArray.data[i]\n            + (.715 - .715 * amount) * pixelArray.data[i + 1]\n            + (.072 + .928 * amount) * pixelArray.data[i + 2];\n\n        pixelArray.data[i] = r;\n        pixelArray.data[i + 1] = g;\n        pixelArray.data[i + 2] = b;\n    }\n    return pixelArray;\n}\n\nexport function ColorSepia (pixelArray) {\n    let r,g,b;\n    for (let i=0; i < pixelArray.data.length; i += 4) {\n\n        r = pixelArray.data[i] * 0.393 + pixelArray.data[i+1] * 0.769 + pixelArray.data[i+2] * 0.189;\n        g = pixelArray.data[i] * 0.349 + pixelArray.data[i+1] * 0.686 + pixelArray.data[i+2] * 0.168;\n        b = pixelArray.data[i] * 0.272 + pixelArray.data[i+1] * 0.534 + pixelArray.data[i+2] * 0.131;\n\n        pixelArray.data[i] = r;\n        pixelArray.data[i+1] = g;\n        pixelArray.data[i+2] = b;\n    }\n    return pixelArray;\n}\n\nexport function calculateImageDimensions(app, indexImage) {\n    const image = app.images[indexImage];\n    const realRatio = image.editorState.imageZoom*image.editorState.ratio;\n\n    let viewportWidth = app.editorWidth - image.editorState.maskLR*2;\n    let viewportHeight = app.editorHeight - image.editorState.maskTB*2;\n    // let formatWidth = dpi_inch2dots(image.format.width, image.format.dpi);\n    // let formatHeight = dpi_inch2dots(image.format.height, image.format.dpi);\n\n\n\n    let sX = image.editorState.sliderPositionLR*-1;\n    let sY = image.editorState.sliderPositionTB*-1;\n    let sW = image.editorState.imgWidth;\n    let sH = image.editorState.imgHeight;\n    // console.log(' Pre-Source : ',  Math.round(sX), Math.round(sY), Math.round(sW), Math.round(sH));\n    if(image.editorState.imageRotate===0 || image.editorState.imageRotate===180) {\n        if(sX>0) {\n            sW -= sX;\n        } else if(sX<0) {\n            sX=0;\n        }\n        if(sW+image.editorState.sliderPositionLR+sX>viewportWidth) {\n            sW = viewportWidth-image.editorState.sliderPositionLR-sX;\n        }\n        if(sW<0) sW = 0;\n        // console.log(' Pre-Source : ',  Math.round(sX), Math.round(sY), Math.round(sW), Math.round(sH));\n        if(sY>0) {\n            sH -= sY;\n            if(sY>image.editorState.imgHeight) sY = image.editorState.imgHeight;\n        } else if(sY<0) {\n            sY=0;\n        }\n        if(sH+image.editorState.sliderPositionTB+sY>viewportHeight) {\n            sH = viewportHeight-image.editorState.sliderPositionTB-sY;\n        }\n        if(sH<0) sH = 0;\n\n    } else { // --------------------------------------------rotated 90 / 270\n        let centerX = image.editorState.sliderPositionLR+image.editorState.imgWidth/2;\n        let centerY = image.editorState.sliderPositionTB+image.editorState.imgHeight/2;\n\n        let TB = centerY - image.editorState.imgWidth/2;\n        sX = 0;\n        if(TB+sW>viewportHeight) { sW = viewportHeight-TB; }\n        if(TB<0) { sX=TB*-1; sW-=sX; }\n        if(TB>viewportHeight){ sW = 0; }\n\n        let LR = centerX - image.editorState.imgHeight/2;\n        sY = 0;\n        if(LR+sH>viewportWidth) { sY = LR+sH-viewportWidth; sH-=sY;  }\n        if(LR<0) { sH += LR; }\n        if(LR>viewportWidth){ sH = 0; }\n\n    }\n    if(image.editorState.imageRotate===180 || image.editorState.imageRotate===270) { // 180 --- upside // 270 --- upside\n        sX = image.editorState.imgWidth - sW - sX;\n        sY = image.editorState.imgHeight - sH - sY;\n    }\n\n\n    // console.log(' Pre-Source : ',  Math.round(sX), Math.round(sY), Math.round(sW), Math.round(sH));\n\n    let cW = sW; //#######################################################################################\n    let cH = sH; //#######################################################################################\n\n    sX /= realRatio;\n    sY /= realRatio;\n    sW /= realRatio;\n    sH /= realRatio;\n    // console.log(' ------- Source : ',  Math.round(sX), Math.round(sY), Math.round(sW), Math.round(sH), 'dims:', Math.round(sX+sW),Math.round(sY+sH));\n\n\n    let cX = image.editorState.sliderPositionLR;\n    let cY = image.editorState.sliderPositionTB;\n    // console.log(' ------- Pre-Canvas : ',  Math.round(cX), Math.round(cY), Math.round(cW), Math.round(cH));\n    if(cX<0) {\n        cX = 0;\n    }\n    if(cY<0) {\n        cY = 0;\n    }\n\n    // console.log(' ------- Canvas : ',  Math.round(cX), Math.round(cY), Math.round(cW), Math.round(cH) );\n\n    cX /=image.editorState.ratio;\n    cY /=image.editorState.ratio;\n    cW /=image.editorState.ratio;\n    cH /=image.editorState.ratio;\n\n\n    let pX = image.editorState.sliderPositionLR;\n    let pY = image.editorState.sliderPositionTB;\n    let pW = image.editorState.imgWidth;\n    let pH = image.editorState.imgHeight;\n    // console.log('Pre-values: ',  Math.round(pX), Math.round(pY), Math.round(pW), Math.round(pH));\n    if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) {\n        // let imageCenterX = pX + pW/2;\n        // let imageCenterY = pY + pH/2;\n        pX = (pX + pW/2) - pH/2;\n        pY = (pY + pH/2) - pW/2;\n\n        pW = image.editorState.imgHeight;\n        pH = image.editorState.imgWidth;\n    }\n    // console.log('Pre-values: ',  Math.round(pX), Math.round(pY), Math.round(pW), Math.round(pH));\n    if(pW+pX>viewportWidth) {\n        pW = viewportWidth-pX;\n    }\n    if(pX<0) {\n        pW += pX;\n        pX = 0;\n    }\n    if(pW<0) pW = 0;\n\n    if(pH+pY>viewportHeight) {\n        pH = viewportHeight-pY;\n    }\n    if(pY<0) {\n        pH += pY;\n        pY = 0;\n    }\n    if(pH<0) pH = 0;\n\n\n    pX /=image.editorState.ratio;\n    pY /=image.editorState.ratio;\n    pW /=image.editorState.ratio;\n    pH /=image.editorState.ratio;\n\n    // console.log('------Ret-values: ', Math.round(pX), Math.round(pY), Math.round(pW), Math.round(pH));\n\n\n\n    return {\n        sX: sX, sY: sY, sW: sW, sH: sH,\n\n        cX: cX, cY: cY, cW: cW, cH: cH,\n\n        pX: pX, pY: pY, pW: pW, pH: pH,\n    };\n\n}\n\nexport function processImage(canvas, app, index, fn_callback) {\n    // this.props.parentProps.image\n    const image = app.images[index];\n\n    console.log(image);\n    if(typeof fn_callback !== 'function') return;\n\n    let img = new Image();\n    img.crossOrigin = 'anonymous';\n\n    img.onload=function(){\n\n\n        if(image.editorState.imageRotate === 0 || image.editorState.imageRotate === 180) {\n            canvas.width = dpi_inch2dots(image.format.width, image.format.dpi);\n            canvas.height = dpi_inch2dots(image.format.height, image.format.dpi);\n        } else {\n            canvas.width = dpi_inch2dots(image.format.height, image.format.dpi);\n            canvas.height = dpi_inch2dots(image.format.width, image.format.dpi);\n        }\n\n\n        const p = calculateImageDimensions(app, index);\n\n        const ctx = canvas.getContext('2d', {alpha: false});\n        ctx.fillStyle = \"#ffffff\";\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n                        console.log('processImage', p);\n\n        if(image.editorState.imageRotate !== 0) {\n            ctx.drawImage(img, p.sX, p.sX, p.sW, p.sH, p.cX, p.cY, p.cW, p.cH);\n        } else {\n            let zX = canvas.width/-2;\n            let zY = canvas.height/-2;\n            if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) {\n                let t = canvas.width;\n                canvas.width = canvas.height;\n                canvas.height = t;\n            }\n            ctx.translate(canvas.width / 2, canvas.height / 2);\n            ctx.rotate(image.editorState.imageRotate * Math.PI / 180);\n            ctx.drawImage(img, p.sx, p.sy, p.sW, p.sH, zX + p.cX, zY + p.cY, p.cW, p.cH);\n\n        }\n\n        let pixelArray = ctx.getImageData(Math.floor(p.pX), Math.floor(p.pY), Math.ceil(p.pW), Math.ceil(p.pH) );\n\n        if(image.editorState.brightness!==1 || image.editorState.contrast!==1 || image.editorState.colorR!==1 || image.editorState.colorG!==1 || image.editorState.colorB!==1 ) {\n            pixelArray = ColorCorrection(pixelArray, image.editorState.brightness, image.editorState.contrast, image.editorState.colorR, image.editorState.colorG, image.editorState.colorB);\n        }\n        if(image.editorState.sepia) {\n            pixelArray = ColorSepia(pixelArray, 1);\n        }\n        if(image.editorState.saturate!==1) {\n            pixelArray = saturate(pixelArray, image.editorState.saturate);\n        }\n\n        ctx.putImageData(pixelArray, Math.floor(p.pX), Math.floor(p.pY));\n\n        //const dataURL = this.myCanvas.toDataURL('image/png');\n        fn_callback( canvas.toDataURL('image/jpeg', 0.7) );\n    };\n    img.src= makeGetUri()+image.src;\n\n}\n\nexport function dpi_dots2cm(dots, dpi) {\n    if(dpi===undefined || !dpi) dpi = 300;\n    return dots / (dpi / 2.54);\n}\n\nexport function dpi_cm2dots(cm, dpi) {\n    if(dpi===undefined || !dpi) dpi = 300;\n    return cm * (dpi / 2.54);\n}\n\nexport function dpi_dots2inch(dots, dpi) {\n    if(dpi===undefined || !dpi) dpi = 300;\n    return dots / dpi;\n}\n\nexport function dpi_inch2dots(inch, dpi) {\n    if(dpi===undefined || !dpi) dpi = 300;\n    return inch * dpi;\n}\n\nexport function Round(x, dec) {\n    if(x===undefined) x=0;\n    x =  String(x).replace(/,/g,'.');\n    x = parseFloat(x);\n    if(isNaN(x)) x = 0;\n\n    if(dec===undefined) {\n        return x.toFixed(2);\n    } else {\n        return x.toFixed( parseInt(dec) );\n    }\n}\n\nexport function deepCompare () {\n    var i, l, leftChain, rightChain;\n\n    function compare2Objects (x, y) {\n        var p;\n\n        // remember that NaN === NaN returns false\n        // and isNaN(undefined) returns true\n        if (isNaN(x) && isNaN(y) && typeof x === 'number' && typeof y === 'number') {\n            return true;\n        }\n\n        // Compare primitives and functions.\n        // Check if both arguments link to the same object.\n        // Especially useful on the step where we compare prototypes\n        if (x === y) {\n            return true;\n        }\n\n        // Works in case when functions are created in constructor.\n        // Comparing dates is a common scenario. Another built-ins?\n        // We can even handle functions passed across iframes\n        if ((typeof x === 'function' && typeof y === 'function') ||\n            (x instanceof Date && y instanceof Date) ||\n            (x instanceof RegExp && y instanceof RegExp) ||\n            (x instanceof String && y instanceof String) ||\n            (x instanceof Number && y instanceof Number)) {\n            return x.toString() === y.toString();\n        }\n\n        // At last checking prototypes as good as we can\n        if (!(x instanceof Object && y instanceof Object)) {\n            return false;\n        }\n\n        if (x.isPrototypeOf(y) || y.isPrototypeOf(x)) {\n            return false;\n        }\n\n        if (x.constructor !== y.constructor) {\n            return false;\n        }\n\n        if (x.prototype !== y.prototype) {\n            return false;\n        }\n\n        // Check for infinitive linking loops\n        if (leftChain.indexOf(x) > -1 || rightChain.indexOf(y) > -1) {\n            return false;\n        }\n\n        // Quick checking of one object being a subset of another.\n        for (p in y) {\n            if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {\n                return false;\n            }\n            else if (typeof y[p] !== typeof x[p]) {\n                return false;\n            }\n        }\n\n        for (p in x) {\n            if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {\n                return false;\n            }\n            else if (typeof y[p] !== typeof x[p]) {\n                return false;\n            }\n\n            switch (typeof (x[p])) {\n                case 'object':\n                case 'function':\n\n                    leftChain.push(x);\n                    rightChain.push(y);\n\n                    if (!compare2Objects (x[p], y[p])) {\n                        return false;\n                    }\n\n                    leftChain.pop();\n                    rightChain.pop();\n                    break;\n\n                default:\n                    if (x[p] !== y[p]) {\n                        return false;\n                    }\n                    break;\n            }\n        }\n\n        return true;\n    }\n\n    if (arguments.length < 1) {\n        return true; //Die silently? Don't know how to handle such case, please help...\n        // throw \"Need two or more arguments to compare\";\n    }\n\n    for (i = 1, l = arguments.length; i < l; i++) {\n\n        leftChain = [];\n        rightChain = [];\n\n        if (!compare2Objects(arguments[0], arguments[i])) {\n            return false;\n        }\n    }\n\n    return true;\n}","// import DialogContentText from \"@material-ui/core/DialogContentText\";\n// import React from \"react\";\n\nexport function setLang(newLang) {\n    if(i18n[newLang]) window.LANG = newLang;\n}\n\nexport function getLangs() {\n    let langs = [];\n    for(let prop in i18n) {\n        langs.push({key:prop, caption:i18n[prop].langCaption});\n    }\n    return langs;\n}\n\nexport default function t(str) {\n    let LANG = 'ua';\n    if(window.LANG) LANG = window.LANG;\n    return (i18n[LANG][str]===undefined && i18n[LANG][str]!=='') ? str : i18n[LANG][str];\n}\n\nconst i18n = {\n    'en' : {\n        'langCaption' : 'English',\n    },\n    'ua' : {\n        'langCaption' : '',\n\n        'Wait a moment while app loading': ' ,  ',\n        'Last session terminated abnormally.': '     .',\n        'Do you want to recover last session?': '  ?',\n        'Recover last': ' ',\n        'Start new session': ' ',\n        'Cancel': '',\n        'Warning': '',\n        'Next': '',\n        'Previous': '',\n        'Print': '',\n        'Save': '',\n        'Loaded already': ' ',\n        'Name':'',\n        'Height':'',\n        'Width':'',\n        'Surface':'',\n        'glance':'',\n        'matte':'',\n\n        'Files': '',\n        'Selected': '',\n        'Cost': '',\n\n        'Are you sure?': ' ?',\n        'error': ' ',\n        'error status, let see log': '    ',\n\n        'Select CD, flash card or other source, then select format what you want, and press button':\n            ' CD        .    .   ',\n\n        'Select folder from list, and choose pictures to print. To view in fullscreen click on the name of picture' :\n            ' ,    .   ,    ',\n\n        'To continue you should select at least one image': '        ',\n        'Select all': ' ',\n        'Select none': '  ',\n        'No images': '  ',\n\n        'Current state of editor images will be lost.': '     .',\n\n\n        'Format': '',\n        'Amount': '-',\n        'Total': '',\n        'Successful printed': ' ',\n        'The number of your order is': '  ',\n        'Dont forget to remove your source.' : '    .',\n        'Thank you!': '!',\n\n    }\n};","import React from 'react';\nimport * as tools from \"../../tools\";\nimport t from \"../i18n\";\nimport {getLangs} from \"../i18n\";\nimport {setLang} from \"../i18n\";\nimport './index.css';\nimport Icon from '@material-ui/core/Icon';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Paper from \"@material-ui/core/Paper\";\nimport axios from \"axios\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\n\nexport default class PageStart extends React.Component {\n    constructor(props) {\n        super(props);\n        this.checkSourceTimer = null;\n        this.checkSourceTimerMax = 7200; // about 10 hours\n        this.checkSourceTimerCount = this.checkSourceTimerMax;\n\n        this.state = {\n            isLangsOpen: false,\n        }\n    }\n\n\n    componentWillUnmount() {\n        if(this.checkSourceTimer) clearTimeout(this.checkSourceTimer);\n    }\n\n    componentDidMount() {\n        let sources = this.props.app.sources.slice();\n        let len = sources.length;\n\n        for(let i=0; i<len; i++)\n            sources[i].hasFiles = false;\n        this.props.appSetState({sources : sources}, ()=>{\n            this.checkSources(true);\n        });\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if(prevProps.app.isUploadEnable !== this.props.app.isUploadEnable && this.props.app.isUploadEnable){\n            if(this.inputUpload) this.inputUpload.click();\n        }\n    }\n\n    checkSources(initRefresh) {\n        if(!this.props.app.sources) return;\n\n        let sources = this.props.app.sources.slice();\n        let len = sources.length;\n\n        if(initRefresh) {\n            this.checkSourceTimerCount = 0;\n        }\n\n        for(let i=0; i<len; i++) {\n            if(sources[i].enabled && sources[i].emptyhide) {\n                let uri = tools.makeGetUri({'q':'checkEmptySource', 'id': i});\n                axios.get(uri).then(res => {\n                    if(res.status===200) {\n                        if(res.data.error==='') {\n                            sources[i].hasFiles = res.data.data;\n                            this.props.appSetState({sources : sources});\n                        }\n                    }\n\n                });\n            }\n        }\n        if(this.checkSourceTimerCount<this.checkSourceTimerMax)\n            this.checkSourceTimer = setTimeout( this.checkSources.bind(this), 9000 );\n\n        this.checkSourceTimerCount++;\n    }\n\n\n    clientUploadProgress = (progress) => {\n        let percentage = Math.floor((progress.loaded * 100) / progress.total);\n        // console.log(myFileId)\n        this.props.appSetState({ progressBarValue: percentage });\n\n        // console.log(percentage);\n    };\n\n    clientUpload = (event)=>{\n        let formData = new FormData();\n        let uploadfiles = event.target.files;\n\n        if(uploadfiles.length===0) return;\n\n        this.props.appSetState({isPleaseWait:true});\n        let config = {\n            onUploadProgress: (Ev)=>this.clientUploadProgress(Ev),\n            headers: { 'Content-Type': 'multipart/form-data' },\n        };\n\n        // formData.append(\"q\", 'src-upload');\n        for (let i=0; i<uploadfiles.length; i++) {\n            formData.append(\"images[]\", uploadfiles[i]);\n        }\n\n        axios.post( tools.makeGetUri({'q':'src-upload', 'p':this.props.app.isSetupPassword}), formData, config )\n            .then(()=>{\n                this.checkSources();\n            })\n            .catch((error)=>{\n                console.log(error);\n            })\n            .finally(()=>{\n                if(event.target) event.target.files = null;\n                this.props.appSetState({isPleaseWait:false, progressBarValue:-1});\n            });\n    };\n\n    openLangsPanel=(key)=>{\n        if(key) {\n            setLang(key);\n        }\n        this.setState({isLangsOpen:!this.state.isLangsOpen});\n    };\n\n\n\n    render() {\n        let sources = (this.props.app.sources ? this.props.app.sources : []);\n        let langs = getLangs();\n        let langsList = this.state.isLangsOpen ? (\n            <ClickAwayListener onClickAway={()=>{this.openLangsPanel()}}>\n                <Paper className=\"app-main-change-langs scrollbar position-absolute\">\n                    <table className=\"table-langs\">\n                        {langs.map( (lang, index)=>\n                            <tbody key={index} onClick={()=>this.openLangsPanel(lang.key)}>\n                            <tr>\n                                <th scope=\"row\" className=\"text-left\"><Icon>language</Icon> {lang.caption}</th>\n                            </tr>\n                            </tbody>\n\n                            )}\n                    </table>\n                </Paper>\n            </ClickAwayListener>\n        ) : null;\n\n\n        return (\n            <div className=\"app-page app-bg-e0 app-page-start w-100 h-100\">\n                <div className=\"app-main h-85\">\n                    <div className=\"app-main-selectors w-85 h-100 d-inline-block\">\n                        <div  className=\"app-main-selectors-source text-center w-50 h-100 p-2 d-inline-block\">\n                            <Paper className=\"scrollbar p-2 h-100 app-bg-e  position-relative\">\n                                {sources.map( (source, index)=>\n                                    <Card key={index}\n                                          className={'app-source-item d-inline-block m-2'+(this.props.app.currentSource===index ? ' text-white bg-primary' : '')+(source.enabled ? '' : ' app-source-disabled')+((source.emptyhide && !source.hasFiles) ? ' app-source-emptyhide' : '')}\n                                          onClick={() => this.props.onClickSource(index)}\n                                    >\n                                        <CardContent>\n                                            <div className=\"card-img\">\n                                                <img src={tools.makeGetUri()+source.icon} alt={source.name} className=\"app-source-icon\"/>\n                                            </div>\n                                            {source.enabled && source.name}\n\n                                        </CardContent>\n                                    </Card>\n                                )}\n\n                            </Paper>\n                        </div>\n                        <div className=\"app-main-selectors-format w-50 h-100 p-2 d-inline-block position-relative\">\n                            <Paper className=\"scrollbar p-2 h-100 app-bg-e  position-relative\">\n                                {this.props.app.formats.map( (format, index)=>format.enabled ?\n                                    <Card key={index}\n                                          className={'app-format-item m-2'+(this.props.app.currentFormat===index ? ' text-white bg-primary' : '')}\n                                          onClick={() => this.props.onClickFormat(index)}\n                                    >\n                                        <CardContent>\n                                            <div className=\"app-main-selectors-format-wrp\">\n                                                <div className=\"_w30\">{format.name}</div>\n                                                <div className=\"_w20\">\n                                                    {format.height}\"x {format.width}\"\n                                                </div>\n                                                <div className=\"_w20\">\n                                                    {Math.round(format.height*25.4)}x{Math.round(format.width*25.4)}\n                                                </div>\n                                                <div className=\"_w15\">{t(format.surface)}</div>\n                                                <div className=\"_w15 text-right\">{tools.Round(format.cost)}</div>\n                                            </div>\n\n                                        </CardContent>\n                                    </Card>\n                                :\n                                    ''\n                                )}\n                            </Paper>\n                        </div>\n\n                    </div>\n\n                    <div className=\"app-main-rightwidget w-15 h-100 p-2 d-inline-block\">\n                        <Paper className=\"h-100 p-2 app-bg-e position-relative\">\n                            <div className=\"_fabwrapper\">\n                                <button\n                                    className={\"btn btn-big btn-primary\"}\n                                    disabled={this.props.app.currentSource===null || this.props.app.currentFormat===null}\n                                    onClick={() => this.props.onClickNextBtn()}\n                                    type=\"button\">\n                                    <Icon>arrow_forward</Icon> {t('Next')}\n                                </button>\n                            </div>\n\n                            <div className=\"_fabwrapper\">\n                                <button\n                                    className=\"btn btn-big btn-success mt-4\"\n                                    disabled={this.checkSourceTimerCount<this.checkSourceTimerMax}\n                                    onClick={() => this.checkSources(true)}\n                                    type=\"button\">\n                                    <Icon>refresh</Icon> {t('Refresh')}\n                                </button>\n                            </div>\n\n\n                            <div className=\"bottom-absolute w-100\">\n\n                                <div className=\"_fabwrapper\">\n                                    <div className=\"app-main-change-langs-wrapper position-relative\">\n                                        {langsList}\n                                        <button className=\"btn btn-big btn-light text-success\"\n                                                style={{minWidth:'10vh', width:'auto'}}\n                                                onClick={this.openLangsPanel}\n                                                disabled={false}\n                                                title={t('Language')}\n                                                type=\"button\" >\n                                            <Icon>language</Icon>\n                                            <div>\n                                                {t('langCaption')}\n                                            </div>\n                                        </button>\n\n                                    </div>\n                                </div>\n\n\n                                <div className=\"_fabwrapper\">\n                                    <button type=\"button\"\n                                            className={\"btn btn-big btn-success\"}\n                                            disabled={false}\n                                            onClick={()=>{this.props.appSetState({isSetup:1})}}>\n                                        <Icon>build</Icon>\n                                        <div>\n                                            {this.props.app.version}\n                                        </div>\n                                    </button>\n                                </div>\n\n                            </div>\n\n\n                        </Paper>\n                    </div>\n\n                </div>\n\n                <div className=\"app-bottomframe p-2 h-15 w-100\">\n                    <Paper className=\"p-2 app-bg-e h-100 w-100 app-bottom-msg-wrp position-relative\">\n\n                        {this.props.app.isUploadEnable && (\n                            <label htmlFor=\"file-input\">\n                                <input id=\"file-input\" ref={input=>this.inputUpload=input} type=\"file\" multiple onChange={(e)=>this.clientUpload(e)} />\n                                <Icon className=\"_icon text-white text-success\">info</Icon>\n                            </label>\n\n                        )}\n                        {!this.props.app.isUploadEnable && (\n                            <Icon onClick={()=>{this.props.appSetState({isSetup:2})}} className=\"_icon text-white\">info</Icon>\n                        )}\n\n                        <div className=\"_msg\">\n                            {t('Select CD, flash card or other source, then select format what you want, and press button')} '{t('Next')}'\n                        </div>\n\n                        {(this.props.app.progressBarValue>=0 && (\n                            <div className=\"app-bottom-progress h-100 p-2 w-100\">\n                                <LinearProgress variant=\"determinate\" value={this.props.app.progressBarValue} />\n                            </div>\n                        ))}\n\n                    </Paper>\n                </div>\n\n            </div>\n\n\n        );\n    }\n}\n\n","import React, {PureComponent} from 'react';\nimport * as tools from \"../../tools\";\nimport axios from \"axios\";\nimport t from \"../i18n\";\n\nimport './index.css';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Icon from \"@material-ui/core/Icon\";\nimport Fab from '@material-ui/core/Fab';\nimport Paper from '@material-ui/core/Paper';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n// import ImageThumb from \"../PageEditor/ImageThumb\";\n\nconst resetState = {\n    folders: [],\n    tree: [],\n    currentFolder: null,\n    is_loadind_images: true,\n    expandedImage: null,\n    images: [],\n    progressAjax: {},\n    previewMaxResize: null,\n    isAutoclearLoading: false,\n    isAutoclearLoaded: 0,\n};\n\nexport default class PageLoadImages extends React.Component {\n    constructor(props) {\n        super(props);\n        this.imagesContainer = null;\n        this.isAutoclearTimer = null;\n\n        this.state = resetState;\n    }\n\n\n    componentDidMount() {\n        // if(this.props.app.pages['loadImages']) {\n        //     this.setState( this.props.app.pages['loadImages'] );\n        // } else {\n        //     this.onClickDir(null);\n        // }\n        if(this.props.app.sources[this.props.app.currentSource].autoclear) {\n            this.setState({isAutoclearLoading:true}, ()=>{this.onClickDir(null);});\n        } else {\n            this.onClickDir(null);\n        }\n\n\n    }\n\n\n    scrollImages(direction) {\n        // console.log(this.imagesContainer);\n\n        if(this.imagesContainer) {\n            console.log('scrollTop', this.imagesContainer.scrollTop);\n            console.log('scrollHeight', this.imagesContainer.scrollHeight);\n            let rowH = this.imagesContainer.scrollHeight/Math.ceil((this.state.images.length/3) );\n            console.log('rowCount', rowH);\n            this.imagesContainer.scrollTop += rowH*direction;\n        }\n    }\n\n    onClickDir(index) {\n        let currentDir = (index && this.state.folders ? this.state.folders[index].dir : '' );\n        let uri = '';\n\n        if(this.state.isAutoclearLoading) {\n\n            uri = tools.makeGetUri({'q':'source', 'id': this.props.app.currentSource, dir: currentDir});\n            axios.get(uri).then(res => {\n                if(res.status===200) {\n                    if(res.data.error==='') {\n                        this.setState({ isAutoclearLoaded: res.data.data.length } );\n                    }\n                }\n            });\n\n            this.isAutoclearTimer = setTimeout( ()=>{this.onClickDir()}, 3000);\n\n        } else { // ------------------------------------------- full load folders and images\n\n            if(this.isAutoclearTimer) clearTimeout(this.isAutoclearTimer);\n\n            let _d = '';\n            let folders = [{\n                'list': this.props.app.currentSource,\n                'source': this.props.app.sources[this.props.app.currentSource],\n                'name': this.props.app.sources[this.props.app.currentSource].name,\n                'dir': _d,\n                'level': 0,\n            }];\n            this.setState({folders: folders, currentFolder: null });\n\n            uri = tools.makeGetUri({'q':'folders', 'id': this.props.app.currentSource, dir: currentDir });\n            axios.get(uri).then(res => {\n                if(res.status===200) {\n                    if(res.data.error==='') {\n                        var _L = 1;\n                        for (let i=0; i<res.data.tree.length; i++) {\n                            _d += (_d!=='' ? '/' : '')+res.data.tree[i];\n                            let _f = {\n                                'list': this.props.app.currentSource,\n                                'name': res.data.tree[i],\n                                'dir': _d,\n                                'level': _L,\n                            };\n                            if(_L<5) _L++;\n                            folders.push(_f);\n                        }\n\n                        for (let _f of res.data.data) {\n                            _f.level = _L;\n                            folders.push(_f);\n                        }\n                        this.setState({\n                            folders: folders,\n                            currentFolder: res.data.tree.length,\n                        });\n\n                        this.setState({images: [], is_loadind_images: true });\n\n                        let progress = 3;\n                        this.props.appSetState({ progressBarValue:progress });\n                        let uri = tools.makeGetUri({'q':'source', 'precache':true, 'id': this.props.app.currentSource, dir: currentDir});\n                        axios.get(uri, {\n                            onDownloadProgress: (progressEvent) => {\n                                let percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n                                progress = progressEvent.lengthComputable ? percentCompleted : progress;\n                                // console.log(progress);\n                                this.props.appSetState({ progressBarValue: progress })\n                            }\n                        })\n                            .then((/*response*/) => {\n                                this.props.appSetState({ progressBarValue:-1 });\n\n                                uri = tools.makeGetUri({'q':'source', 'id': this.props.app.currentSource, dir: currentDir});\n                                axios.get(uri).then(res => {\n                                    if(res.status===200) {\n                                        if(res.data.error==='') {\n                                            this.setState({ images: res.data.data }, ()=>{this.imagesScroll()} );\n                                        }\n                                    }\n                                    this.setState({is_loadind_images: false});\n                                });\n\n\n                            }).catch(error => {\n                            if (error.response) {\n                                console.log(error.responderEnd);\n                                this.props.onMessage('testProgress error: '+error.responderEnd);\n                                progress = -1;\n                                this.props.appSetState({ progressBarValue:-1 })\n                            }\n                        });\n\n                    }\n                }\n            });\n\n        }\n\n\n    }\n\n\n    showExpandImg(index) {\n        this.setState({expandedImage: null} , ()=>{\n            this.setState({expandedImage: index}, ()=>{this.reopenThumb(index)})\n        })\n    }\n    reopenThumb(index) {\n        //image.name\n        let newIm = this.state.images.slice();\n        let reopen = newIm[index].name;\n        newIm[index].name = '';\n        this.setState({images: newIm}, ()=>{\n            newIm[index].name = reopen;\n            this.setState({images: newIm});\n        });\n\n    }\n\n    hideExpandImg() {\n        this.setState({expandedImage: null})\n    }\n    MarkImage(index){\n        let newIm = this.state.images.slice();\n        newIm[index].marked = !newIm[index].marked;\n        this.setState({images: newIm});\n    }\n\n    markAllImages(mode) {\n        let newIm = this.state.images;\n        for(let i=0; i<newIm.length; i++) {\n            newIm[i].marked = mode;\n        }\n        this.setState({images: newIm});\n    }\n\n\n    setpreviewMaxResize(value) {\n        this.setState({previewMaxResize:value});\n    }\n\n    nextPage = ()=> {\n\n        // args - this.state.images\n        const selectedimages = this.state.images.filter(function(x){return x.marked});\n        if(selectedimages.length===0) {\n            this.props.onMessage(t('To continue you should select at least one image'));\n            return;\n        }\n        const dirs = selectedimages.map( (image)=> { return image.dir;} );\n        const files = selectedimages.map( (image)=> { return image.name;} );\n\n        let uri = tools.makeGetUri();\n        const params = new URLSearchParams();\n        params.append('q', 'movetowork');\n        params.append('id', this.props.app.currentSource);\n        params.append('maxWidth', (this.state.previewMaxResize ? this.state.previewMaxResize : 300));\n\n        for(let _d of dirs ) params.append('dirs[]', _d);\n        for(let _f of files ) params.append('files[]', _f);\n\n\n            let progress = 3;\n            this.props.appSetState({ progressBarValue: progress, isPleaseWait:true });\n            axios.post(uri, params, {\n                onDownloadProgress: (progressEvent) => {\n                    let percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n                    progress = progressEvent.lengthComputable ? percentCompleted : progress;\n                    // console.log(progress);\n                    this.props.appSetState({ progressBarValue: progress })\n                }\n            })\n                .then((/*response*/) => {\n                    progress = -1;\n                    this.props.appSetState({ progressBarValue:-1 });\n\n                    let uri = tools.makeGetUri({'q':'workpath'});\n                    axios.get(uri).then(res => {\n                        if(res.status===200) {\n                            if(res.data.error==='') {\n                                let dpi =  this.props.app.formats[this.props.app.currentFormat].dpi ? this.props.app.formats[this.props.app.currentFormat].dpi : 300;\n                                const images = selectedimages.map( (image)=> {\n                                    let thumbname = res.data.data.thumbs+image.dir+ image.name.substr(0, image.name.lastIndexOf(\".\")) +\".jpg\";\n                                    if(image.orientation === 6 || image.orientation === 8) {\n                                        let tmpw = image.width;\n                                        image.width = image.height;\n                                        image.height = tmpw;\n                                    }\n\n                                    return {\n                                        name: image.name,\n                                        extension: image.extension,\n                                        width: tools.dpi_dots2inch(image.width, dpi),\n                                        height: tools.dpi_dots2inch(image.height, dpi),\n                                        width_pixel: image.width,\n                                        height_pixel: image.height,\n                                        orientation : image.orientation,\n                                        thumb: thumbname.replace('?', '%3F'),\n                                        src: res.data.data.works+image.name,\n                                        format: this.props.app.formats[this.props.app.currentFormat],\n                                        count: 1,\n                                        editorState: {\n\n                                            maskTB: 0,\n                                            maskLR: 0,\n                                            imageZoom: 1.0,\n                                            imageZoomMax: 1.9,\n                                            imageZoomMin: 0.1,\n                                            imageRotate: 0,\n                                            colorR: 1.0,\n                                            colorG: 1.0,\n                                            colorB: 1.0,\n                                            brightness: 1,\n                                            contrast: 1,\n                                            saturate: 1,\n                                            sepia: false,\n\n                                            sliderPositionTB: 0,\n                                            sliderPositionLR: 0,\n\n                                            initedImagePosition: false,\n                                            initedMask: false,\n                                            ratio: 1.0,\n                                            imgWidth: image.width,\n                                            imgHeight: image.height,\n                                            currentTab: 0,\n\n                                        },\n\n\n                                };\n                                } );\n                                this.props.onClickNextBtn(images);\n\n                            }\n                        }\n                    });\n\n                    //console.log(images);\n                    // this.setState({appstate: 'editor', images: images});\n                }).catch(error => {\n                    if (error.response) {\n                        console.log('movetowork error', error.responderEnd);\n                        this.props.onMessage('movetowork error: '+error.responderEnd);\n                        progress = -1;\n                        this.props.appSetState({ progressBarValue:-1, isPleaseWait:false })\n                    }\n                });\n\n    };\n\n    imagesScroll() {\n        // console.log(this.imagesContainer.children);\n        let images = this.state.images.slice();\n        let changed = false;\n        if(this.imagesContainer && this.imagesContainer.children) {\n            let viewHeight = this.imagesContainer.clientHeight;\n            let len = this.imagesContainer.children.length;\n            for(let i=0; i<len; i++) {\n                if(images[i] && !images[i].is_appeared) {\n                    let rect = this.imagesContainer.children[i].getBoundingClientRect();\n                    let is_visible = !(rect.bottom < 0 || rect.top - viewHeight >= 0);\n                    if(is_visible) {\n                        images[i].is_appeared = true;\n                        changed = true;\n                    }\n                }\n            }\n        }\n        if(changed) {\n            this.setState({images:images});\n        }\n    }\n\n\n\n    render() {\n\n        const selectedimages = this.state.images.filter(function(x){return x.marked});\n        const cost = this.props.app.formats[this.props.app.currentFormat].cost;\n\n        return (\n\n            <div className=\"app-page app-bg-e0 app-page-start w-100 h-100\">\n                <div className=\"app-main h-90\">\n                    <div className=\"d-inline-block w-85 h-100\">\n                        <div className=\"app-main-selectors w-100 h-100 d-flex flex-row\">\n                            <div  className=\"app-main-selectors-folder h-100 p-2 flex-grow-1 flex-shrink-1\">\n                                <Paper className=\"scrollbar p-2 h-100 app-bg-e\">\n                                    {this.state.folders.map( (dir, index)=>\n                                        <Card key={index}\n                                              className={'m-1 app-dir-item level'+dir.level+' '+(this.state.currentFolder===index ? ' text-white bg-primary' : '')}\n                                              onClick={() => this.onClickDir(index) }\n                                        >\n                                            <CardContent>\n                                                {dir.source && (\n                                                    <img src={tools.makeGetUri()+dir.source.icon} alt={dir.source.name} className=\"app-dir-item-icon\"/>\n                                                )}\n                                                {dir.name}\n                                                {index===0 &&\n                                                <Icon className=\"float-right\" >refresh</Icon>\n                                                }\n                                            </CardContent>\n                                        </Card>\n                                    )}\n                                </Paper>\n                            </div>\n                            <div className=\"app-main-selectors-image h-100 p-2 flew-grow-0 flex-shrink-0\">\n                                <Paper className=\"h-100 position-relative app-bg-e\">\n                                    <div  ref={(node)=>{this.imagesContainer=node}}\n                                          onScroll={()=>this.imagesScroll()}\n                                          className=\"p-2 h-100 scrollbar\">\n                                            {this.state.images.map( (image, index)=>\n                                                <ImagePreview\n                                                    key={image.name}\n                                                    image={image}\n                                                    itemIndex={index}\n                                                    imagesContainer = {this.imagesContainer}\n                                                    onExpand={()=>this.showExpandImg(index)}\n                                                    onMark={()=>this.MarkImage(index)}\n                                                    setpreviewMaxResize={()=>this.setpreviewMaxResize.bind(this)}\n                                                    {...this.props}\n                                                />\n                                            )}\n\n                                    </div>\n\n                                    {(!this.state.is_loadind_images && this.state.images.length===0) && (\n                                        <div className='app-source-noimages h-100 text-primary' >\n                                            {t('No images')}\n                                        </div>\n                                    )}\n\n                                    {(this.state.is_loadind_images && !this.state.isAutoclearLoading) && (\n                                        <div className = \"list-images-loader spinner-border text-primary\" role = \"status\" >\n                                            <span className = \"sr-only\" > Loading...</span>\n                                        </div>\n\n                                    )}\n\n                                </Paper>\n                            </div>\n\n                        </div>\n\n                    </div>\n                    <div className=\"app-main-rightwidget w-15 h-100 p-2 d-inline-block\">\n                        <Paper className=\"h-100 p-2 app-bg-e position-relative\">\n                            <div className=\"_fabwrapper\">\n                                <button className={\"btn btn-big btn-primary\"}\n                                        onClick={() => this.nextPage()}\n                                        disabled={false}\n                                        title={t(\"Next\")}\n                                        type=\"button\" >\n                                    <Icon>arrow_forward</Icon> {t('Next')}\n                                </button>\n                            </div>\n\n                            <div className=\"_fabwrapper\">\n                                <button className={\"btn btn-big btn-primary\"}\n                                        onClick={() => {this.props.onClickPrevBtn()}}\n                                        disabled={false}\n                                        title={t(\"Previous\")}\n                                        type=\"button\" >\n                                    <Icon>arrow_back</Icon> {t(\"Previous\")}\n                                </button>\n                            </div>\n\n\n                            <div className=\"_fabwrapper mt-4\">\n                                <button className={\"btn btn-success\"}\n                                        onClick={()=>this.scrollImages(-1)}\n                                        disabled={false}\n                                        title={t(\"up\")}\n                                        type=\"button\" >\n                                    <Icon>expand_less</Icon>\n                                </button>\n                            </div>\n\n                            <div className=\"_fabwrapper\">\n                                <button className={\"btn btn-success mr-2\"}\n                                        onClick={() => this.markAllImages(true)}\n                                        disabled={false}\n                                        title={t(\"Select all\")}\n                                        type=\"button\" >\n                                    <Icon>filter</Icon>\n                                </button>\n\n                                <button className={\"btn btn-success\"}\n                                        onClick={() => this.markAllImages(false)}\n                                        disabled={false}\n                                        title={t(\"Select none\")}\n                                        type=\"button\" >\n                                    <Icon>filter_none</Icon>\n                                </button>\n                            </div>\n\n                            <div className=\"_fabwrapper\">\n                                <button className={\"btn btn-success\"}\n                                        onClick={()=>this.scrollImages(1)}\n                                        disabled={false}\n                                        title={t(\"down\")}\n                                        type=\"button\" >\n                                    <Icon>expand_more</Icon>\n                                </button>\n                            </div>\n\n\n                            <div className=\"app-main-rightwidget-tablewrp\">\n                                <table className=\"table\">\n                                    <tbody>\n                                    <tr>\n                                        <th scope=\"row\">{t('Files')}</th>\n                                        <th scope=\"row\">{this.state.images.length}</th>\n                                    </tr>\n                                    <tr>\n                                        <th scope=\"row\">{t('Selected')}</th>\n                                        <th scope=\"row\">{selectedimages.length}</th>\n                                    </tr>\n                                    <tr>\n                                        <th scope=\"row\">{t('Cost')}</th>\n                                        <th scope=\"row\">{tools.Round(selectedimages.length*cost)}</th>\n                                    </tr>\n                                    </tbody>\n                                </table>\n\n                            </div>\n\n                        </Paper>\n\n                    </div>\n\n                </div>\n\n                <div className=\"app-bottomframe w-100 h-10 p-2 position-relative\">\n                    <Paper className=\"p-2 app-bg-e h-100 w-100 app-bottom-msg-wrp\">\n                        <Icon className=\"_icon text-white\">info</Icon>\n                        <div className=\"_msg\">\n                            {t('Select folder from list, and choose pictures to print. To view in fullscreen click on the name of picture')}\n                        </div>\n                    </Paper>\n\n                    {(this.props.app.progressBarValue>=0 && (\n                    <div className=\"app-bottom-progress h-100 p-2 w-100\">\n                        <LinearProgress variant=\"determinate\" value={this.props.app.progressBarValue} />\n                    </div>\n                    ))}\n                </div>\n\n                {this.state.isAutoclearLoading && (\n                    <div className=\"app-please-wait-wrp position-fixed\">\n\n                        <Paper className=\"app-page-loadimages-wait p-3\">\n                            <div className=\"app-source-icon-wrp\">\n                                <img src={tools.makeGetUri()+this.props.app.sources[this.props.app.currentSource].icon} alt={this.props.app.sources[this.props.app.currentSource].name} className=\"app-source-icon\"/>\n                            </div>\n                            {this.props.app.sources[this.props.app.currentSource].name}\n                            <div className=\"_loaded p-3\">\n                                {t('Loaded already')}: {this.state.isAutoclearLoaded}\n                            </div>\n\n                            <div className=\"_fabwrapper\">\n                                <button className={\"btn btn-big btn-success\"}\n                                        onClick={()=>{this.setState({isAutoclearLoading:false}, ()=>{this.onClickDir()}) }}\n                                        disabled={false}\n                                        title={t(\"OK\")}\n                                        type=\"button\" >\n                                    {t('Next')}\n                                </button>\n                            </div>\n\n                        </Paper>\n\n                    </div>\n                )}\n\n\n                <ModalExpand\n                    image={this.state.expandedImage!==null ? this.state.images[this.state.expandedImage] : null}\n                    itemCurrent={this.state.expandedImage}\n                    itemPrev={this.state.expandedImage>0 ? this.state.expandedImage-1: null}\n                    itemNext={this.state.expandedImage<(this.state.images.length-2) ? this.state.expandedImage+1 : null}\n                    onExpand={this.showExpandImg.bind(this)}\n                    onMark={this.MarkImage.bind(this)}\n                    onClose={this.hideExpandImg.bind(this)}\n                />\n            </div>\n        );\n    }\n}\n\nclass ImagePreview extends PureComponent {\n\n    render() {\n        const image = this.props.image;\n        // this.props.image.orientation\n        // 1 - no rotate\n        // 3 - 180deg\n        // 6 - 270deg\n        // 8 - 90deg\n        var rotate = \"\";\n        switch (this.props.image.orientation) {\n            case 3:\n                rotate = \" rotate180\";\n                break;\n            case 6:\n                rotate = \" rotate90\";\n                break;\n            case 8:\n                rotate = \" rotate270\";\n                break;\n            default:\n                break;\n        }\n\n        let previewMaxResize = 300;\n        if(this.props.previewMaxResize) {\n            previewMaxResize = this.props.previewMaxResize;\n        } else {\n            if(this.imgWrapper) {\n                previewMaxResize = this.imgWrapper.clientWidth;\n                this.props.setpreviewMaxResize(previewMaxResize);\n            }\n        }\n\n        let imgStyle = {backgroundImage: 'url('+tools.makeGetUri({'q':'img', 'id':image.list, dir:image.dir, 'src':image.name, 'max':previewMaxResize})+')'};\n\n        return (\n            <Card className='app-source-image-item d-inline-block m-1 position-relative' >\n                <CardContent className={\"p-0\"}\n                     onClick={()=>this.props.onMark()}\n                     onDoubleClick={()=>this.props.onExpand(this.props.itemIndex)}\n                >\n                    <div ref={(node)=>{this.imgWrapper=node}}\n                        className={\"app-source-image-item-img-wrapper p-1 \"+(image.marked ? ' text-white bg-primary': '')}>\n                        {image.is_appeared &&\n                        <div className={\"app-source-image-item-img border \"+rotate} style={imgStyle} />\n                        }\n                        {!image.is_appeared &&\n                        <div className=\"app-source-image-item-img border \" >\n                        </div>\n                        }\n\n                        <div className='app-source-image-item-toggle position-absolute'>\n                            <Fab className=\"bg-primary text-light\"\n                                onClick={(e)=> {e.stopPropagation(); this.props.onMark()}}\n                                aria-label=\"Check\" >\n                                <Icon>check</Icon>\n                            </Fab>\n                        </div>\n                        <div className='app-source-image-item-fullscreen position-absolute'>\n                            <Fab className=\"bg-success text-light\"\n                                onClick={()=>this.props.onExpand(this.props.itemIndex)}\n                                aria-label=\"Fullscreen\" >\n                                <Icon>zoom_in</Icon>\n                            </Fab>\n                        </div>\n\n\n                        <div className=\"app-selectimages-item-text text-center m-1\">\n                            {image.name}\n                        </div>\n\n                    </div>\n                </CardContent>\n            </Card>\n        )\n    }\n}\n\nclass ModalExpand extends PureComponent {\n\n    render() {\n        const image = this.props.image;\n\n        if (image===null) return null;\n\n        var rotate = \"\";\n        switch (image.orientation) {\n            case 3:\n                rotate = \" rotate180\";\n                break;\n            case 6:\n                rotate = \" rotate90\";\n                break;\n            case 8:\n                rotate = \" rotate270\";\n                break;\n            default:\n                break;\n        }\n\n        let imgsrc = tools.makeGetUri({'q':'img', 'id':image.list, dir:image.dir, 'src':image.name, 'max':-1});\n\n        return (\n            <div className=\"app-modal\" onClick={()=>this.props.onClose()}>\n                <div className=\"app-modal-main position-fixed\">\n                        <div className={\"rotate-wrp app-source-image-expanded rounded\"+rotate+(image.marked ? ' bg-primary': '')}>\n                            <img src={imgsrc} alt=\"zoomed\" onClick={(e)=> {e.stopPropagation(); this.props.onMark(this.props.itemCurrent)}} />\n                        </div>\n\n                </div>\n\n                <div\n                    onClick={(e)=>{if(this.props.itemPrev===null)return; e.stopPropagation(); this.props.onExpand(this.props.itemPrev)}}\n                    className='app-image-expanded-button _prev position-absolute'>\n                    <Fab disabled={this.props.itemPrev===null} aria-label=\"Previous\">\n                        <Icon>navigate_before</Icon>\n                    </Fab>\n                </div>\n\n                <div\n                    onClick={(e)=> {e.stopPropagation(); this.props.onMark(this.props.itemCurrent)}}\n                    className='app-image-expanded-button _check position-absolute'>\n                    <Fab\n                        aria-label=\"Check\" >\n                        <Icon className=\"text-success\">check</Icon>\n                    </Fab>\n                </div>\n\n                <div\n                    onClick={(e)=>{if(this.props.itemNext===null)return; e.stopPropagation(); this.props.onExpand(this.props.itemNext)}}\n                    className='app-image-expanded-button _next position-absolute'>\n                    <Fab disabled={this.props.itemNext===null}\n                         aria-label=\"Next\">\n                        <Icon>navigate_next</Icon>\n                    </Fab>\n                </div>\n\n                <div\n                    onClick={(e)=>{e.stopPropagation(); this.props.onClose()}}\n                    className='app-image-expanded-button _close position-absolute'>\n                    <Fab aria-label=\"Close\" >\n                        <Icon>close</Icon>\n                    </Fab>\n                </div>\n\n            </div>\n        );\n\n\n    }\n\n}\n","import React, {PureComponent} from \"react\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\n\nimport * as tools from \"../../tools\";\nimport Icon from \"@material-ui/core/Icon\";\nimport {THEME} from \"../../tools\";\n\n\nexport default class ImageThumb extends PureComponent {\n    constructor(props){   // Optional, declare a class field to improve readability\n        super(props);\n        this.nodeThumb = null;\n        this.scrollRef = null;\n\n        // this.state = {\n        //     thumbWidth: '100px',\n        // }\n    }\n\n    componentDidMount() {\n        if(this.nodeThumb) {\n            // if(this.state.thumbWidth !== this.nodeThumb.clientHeight) {\n            //     this.setState({\n            //         thumbWidth: this.nodeThumb.clientHeight, //this is not an error, need square\n            //     })\n            // }\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if(this.scrollRef && this.props.selected) {\n            this.props.scrollIntoView(this.scrollRef);\n        }\n    }\n\n    render() {\n        const image = this.props.image;\n        // this.props.image.orientation\n        // 1 - no rotate\n        // 3 - 180deg\n        // 6 - 270deg\n        // 8 - 90deg\n        let rotate = \"\";\n        switch (image.orientation) {\n            case 3:\n                rotate = \" rotate180\";\n                break;\n            case 6:\n                rotate = \" rotate90\";\n                break;\n            case 8:\n                rotate = \" rotate270\";\n                break;\n            default:\n                break;\n        }\n        // let boxStyles = {width: this.state.thumbWidth, height: this.state.thumbWidth}; //this is not an error, need square\n        //\n        // let styles = {width: '100%', height: 'auto'};\n        // if(image.height>image.width) {\n        //     styles = {width: 'auto', height: '100%'};\n        // }\n\n\n        let _icon_enabled = 'inherit';\n        let _icon_disabled = 'disabled';\n        let clrZoom = _icon_disabled;\n        let clrFilters = _icon_disabled;\n        let clrColors = _icon_disabled;\n        if(image.editorState) {\n            if(image.editorState.initedImagePosition) clrZoom = _icon_enabled;\n            if(image.editorState.brightness!==1) clrFilters = _icon_enabled;\n            if(image.editorState.contrast!==1) clrFilters = _icon_enabled;\n            if(image.editorState.saturate!==1) clrFilters = _icon_enabled;\n            if(image.editorState.sepia) clrFilters = _icon_enabled;\n            if(image.editorState.colorR!==1) clrColors = _icon_enabled;\n            if(image.editorState.colorG!==1) clrColors = _icon_enabled;\n            if(image.editorState.colorB!==1) clrColors = _icon_enabled;\n        }\n\n\n        return (\n            <Card className={'app-editor-items-scroller__item m-1 position-relative '+(this.props.selected ? ' text-light bg-primary' : ' text-primary bg-light')} >\n                <CardContent  className={\"p-0 position-relative\"} onClick={this.props.onSelect} >\n                    <div ref={(node)=>this.scrollRef=node} className={\"app-editor-items-scroller__item__img-wrapper p-1\"}>\n                        <div ref={(node)=>this.nodeThumb=node} className={\"app-editor-items-scroller__item__img-box border \"+rotate} >\n                            <span className=\"app-editor-thumb-item-img-helper\"/>\n                            <img\n                                src={tools.makeGetUri()+encodeURI(image.thumb)}\n\n                                alt=\"\" className={\"app-editor-thumb-item-image\"+(!image.count ? ' _zero' : '')}/>\n                        </div>\n                    </div>\n                    <div className={\"app-editor-thumb-item-img-countbubble\"}\n                        style={{backgroundColor: THEME.palette.primary.main, color:THEME.palette.primary.contrastText }}\n                        >\n                        <span>{image.count ? image.count : '-'}</span>\n                    </div>\n\n                    <div className={\"app-editor-items-scroller__item__img-controls h-100\"}>\n\n                            <div>\n                                <Icon fontSize={'small'} color={clrZoom}>zoom_out_map</Icon>\n                            </div>\n                            <div>\n                                <Icon fontSize={'small'} color={clrFilters}>brightness_medium</Icon>\n                            </div>\n                            <div>\n                                <Icon fontSize={'small'} color={clrColors}>equalizer</Icon>\n                            </div>\n                            <div className={\"app-editor-thumb-item-img-index\"}>\n                                <span>{this.props.itemIndex+1}</span>\n                            </div>\n\n\n                    </div>\n                    {!image.count && (\n                        <div className=\"app-editor-thumb-zeroprint\">x</div>\n                    )}\n                </CardContent>\n\n\n            </Card>\n        )\n    }\n}\n","import React from \"react\";\nimport * as tools from \"../../tools\";\nimport {calculateImageDimensions} from \"../../tools\";\n\nexport default class ImageEditorZoomCanvas extends React.Component {\n    constructor(props) {\n        super(props);\n        this.canvasImg = new Image();\n        this.canvasImg.crossOrigin = 'anonymous';\n        const _upd = this.updateCanvas.bind(this);\n        this.canvasImg.onload = function() {\n            _upd();\n        };\n        this.renderedImageIndex = null;\n\n        this.state = {\n            imgSrc: null,\n            dragImage: false,\n            dragX: 0,\n            dragY: 0,\n        }\n    }\n\n    componentDidMount() {\n        const image = this.props.app.images[this.props.app.currentImage];\n        if(!image.editorState.initedMask) {\n            this.props.appImageInitMask(this.props.app.currentImage);\n            return;\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n\n        if(this.props.app.currentImage!==prevProps.app.currentImage) {\n            console.log('new image clicked');\n            this.setState({\n                imgSrc: null,\n            });\n            return;\n        }\n\n        this.props.appEditorChanged(this.myImgContainer.clientWidth, this.myImgContainer.clientHeight);\n\n        const image = this.props.app.images[this.props.app.currentImage];\n        if(!image.editorState.initedMask) {\n            this.props.appImageInitMask(this.props.app.currentImage);\n            return;\n        }\n\n        if(!image.editorState.initedImagePosition) {\n            this.props.alignInit(this.props.app.currentImage);\n            return;\n        }\n\n        let img_src = tools.makeGetUri()+encodeURI(image.src);\n        if(this.canvasImg.src!==img_src) {\n            const _upd = this.updateCanvas.bind(this);\n            this.canvasImg.onload = function() {\n                _upd();\n            };\n            this.canvasImg.src=img_src;\n            return;\n        }\n\n        // if(image.editorState.needUpdateCanvas) {\n            this.updateCanvas();\n        // }\n\n\n    }\n\n    updateCanvas() {\n\n        // console.log('Zoom updateCanvas');\n        if(!this.myCanvas || this.myCanvas.clientWidth===0 || this.myCanvas.clientHeight===0) return;\n\n        const ctx = this.myCanvas.getContext('2d');\n        let canvasX = this.myCanvas.clientWidth;\n        let canvasY = this.myCanvas.clientHeight;\n        // console.log('drawImage', this.canvasImg.src, canvasX, canvasY);\n\n        const editorState = this.props.app.images[this.props.app.currentImage].editorState;\n        try {\n            ctx.drawImage(this.canvasImg, 0, 0, canvasX, canvasY);\n            let pixelArray = ctx.getImageData(0,0, canvasX, canvasY);\n\n            if(editorState.brightness!==1 || editorState.contrast!==1 || editorState.colorR!==1 || editorState.colorG!==1 || editorState.colorB!==1 ) {\n                pixelArray = tools.ColorCorrection(pixelArray, editorState.brightness, editorState.contrast, editorState.colorR, editorState.colorG, editorState.colorB);\n            }\n            if(editorState.sepia) {\n                pixelArray = tools.ColorSepia(pixelArray, 1);\n            }\n            if(editorState.saturate!==1) {\n                pixelArray = tools.saturate(pixelArray, editorState.saturate);\n            }\n            ctx.putImageData(pixelArray, 0, 0);\n\n            if(this.props.app.isDebugShow) {\n                // draw source rect\n                const {sX, sY, sW, sH} = calculateImageDimensions(this.props.app, this.props.app.currentImage);\n                const r = editorState.ratio;\n                const z = editorState.imageZoom;\n                const w = 6;\n                ctx.lineWidth = w;\n                ctx.strokeStyle = \"yellow\";\n                // console.log(Math.round(sX*r*z), Math.round(sY*r*z), Math.round(sW*r*z), Math.round(sH*r*z));\n                ctx.strokeRect(Math.round(sX*r*z)+w, Math.round(sY*r*z)+w, Math.round(sW*r*z)-w*2, Math.round(sH*r*z)-w*2 );\n            }\n\n        } catch (e) {\n            console.log('drawImage failed')\n        }\n    }\n\n    onDragStart = (e) => {\n        e.preventDefault();\n        return false;\n    };\n\n    movingStart =() =>{\n        this.setState({\n            dragImage: true,\n            dragX: null,\n            dragY: null,\n        });\n\n    };\n    movingOn = (e) => {\n        if(this.state.dragImage) {\n            const dragX = this.state.dragX ? this.state.dragX : e.screenX;\n            const dragY = this.state.dragY ? this.state.dragY : e.screenY;\n            const shiftX = e.screenX - dragX;\n            const shiftY = e.screenY - dragY;\n            // console.log(shiftX, shiftY);\n            this.setState({\n                dragX: e.screenX,\n                dragY: e.screenY,\n            }, ()=> {\n                const sliderPositionLR = this.props.app.images[this.props.app.currentImage].editorState.sliderPositionLR + shiftX;\n                const sliderPositionTB = this.props.app.images[this.props.app.currentImage].editorState.sliderPositionTB + shiftY;\n                this.props.appImageChanged(this.props.app.currentImage, {sliderPositionLR: sliderPositionLR, sliderPositionTB: sliderPositionTB})\n            });\n\n        }\n    };\n    movingStop =() =>{\n        this.setState({\n            dragImage: false,\n            dragX: null,\n            dragY: null,\n        });\n\n    };\n\n    render() {\n        // console.log('ZoomCanvas render');\n        const newImage = this.renderedImageIndex !== this.props.app.currentImage;\n        this.renderedImageIndex = this.props.app.currentImage;\n\n        const image = this.props.app.images[this.props.app.currentImage];\n        if(newImage) {\n            let img_src = tools.makeGetUri()+encodeURI(image.src);\n            if(this.canvasImg.src!==img_src) {\n                this.canvasImg.src=img_src;\n            }\n        }\n\n\n        // console.log('render ImageEditorZoomCanvas ');\n        let maskTBStyle = {\n            height: image.editorState.maskTB,\n        };\n        let viewportStyles = {\n            height: this.props.app.editorHeight - image.editorState.maskTB*2,\n            width: this.props.app.editorWidth - image.editorState.maskLR*2,\n            top: image.editorState.maskTB,\n            left: image.editorState.maskLR,\n        };\n        let vpCoordinates = {\n            top: viewportStyles.top,\n            right: viewportStyles.left+viewportStyles.width,\n            bottom: viewportStyles.top + viewportStyles.height,\n            left: viewportStyles.left,\n        }\n        let viewportBorderLstyles = {\n            top: vpCoordinates.top,\n            left: vpCoordinates.left-2,\n            width: 1,\n            height: viewportStyles.height,\n        };\n        let viewportBorderRstyles = {\n            top: vpCoordinates.top,\n            left: vpCoordinates.right+1,\n            width: 1,\n            height: viewportStyles.height,\n        };\n        let viewportBorderTstyles = {\n            top: vpCoordinates.top-2,\n            left: vpCoordinates.left,\n            width: viewportStyles.width,\n            height: 1,\n        }\n        let viewportBorderBstyles = {\n            top: vpCoordinates.bottom+1,\n            left: vpCoordinates.left,\n            width: viewportStyles.width,\n            height: 1,\n        }\n        let maskLRStyle = {\n            width: image.editorState.maskLR,\n        };\n\n        let canvasWidth = Math.ceil(image.editorState.imgWidth);\n        let canvasHeight = Math.ceil(image.editorState.imgHeight);\n        let canvasStyle = {\n            top: image.editorState.sliderPositionTB,\n            left: image.editorState.sliderPositionLR,\n            transform: 'rotate('+image.editorState.imageRotate+'deg)',\n        };\n\n        let rL, rR, rT, rB;\n        if(this.props.app.isDebugShow) {\n            const p = calculateImageDimensions(this.props.app, this.props.app.currentImage);\n            // console.log(p);\n            const ratio = image.editorState.ratio;\n            rL = Math.round(p.pX*ratio)+2;\n            rR = Math.round((p.pX+p.pW)*ratio)-2;\n            rT = Math.round(p.pY*ratio)+2;\n            rB = Math.round((p.pY+p.pH)*ratio)-2;\n\n            // console.log(rT, rR, rB, rL);\n            // console.log('-----------------');\n        }\n\n       return (\n           <div className=\"app-main-editor-Printable-Mask border-light fld3d\">\n               <div className=\"app-main-editor-Printable-mask _t\" style={{height:'1rem'}} />\n               <div className=\"app-main-editor-Printable-mask _l\" style={{width:'1rem'}} />\n               <div ref={(node)=>{this.myImgContainer=node}} className='app-main-editor-Printable' >\n\n                   <div className=\"app-main-editor-Printable-mask _t\" style={maskTBStyle} />\n                   <div className=\"app-main-editor-Printable-mask _l\" style={maskLRStyle} />\n\n                   <div onMouseMove={this.movingOn} onMouseUp={this.movingStop} className=\"app-main-editor-Printable-viewport\"\n                        style={viewportStyles}>\n                       <canvas\n                           className=\"app-main-editor-Printable-img\"\n                           ref={(node)=>{this.myCanvas=node}}\n                           width={ canvasWidth }\n                           height={ canvasHeight}\n                           style={ canvasStyle }\n                           draggable\n                           onDragStart={(e)=>this.onDragStart(e)}\n                           onMouseDown={this.movingStart}\n                           onMouseUp={this.movingStop}\n                       />\n\n                       {this.props.app.isDebugShow && (\n                           <div className=\"vRuler vRulerX\" style={{left: rL}} />\n                       )}\n                       {this.props.app.isDebugShow && (\n                           <div className=\"vRuler vRulerW\" style={{left: rR}} />\n                       )}\n                       {this.props.app.isDebugShow && (\n                           <div className=\"hRuler hRulerY\" style={{top: rT}} />\n                       )}\n                       {this.props.app.isDebugShow && (\n                           <div className=\"hRuler hRulerH\" style={{top: rB}} />\n                       )}\n\n                       <div className=\"app-main-editor-Printable-margins\" style={{top:-2, left:0, width:\"100%\", height:1}}/>\n                       <div className=\"app-main-editor-Printable-margins\" style={{top:0, right:1, width:1, height:\"100%\"}}/>\n                       <div className=\"app-main-editor-Printable-margins\" style={{bottom:-1, left:0, width:\"100%\", height:1}}/>\n                       <div className=\"app-main-editor-Printable-margins\" style={{top:0, left:-1, width:1, height:\"100%\"}}/>\n\n                   </div>\n                   <div className=\"app-main-editor-Printable-mask _r\" style={maskLRStyle} />\n                   <div className=\"app-main-editor-Printable-mask _b\" style={maskTBStyle} />\n\n\n               </div>\n               <div className=\"app-main-editor-Printable-mask _r\" style={{width:'1rem'}} />\n               <div className=\"app-main-editor-Printable-mask _b\" style={{height:'1rem'}} />\n\n           </div>\n\n\n\n        );\n    }\n}\n\n","import React from \"react\";\nimport Slider from \"@material-ui/lab/Slider\";\nimport Icon from \"@material-ui/core/Icon\";\nimport ImageEditorZoomCanvas from \"./ImageEditorZoomCanvas\"\nimport * as tools from \"../../tools\";\nimport Fab from \"@material-ui/core/Fab\";\nimport Paper from \"@material-ui/core/Paper\";\n\nexport default class ImageEditorZoom extends React.Component {\n    // constructor(props) {\n    //     super(props);\n    //     this.updateCanvasTimer = null;\n    //\n    //     this.state = {\n    //         needUpdateCanvas: false,\n    //     }\n    // }\n\n\n    sliderZoom = (event, value)=>{\n        const state = this.props.app;\n        const image = state.images[state.currentImage];\n\n        let imageZoom = value / 100;\n\n        let imgWidth = tools.dpi_inch2dots(image.width, image.format.dpi)*imageZoom*image.editorState.ratio;\n        let imgHeight = tools.dpi_inch2dots(image.height, image.format.dpi)*imageZoom*image.editorState.ratio;\n\n        let L = (image.editorState.imgWidth - imgWidth)/2;\n        let T = (image.editorState.imgHeight - imgHeight)/2;\n\n        // state.needUpdateCanvas = true;\n        // state.images[state.currentImage].editorState.imageZoom = imageZoom;\n        // state.images[state.currentImage].editorState.sliderPositionTB = image.sliderPositionTB + T;\n        // state.images[state.currentImage].editorState.sliderPositionLR = image.sliderPositionLR + L;\n        // state.images[state.currentImage].editorState.imgWidth = imgWidth;\n        // state.images[state.currentImage].editorState.imgHeight = imgHeight;\n        // this.props.saveAppState( state );\n\n        let newState = {\n            imageZoom: imageZoom,\n            sliderPositionTB: image.editorState.sliderPositionTB + T,\n            sliderPositionLR: image.editorState.sliderPositionLR + L,\n            imgWidth: imgWidth,\n            imgHeight: imgHeight,\n            needUpdateCanvas: true,\n        };\n\n        this.props.appImageChanged( this.props.app.currentImage, newState);\n\n    };\n\n    sliderChangeTB = (event, value)=>{this.props.appImageChanged( this.props.app.currentImage, { sliderPositionTB: value, }) };\n\n    sliderChangeLR = (event, value)=>{this.props.appImageChanged( this.props.app.currentImage, { sliderPositionLR: value, }) };\n\n    imageRotate = ()=> {\n        let imageRotate = 0;\n        switch (this.props.app.images[this.props.app.currentImage].editorState.imageRotate) {\n            case 90:\n                imageRotate = 180;\n                break;\n            case 180:\n                imageRotate = 270;\n                break;\n            case 270:\n                imageRotate = 0;\n                break;\n            default:\n                imageRotate = 90;\n                break;\n        }\n        this.props.appImageChanged( this.props.app.currentImage, { imageRotate: imageRotate });\n    };\n\n    render() {\n        // console.log('render ImageEditorZoom, imgWidth:', this.props.parentState.imgWidth);\n        const image = this.props.app.images[this.props.app.currentImage];\n\n        return (\n\n            <Paper className=\"canvas_wrapper p-2 app-bg-e\">\n                <div className=\"canvas_container\">\n                    <div className=\"canvas\">\n                        <div className=\"img_container\">\n                            <ImageEditorZoomCanvas\n                                {...this.props}\n                            />\n                        </div>\n                        <div className=\"slider _v _left\">\n                            <div className=\"slider-button-wrapper text-center\">\n                                <Fab color=\"primary\" className={'_fabmini'}\n                                     onClick={()=>{this.sliderZoom(null, image.editorState.imageZoom*100+0.51)}}\n                                     disabled={false}\n                                     aria-label=\"Colors\">\n                                    <Icon>zoom_in</Icon>\n                                </Fab>\n                            </div>\n                            <div className=\"slider-body-wrapper position-relative\">\n\n                                <Slider className='app-slider-for-zoom'\n                                        classes={{thumb: '_thumb'}}\n                                        thumb={<Icon className={'app-slider-thumb-icon'} color='primary'>zoom_in</Icon>}\n                                        vertical\n                                        max={image.editorState.imageZoomMax*100}\n                                        min={image.editorState.imageZoomMin*100}\n                                        value={image.editorState.imageZoom*100}\n                                        onChange={this.sliderZoom} />\n                                {this.props.app.isDebugShow && (\n                                    <div className={'_value'}><small>{image.editorState.imageZoom}</small></div>\n                                )}\n\n                            </div>\n                            <div className=\"slider-button-wrapper text-center\">\n                                <Fab color=\"primary\" className={'_fabmini'}\n                                     onClick={()=>{this.sliderZoom(null, image.editorState.imageZoom*100-0.51)}}\n                                     disabled={false}\n                                     aria-label=\"Colors\">\n                                    <Icon>zoom_out</Icon>\n                                </Fab>\n                            </div>\n\n                        </div>\n                        <div className=\"slider _v _right\">\n                            <div className=\"slider-button-wrapper text-center\">\n                                <Fab color=\"primary\" className={'_fabmini'}\n                                     onClick={()=>{this.sliderChangeTB(null, image.editorState.sliderPositionTB-1)}}\n                                     disabled={false}\n                                     aria-label=\"Colors\">\n                                    <Icon>expand_less</Icon>\n                                </Fab>\n                            </div>\n                            <div className=\"slider-body-wrapper position-relative\">\n                                <Slider className='app-slider-for-position'\n                                        classes={{trackAfter: '_trackAfter', thumb: '_thumb'}}\n                                        thumb={<Icon className={'app-slider-thumb-icon'} color='primary'>image</Icon>}\n                                        max={(image.editorState.imgHeight)*-0.9}\n                                        value={image.editorState.sliderPositionTB}\n                                        min={(this.props.app.editorHeight-image.editorState.maskTB*2)*0.9}\n                                        onChange={this.sliderChangeTB}\n                                        vertical\n                                />\n                                {this.props.app.isDebugShow && (\n                                    <div className={'_value'}><small>({image.editorState.sliderPositionTB})</small></div>\n                                )}\n                            </div>\n                            <div className=\"slider-button-wrapper text-center\">\n                                <Fab color=\"primary\" className={'_fabmini'}\n                                     onClick={()=>{this.sliderChangeTB(null, image.editorState.sliderPositionTB+1)}}\n                                     disabled={false}\n                                     aria-label=\"Colors\">\n                                    <Icon>expand_more</Icon>\n                                </Fab>\n                            </div>\n\n                        </div>\n                        <div className=\"slider _h _bottom\">\n                            <div className=\"slider-button-wrapper text-center\">\n                                <Fab color=\"primary\" className=\"_fabmini\"\n                                     onClick={()=>{this.sliderChangeLR(null, image.editorState.sliderPositionLR-1)}}\n                                     disabled={false}\n                                     aria-label=\"Colors\">\n                                    <Icon>navigate_before</Icon>\n                                </Fab>\n                            </div>\n                            <div className=\"slider-body-wrapper position-relative\">\n                                <Slider className='app-slider-for-position'\n                                        classes={{trackAfter: '_trackAfter', thumb: '_thumb'}}\n                                        thumb={<Icon className={'app-slider-thumb-icon'} color='primary'>image</Icon>}\n                                        max={(this.props.app.editorWidth-image.editorState.maskLR*2)*0.9}\n                                        value={image.editorState.sliderPositionLR}\n                                        min={(image.editorState.imgWidth)*-0.9}\n                                        onChange={this.sliderChangeLR}\n                                />\n\n                                {this.props.app.isDebugShow && (\n                                    <div className={'_value'}><small>({image.editorState.sliderPositionLR})</small></div>\n                                )}\n                            </div>\n\n                            <div className=\"slider-button-wrapper text-center\" >\n                                <Fab color=\"primary\" className={'_fabmini'}\n                                     onClick={()=>{this.sliderChangeLR(null, image.editorState.sliderPositionLR+1)}}\n                                     disabled={false}\n                                     aria-label=\"Colors\">\n                                    <Icon>navigate_next</Icon>\n                                </Fab>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n                <div className=\"canvas_actions\">\n                    <div className=\"app-main-editor-visual-right-buttons\">\n                        <div className=\"zoom-positioning\">\n                            <div className=\"zoom-positioning-w1 zoom-positioning-h1  d-inline-block\"/>\n                            <div className=\"zoom-positioning-w2 zoom-positioning-h1 d-inline-block\">\n                                <button type=\"button\"\n                                        className={\"btn btn-primary h-100\"}\n                                        onClick={()=>{this.props.alignTop()}}>\n                                    <Icon>vertical_align_top</Icon>\n                                </button>\n                            </div>\n                            <div className=\"zoom-positioning-w1 zoom-positioning-h1 d-inline-block\"/>\n                        </div>\n                        <div className=\"zoom-positioning\">\n                            <div className=\"zoom-positioning-w1 zoom-positioning-h2 d-inline-block\">\n                                <button type=\"button\"\n                                        className={\"btn btn-primary h-100\"}\n                                        onClick={()=>{this.props.alignLeft()}}>\n                                    <Icon style={{transform:'rotate(270deg)'}}>vertical_align_top</Icon>\n                                </button>\n                            </div>\n                            <div className=\"d-inline-block\">\n                                <div className=\"zoom-positioning-w2 zoom-positioning-h1\">\n                                    <button type=\"button\"\n                                            className={\"btn btn-primary h-100\"}\n                                            onClick={()=>{this.props.alignLandscape(this.props.app.currentImage, image.format)}}>\n                                        <Icon>swap_horiz</Icon>\n                                    </button>\n                                </div>\n                                <div className=\"zoom-positioning-w2 zoom-positioning-h1\">\n                                    <button type=\"button\"\n                                            className={\"btn btn-primary h-100\"}\n                                            onClick={()=>{this.props.alignPortrait(this.props.app.currentImage, image.format)}}>\n                                        <Icon>swap_vert</Icon>\n                                    </button>\n                                </div>\n                            </div>\n                            <div className=\"zoom-positioning-w1 zoom-positioning-h2 d-inline-block\">\n                                <button type=\"button\"\n                                        className={\"btn btn-primary h-100\"}\n                                        onClick={()=>{this.props.alignRight()}}>\n                                    <Icon style={{transform:'rotate(90deg)'}}>vertical_align_top</Icon>\n                                </button>\n                            </div>\n                        </div>\n                        <div className=\"zoom-positioning\">\n                            <div className=\"zoom-positioning-w1 zoom-positioning-h1 d-inline-block\"/>\n                            <div className=\"zoom-positioning-w2 zoom-positioning-h1 d-inline-block\">\n                                <button type=\"button\"\n                                        className={\"btn btn-primary h-100\"}\n                                        onClick={()=>{this.props.alignBottom()}}>\n                                    <Icon style={{transform:'rotate(180deg)'}}>vertical_align_top</Icon>\n                                </button>\n                            </div>\n                            <div className=\"zoom-positioning-w1 zoom-positioning-h1 d-inline-block\"/>\n                        </div>\n                        <div className=\"app-main-editor-visual-rotate-buttons mt-4 text-center\">\n                            <button type=\"button\"\n                                    className={\"btn  btn-medium btn-primary mr-4\"}\n                                    onClick={this.imageRotate}>\n                                <Icon>rotate_right</Icon>\n                            </button>\n                            <button type=\"button\"\n                                    className={\"btn  btn-medium btn-primary\"}\n                                    onClick={()=>this.props.appFormatRotate()}>\n                                <Icon>crop_rotate</Icon>\n                            </button>\n                        </div>\n\n\n                    </div>\n\n                </div>\n\n\n            </Paper>\n\n        )\n    }\n}\n","import React from \"react\";\nimport * as tools from \"../../tools\";\n\nexport default class ImageEditorColorCanvas extends React.Component {\n    constructor(props) {\n        super(props);\n        this.canvasImg = new Image();\n        this.canvasImg.crossOrigin = 'anonymous';\n        const _upd = this.updateCanvas.bind(this);\n        this.canvasImg.onload = function() {\n            _upd();\n        };\n\n\n\n        this.state = {\n            imgSrc: null,\n            fakeThins: true,\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n\n        // console.log('componentDidUpdate');\n\n        if(this.props.app.currentImage!==prevProps.app.currentImage) {\n            console.log('new image clicked');\n            this.setState({\n                imgSrc: null,\n            });\n            return;\n        }\n\n        this.props.appEditorChanged(this.myImgContainer.clientWidth, this.myImgContainer.clientHeight);\n\n        const image = this.props.app.images[this.props.app.currentImage];\n        if(!image.editorState.initedMask) {\n            this.props.appImageInitMask(this.props.app.currentImage);\n            return;\n        }\n\n        if(!image.editorState.initedImagePosition) {\n            this.props.alignInit(this.props.app.currentImage);\n            return;\n        }\n\n        let img_src = tools.makeGetUri()+encodeURI(image.src);\n        if(this.canvasImg.src!==img_src) {\n            const _upd = this.updateCanvas.bind(this);\n            this.canvasImg.onload = function() {\n                _upd();\n            };\n            this.canvasImg.src=img_src;\n            return;\n        }\n\n        // if(image.editorState.needUpdateCanvas) {\n        this.updateCanvas();\n        // }\n\n\n    }\n\n    updateCanvas() {\n\n        // console.log('Zoom updateCanvas');\n        if(!this.myCanvas || this.myCanvas.clientWidth===0 || this.myCanvas.clientHeight===0) return;\n\n        const ctx = this.myCanvas.getContext('2d');\n        let canvasX = this.myCanvas.clientWidth;\n        let canvasY = this.myCanvas.clientHeight;\n        // console.log('drawImage', this.canvasImg.src, canvasX, canvasY);\n\n        const editorState = this.props.app.images[this.props.app.currentImage].editorState;\n        try {\n            ctx.drawImage(this.canvasImg, 0, 0, canvasX, canvasY);\n            let pixelArray = ctx.getImageData(0,0, canvasX, canvasY);\n\n            if(editorState.brightness!==1 || editorState.contrast!==1 || editorState.colorR!==1 || editorState.colorG!==1 || editorState.colorB!==1 ) {\n                pixelArray = tools.ColorCorrection(pixelArray, editorState.brightness, editorState.contrast, editorState.colorR, editorState.colorG, editorState.colorB);\n            }\n            if(editorState.sepia) {\n                pixelArray = tools.ColorSepia(pixelArray, 1);\n            }\n            if(editorState.saturate!==1) {\n                pixelArray = tools.saturate(pixelArray, editorState.saturate);\n            }\n            ctx.putImageData(pixelArray, 0, 0);\n\n            // this.setState({\n            //     imgSrc: this.myCanvas.toDataURL('image/jpeg', 0.7),\n            // });\n            // this.props.appImageChanged( this.props.app.currentImage,{needUpdateCanvas: false})\n\n        } catch (e) {\n            console.log('drawImage failed');\n        }\n\n    }\n\n    render() {\n\n        // console.log('ColorCanvas render');\n        const newImage = this.renderedImageIndex !== this.props.app.currentImage;\n        this.renderedImageIndex = this.props.app.currentImage;\n\n        const image = this.props.app.images[this.props.app.currentImage];\n        if(newImage) {\n            let img_src = tools.makeGetUri()+encodeURI(image.src);\n            if(this.canvasImg.src!==img_src) {\n                this.canvasImg.src=img_src;\n            }\n        }\n\n\n        // console.log('render ImageEditorZoomCanvas ');\n        let maskTBStyle = {\n            height: image.editorState.maskTB,\n        };\n        let viewportStyles = {\n            height: this.props.app.editorHeight - image.editorState.maskTB*2,\n            width: this.props.app.editorWidth - image.editorState.maskLR*2,\n            top: image.editorState.maskTB,\n            left: image.editorState.maskLR,\n        };\n        let maskLRStyle = {\n            width: image.editorState.maskLR,\n        };\n\n        let canvasWidth = Math.ceil(image.editorState.imgWidth);\n        let canvasHeight = Math.ceil(image.editorState.imgHeight);\n        let canvasStyle = {\n            top: image.editorState.sliderPositionTB,\n            left: image.editorState.sliderPositionLR,\n            transform: 'rotate('+image.editorState.imageRotate+'deg)',\n        };\n\n        return (\n            <div className=\"app-main-editor-Printable-Mask border-light fld3d\">\n                <div className=\"app-main-editor-Printable-mask _t\" style={{height:'1rem'}} />\n                <div className=\"app-main-editor-Printable-mask _l\" style={{width:'1rem'}} />\n\n                <div ref={(node)=>{this.myImgContainer=node}} className='app-main-editor-Printable' >\n\n                    <div className=\"app-main-editor-Printable-mask _t\" style={maskTBStyle} />\n                    <div className=\"app-main-editor-Printable-mask _l\" style={maskLRStyle} />\n\n                    <div className=\"app-main-editor-Printable-viewport\"\n                         style={viewportStyles}>\n                        <canvas\n                            className=\"app-main-editor-Printable-img\"\n                            ref={(node)=>{this.myCanvas=node}}\n                            width={ canvasWidth }\n                            height={ canvasHeight}\n                            style={ canvasStyle }\n                        />\n\n\n\n                    </div>\n                    <div className=\"app-main-editor-Printable-mask _r\" style={maskLRStyle} />\n                    <div className=\"app-main-editor-Printable-mask _b\" style={maskTBStyle} />\n\n\n                </div>\n\n                <div className=\"app-main-editor-Printable-mask _r\" style={{width:'1rem'}} />\n                <div className=\"app-main-editor-Printable-mask _b\" style={{height:'1rem'}} />\n\n            </div>\n\n\n        );\n    }\n}\n\n","import React from \"react\";\nimport Icon from \"@material-ui/core/Icon\";\nimport Slider from \"@material-ui/lab/Slider\";\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\nimport ImageEditorColorCanvas from \"./ImageEditorColorCanvas\";\nimport Paper from \"@material-ui/core/Paper\";\n// import {THEME} from \"../../tools\";\n\n\nexport default class ImageEditorBrightness extends React.Component {\n\n    sliderChangeBrightness =  (event, value)=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, brightness: value} );\n        // this.props.setStateFromChild({ brightness: value, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderChangeContrast =  (event, value)=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, contrast: value} );\n        // this.props.setStateFromChild({ contrast: value, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderChangeSaturate =  (event, value)=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, saturate: value} );\n        // this.props.setStateFromChild({ saturate: value, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderResetBrightness =  ()=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, brightness: 1} );\n        // this.props.setStateFromChild({ brightness: 1, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderResetContrast =  ()=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, contrast: 1} );\n        // this.props.setStateFromChild({ contrast: 1, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderResetSaturate =  ()=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, saturate: 1} );\n        // this.props.setStateFromChild({ saturate: 1, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderChangeSepia = () => {\n        this.props.appImageChanged(this.props.app.currentImage, {\n            sepia: !this.props.app.images[this.props.app.currentImage].editorState.sepia,\n            colorR: 1,\n            colorG: 1,\n            colorB: 1,\n            needUpdateCanvas: true,\n        } );\n        // this.props.setStateFromChild({\n        //     sepia: !this.props.parentState.sepia,\n        //     colorR: 1,\n        //     colorG: 1,\n        //     colorB: 1,\n        //     needUpdateCanvas: true,\n        // }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n\n\n    render() {\n\n        const image = this.props.app.images[this.props.app.currentImage];\n\n        return (\n            <Paper className=\"canvas_wrapper p-2 app-bg-e\">\n                <div className=\"canvas_container\">\n                    <div className=\"canvas\">\n                        <div className=\"img_container\">\n                            <ImageEditorColorCanvas\n                                {...this.props}\n                            />\n                        </div>\n                    </div>\n                </div>\n                <div className=\"canvas_actions\">\n                    <div className=\"app-main-editor-visual-right-colors h-50\">\n                        <div className=\"h-75 d-flex flex-row\">\n                            <div className=\"vert-slider-wrapper h-100 position-relative d-inline-flex\">\n                                <Icon className={'_reset'} color='primary' onClick={this.sliderResetBrightness}>brightness_medium</Icon>\n                                <Slider className='app-slider-for-filter'\n                                        max={2}\n                                        value={image.editorState.brightness}\n                                        min={0}\n                                        onChange={this.sliderChangeBrightness}\n                                        vertical\n                                />\n                                {this.props.app.isDebugShow && (\n                                    <div className={'_value'}><small>({image.editorState.brightness})</small></div>\n                                )}\n                            </div>\n                            <div className=\"vert-slider-wrapper h-100 position-relative d-inline-flex\">\n                                <Icon className={'_reset'} color='primary' onClick={this.sliderResetContrast}>tonality</Icon>\n                                <Slider className='app-slider-for-filter'\n                                        max={2}\n                                        value={image.editorState.contrast}\n                                        min={0}\n                                        onChange={this.sliderChangeContrast}\n                                        vertical\n                                />\n                                {this.props.app.isDebugShow && (\n                                    <div className={'_value'}><small>({image.editorState.contrast})</small></div>\n                                )}\n                            </div>\n                            <div className=\"vert-slider-wrapper h-100 position-relative d-inline-flex\">\n                                <Icon className={'_reset'} color='primary' onClick={this.sliderResetSaturate}>color_lens</Icon>\n                                <Slider className='app-slider-for-filter'\n                                        max={2}\n                                        value={image.editorState.saturate}\n                                        min={0}\n                                        onChange={this.sliderChangeSaturate}\n                                        vertical\n                                />\n                                {this.props.app.isDebugShow && (\n                                    <div className={'_value'}><small>({image.editorState.saturate})</small></div>\n                                )}\n                            </div>\n\n\n                        </div>\n                        <div className=\"h-25\">\n                            <div className=\"hori-slider-wrapper w-100 position-relative d-inline-flex\">\n                                <FormControlLabel\n                                    control={\n                                        <Switch\n                                            checked={image.editorState.sepia}\n                                            onChange={this.sliderChangeSepia}\n                                            value=\"true\"\n                                            color=\"primary\"\n                                        />\n                                    }\n                                    label=\"Sepia\"\n                                />\n                            </div>\n\n                        </div>\n\n\n                    </div>\n\n\n                </div>\n\n\n            </Paper>\n\n\n        )\n\n    }\n}\n\n","import React from \"react\";\nimport {THEME} from \"../../tools\";\nimport Slider from \"@material-ui/lab/Slider\";\nimport ImageEditorColorCanvas from \"./ImageEditorColorCanvas\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Switch from \"@material-ui/core/Switch\";\nimport Paper from \"@material-ui/core/Paper\";\n// import ImageEditorZoomCanvas from \"./ImageEditorZoomCanvas\";\n// import Fab from \"@material-ui/core/Fab\";\n// import Icon from \"@material-ui/core/Icon\";\n\nexport default class ImageEditorBrightness extends React.Component {\n\n    sliderChangeColorR =  (event, value)=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, colorR: value} );\n\n        // this.props.setStateFromChild({ colorR: value, needUpdateCanvas: true }, ()=>{\n        //         this.props.setStateFromChild({needUpdateCanvas: false});\n        //     })\n    };\n    sliderChangeColorG =  (event, value)=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, colorG: value} );\n        // this.props.setStateFromChild({ colorG: value, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderChangeColorB =  (event, value)=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, colorB: value} );\n        // this.props.setStateFromChild({ colorB: value, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n\n    sliderResetColorR =  ()=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, colorR: 1} );\n        // this.props.setStateFromChild({ colorR: 1, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderResetColorG =  ()=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, colorG: 1} );\n        // this.props.setStateFromChild({ colorG: 1, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderResetColorB =  ()=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, colorB: 1} );\n        // this.props.setStateFromChild({ colorB: 1, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderChangeSepia = () => {\n        this.props.appImageChanged(this.props.app.currentImage, {\n            sepia: !this.props.app.images[this.props.app.currentImage].editorState.sepia,\n            colorR: 1,\n            colorG: 1,\n            colorB: 1,\n            needUpdateCanvas: true,\n        });\n        // this.props.setStateFromChild({\n        //     sepia: !this.props.parentState.sepia,\n        //     colorR: 1,\n        //     colorG: 1,\n        //     colorB: 1,\n        //     needUpdateCanvas: true,\n        // }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n\n\n\n    render() {\n\n        const image = this.props.app.images[this.props.app.currentImage];\n\n        return (\n            <Paper className=\"canvas_wrapper p-2 app-bg-e\">\n                <div className=\"canvas_container\">\n                    <div className=\"canvas\">\n                        <div className=\"img_container\">\n                            <ImageEditorColorCanvas\n                                {...this.props}\n                            />\n                        </div>\n                    </div>\n                </div>\n                <div className=\"canvas_actions\">\n                    <div className=\"app-main-editor-visual-right-colors h-50\">\n                        <div className=\"h-75 d-flex flex-row\">\n\n                            <div className=\"vert-slider-wrapper h-100 position-relative d-inline-flex\">\n                                <div className=\"_reset app-slider-icon\"\n                                     style={{backgroundColor: THEME.palette.primary.main, color:THEME.palette.primary.contrastText }}\n                                     onClick={this.sliderResetColorR}>R</div>\n                                <Slider className='app-slider-for-filter'\n                                        classes={{track: '_trackR', thumb: '_thumbR'}}\n                                        step={0.05}\n                                        max={2}\n                                        value={image.editorState.colorR}\n                                        min={0}\n                                        onChange={this.sliderChangeColorR}\n                                        disabled={image.editorState.sepia}\n                                        vertical\n                                />\n                                {this.props.app.isDebugShow && (\n                                    <div className={'_value'}><small>({image.editorState.colorR})</small></div>\n                                )}\n                            </div>\n\n                            <div className=\"vert-slider-wrapper h-100 position-relative d-inline-flex\">\n                                <div className=\"_reset app-slider-icon\"\n                                     style={{backgroundColor: THEME.palette.primary.main, color:THEME.palette.primary.contrastText }}\n                                     onClick={this.sliderResetColorG}>G</div>\n                                <Slider className='app-slider-for-filter'\n                                        classes={{track: '_trackG', thumb: '_thumbG'}}\n                                        step={0.05}\n                                        max={2}\n                                        value={image.editorState.colorG}\n                                        min={0}\n                                        onChange={this.sliderChangeColorG}\n                                        disabled={image.editorState.sepia}\n                                        vertical\n                                />\n                                {this.props.app.isDebugShow && (\n                                    <div className={'_value'}><small>({image.editorState.colorG})</small></div>\n                                )}\n                            </div>\n\n                            <div className=\"vert-slider-wrapper h-100 position-relative d-inline-flex\">\n                                <div className=\"_reset app-slider-icon\"\n                                     style={{backgroundColor: THEME.palette.primary.main, color:THEME.palette.primary.contrastText }}\n                                     onClick={this.sliderResetColorB}>B</div>\n                                <Slider className='app-slider-for-filter'\n                                        classes={{track: '_trackB', thumb: '_thumbB'}}\n                                        step={0.05}\n                                        max={2}\n                                        value={image.editorState.colorB}\n                                        min={0}\n                                        onChange={this.sliderChangeColorB}\n                                        disabled={image.editorState.sepia}\n                                        vertical\n                                />\n                                {this.props.app.isDebugShow && (\n                                    <div className={'_value'}><small>({image.editorState.colorB})</small></div>\n                                )}\n                            </div>\n                        </div>\n                        <div className=\"h-25\">\n                            <div className=\"hori-slider-wrapper w-100 position-relative d-inline-flex\">\n                                <FormControlLabel\n                                    control={\n                                        <Switch\n                                            checked={image.editorState.sepia}\n                                            onChange={this.sliderChangeSepia}\n                                            value=\"true\"\n                                            color=\"primary\"\n                                        />\n                                    }\n                                    label=\"Sepia\"\n                                />\n                            </div>\n\n                        </div>\n\n\n                    </div>\n\n\n                </div>\n\n\n            </Paper>\n\n        )\n\n    }\n}\n\n","import React from \"react\";\nimport * as tools from \"../../tools\";\nimport Icon from \"@material-ui/core/Icon\";\nimport Fab from '@material-ui/core/Fab';\nimport ImageEditorZoom from \"./ImageEditorZoom\";\nimport ImageEditorBrightness from \"./ImageEditorBrightness\";\nimport ImageEditorColor from \"./ImageEditorColor\";\n\nexport default class ImageEditor extends React.Component {\n    state = {\n        showTabButton: true,\n    };\n\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if(!this.props.app.images[this.props.app.currentImage].editorState.initedMask) {\n            this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas:true, currentTab:0} );\n        }\n    }\n\n    tabChange = (value) => {\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas:true, currentTab:value} );\n    };\n\n    // setStateFromChild=(newState, callback)=> {\n    //     // console.log(newState);\n    //     this.setState(newState, ()=>{\n    //         if(typeof(callback)==='function') callback();\n    //     });\n    // };\n\n\n    alignTop = ()=> {\n        let image = this.props.app.images[this.props.app.currentImage];\n        // if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) return;\n        let sliderPositionTB = 0;\n        if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) {\n            sliderPositionTB = (image.editorState.imgWidth-image.editorState.imgHeight)/2;\n        }\n        this.props.appImageChanged( this.props.app.currentImage, {sliderPositionTB:sliderPositionTB} );\n    };\n\n    alignRight = ()=> {\n        let image = this.props.app.images[this.props.app.currentImage];\n        // if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) return;\n\n        let imgWidth = tools.dpi_inch2dots(image.width, image.format.dpi)*image.editorState.imageZoom*image.editorState.ratio;\n        let sliderPositionLR = this.props.app.editorWidth - image.editorState.maskLR*2 - imgWidth;\n\n        if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) {\n            sliderPositionLR += (image.editorState.imgWidth-image.editorState.imgHeight)/2;\n        }\n        this.props.appImageChanged( this.props.app.currentImage, {sliderPositionLR: sliderPositionLR} );\n\n    };\n\n    alignBottom = ()=> {\n        let image = this.props.app.images[this.props.app.currentImage];\n        // if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) return;\n        let imgHeight = tools.dpi_inch2dots(image.height, image.format.dpi)*image.editorState.imageZoom*image.editorState.ratio;\n        let sliderPositionTB =  this.props.app.editorHeight - image.editorState.maskTB*2 - imgHeight;\n        if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) {\n            sliderPositionTB -= (image.editorState.imgWidth-image.editorState.imgHeight)/2;\n        }\n\n        this.props.appImageChanged( this.props.app.currentImage, {sliderPositionTB:sliderPositionTB} );\n    };\n\n    alignLeft = ()=> {\n        let image = this.props.app.images[this.props.app.currentImage];\n        // if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) return;\n        let sliderPositionLR = 0;\n        if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) {\n            sliderPositionLR -= (image.editorState.imgWidth-image.editorState.imgHeight)/2;\n        }\n\n        this.props.appImageChanged( this.props.app.currentImage, {sliderPositionLR:sliderPositionLR} );\n    };\n\n    render() {\n\n        const image = this.props.app.images[this.props.app.currentImage];\n        let currentTab = image.editorState.currentTab;\n        if(currentTab<0 || currentTab>2) currentTab = 0;\n\n        return (\n            <div className=\"div-h-100 position-relative p-2\" ref={(node)=>{this.editorWrapper=node}}>\n\n                {currentTab===0 &&(\n                    <ImageEditorZoom\n                        {...this.props}\n                        alignTop = {this.alignTop.bind(this)}\n                        alignRight = {this.alignRight.bind(this)}\n                        alignBottom = {this.alignBottom.bind(this)}\n                        alignLeft = {this.alignLeft.bind(this)}\n                    />\n                )}\n                {currentTab===1 &&(\n                    <ImageEditorBrightness\n                        {...this.props}\n                    />\n                )}\n                {currentTab===2 &&(\n                    <ImageEditorColor\n                        {...this.props}\n                    />\n                )}\n\n\n\n                    <div onClick={ ()=>{this.setState({showTabButton: !this.state.showTabButton})} }\n                        className=\"app-btn-pie app-main-editor-tabs-pie bg-primary text-light \">\n                        <Icon>settings_brightness</Icon>\n                    </div>\n\n                    {this.state.showTabButton &&(\n                        <Fab color=\"primary\" className={'app-main-editor-tabs-pie-button position-absolute bg-success'}\n                             style={{right: '1em', bottom: '8em'}}\n                             onClick={()=>{this.tabChange(2)}}\n                             disabled={false}\n                             aria-label=\"Colors\">\n                            <Icon>tune</Icon>\n                        </Fab>\n\n                    )}\n\n                    {this.state.showTabButton &&(\n                        <Fab color=\"primary\" className={'app-main-editor-tabs-pie-button position-absolute bg-success'}\n                             style={{right: '5.5em', bottom: '5.5em' }}\n                             onClick={()=>{this.tabChange(1)}}\n                             disabled={false}\n                             aria-label=\"Brightness\"\n                             type=\"button\" >\n                            <Icon>brightness_medium</Icon>\n                        </Fab>\n                    )}\n\n                    {this.state.showTabButton &&(\n                        <Fab color=\"primary\" className={'app-main-editor-tabs-pie-button position-absolute bg-success'}\n                             style={{right: '8em', bottom: '1em' }}\n                             onClick={()=>{this.tabChange(0)}}\n                             disabled={false}\n                             aria-label=\"Zoom\">\n                            <Icon>transform</Icon>\n                        </Fab>\n                    )}\n\n                    {this.state.showTabButton &&(\n                        <Fab color=\"primary\" className={'app-main-editor-tabs-pie-button position-absolute bg-success'}\n                             style={{right: '1em', bottom: '18em' }}\n                             onClick={()=>{this.props.changeCountImage(this.props.app.currentImage, image.count+1)}}\n                             disabled={image.count>98}\n                             aria-label=\"Increase\">\n                            <Icon>add</Icon>\n                        </Fab>\n                    )}\n\n                    {this.state.showTabButton &&(\n                        <Fab color=\"primary\" className={'app-main-editor-tabs-pie-button position-absolute bg-success'}\n                             style={{right: '1em', bottom: '13em' }}\n                             onClick={()=>{this.props.changeCountImage(this.props.app.currentImage, image.count-1)}}\n                             disabled={image.count<0}\n                             aria-label=\"Decrease\">\n                            <Icon>remove</Icon>\n                        </Fab>\n                    )}\n\n\n\n\n\n\n\n            </div>\n\n        )\n    }\n}\n\n","import React from 'react';\n\nimport './index.css';\n\nimport t from \"../i18n\";\nimport * as tools from \"../../tools\";\n\n\nimport ImageThumb from \"./ImageThumb\"\nimport ImageEditor from \"./ImageEditor\"\n\nimport Paper from \"@material-ui/core/Paper\";\nimport Icon from \"@material-ui/core/Icon\";\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Fab from \"@material-ui/core/Fab\";\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\n\n\nexport default class PageEditor extends React.Component {\n    constructor(props) {\n        super(props);\n        this.undo = {\n            history:[],\n            current:null,\n            skipChanges: true,\n        };\n\n\n        this.state = {\n            confirmBack: false,\n            imagesCount: 0,\n            imagesSum: 0,\n        };\n    }\n\n    componentDidMount() {\n        // if(this.props.app.currentImage===null)\n            this.selectImage(0);\n        this.countSumm();\n    };\n\n    countSumm() {\n        let imagesCount = 0;\n        let imagesSum = 0;\n        let len=this.props.app.images.length;\n        for(let i=0; i<len; i++) {\n            imagesCount += this.props.app.images[i].count;\n            imagesSum += this.props.app.images[i].count * this.props.app.images[i].format.cost;\n        }\n        this.setState({imagesCount:imagesCount, imagesSum:imagesSum})\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        if(this.props.app.images[this.props.app.currentImage].editorState.initedImagePosition && this.props.app.images[this.props.app.currentImage].editorState.initedMask) {\n            let wasChanged = true;\n            if(this.undo.history.length>0) {\n                let lastUndo = this.undo.history[this.undo.history.length-1];\n                wasChanged = !(tools.deepCompare(lastUndo, this.props.app.images[this.props.app.currentImage].editorState));\n            }\n            // console.log('skipChanges:', this.undo.skipChanges, 'history.length', this.undo.history.length);\n            if(!this.undo.skipChanges || this.undo.history.length===0) {\n                // console.log('wasChanged:', wasChanged);\n                if(wasChanged) {\n                    if(this.undo.current!==null) {\n                        this.undo.history = this.undo.history.slice(0, this.undo.current-1);\n                        // console.log('this.undo.history.slice', 0, this.undo.current);\n                        // console.log('slice undo', this.undo);\n                    }\n                    this.undo.history.push( Object.assign({}, this.props.app.images[this.props.app.currentImage].editorState ) );\n                    let maxHistoryLength = 99;\n                    if(this.undo.history.length>maxHistoryLength) {\n                        let start = this.undo.history.length-maxHistoryLength;\n                        this.undo.history = this.undo.history.slice(start, start+maxHistoryLength);\n                    }\n                    this.undo.current =null;\n                    // console.log('add undo', this.undo);\n                }\n            }\n            this.undo.skipChanges = false;\n        }\n\n        return true;\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n\n        // if(!this.props.app.images[this.props.app.currentImage].editorState.initedMask) {\n\n\n        // if(!this.props.app.images[0].editorState.initedMask) {\n        //     this.selectImage(0);\n        //     return;\n        // }\n        this.props.savePages();\n\n\n    }\n\n    checkUndo = () => {\n        return !(this.undo.history.length===1 || this.undo.current===0);\n    };\n    clickUndo = () => {\n        if(!this.checkUndo) return false;\n        let currentUndo = this.undo.history.length-2;\n        if(this.undo.current>0) currentUndo = this.undo.current-1;\n        this.props.appImageChanged( this.props.app.currentImage, this.undo.history[currentUndo] );\n\n        this.undo.current = currentUndo;\n        this.undo.skipChanges = true;\n\n        // console.log('clickUndo', currentUndo);\n        // console.log('undo:', this.undo);\n\n    };\n\n    checkRedo = () => {\n        return !(this.undo.current===null || this.undo.current===this.undo.history.length-1);\n    };\n    clickRedo = () => {\n        if(!this.checkRedo) return false;\n        let currentUndo = this.undo.current+1;\n        this.props.appImageChanged( this.props.app.currentImage, this.undo.history[currentUndo] );\n\n        this.undo.current = currentUndo;\n        this.undo.skipChanges = true;\n\n        // console.log('clickRedo', currentUndo);\n        // console.log('undo:', this.undo);\n\n    };\n\n    selectImage = (index) => {\n        // console.log('selected '+index, this.props.app.currentImage);\n        if(index!==this.props.app.currentImage) {\n            this.undo = {\n                history:[],\n                current:null,\n                skipChanges: true,\n            };\n        }\n\n        this.props.appSetState({\n            currentImage : index,\n        });\n    };\n\n    changeCurrentImage = (step) => {\n        const newCurrent = this.props.app.currentImage+step;\n        if(newCurrent>=0 && newCurrent<this.props.app.images.length) {\n            this.selectImage(newCurrent);\n        }\n    };\n\n    changeCountImage = (index, count) => {\n        if(count>-1) {\n            let images = this.props.app.images;\n            images[index].count = count;\n            let state = {images : images};\n            if(count===0) {\n                this.changeCurrentImage(1);\n            }\n            this.props.appSetState(state, ()=>{this.countSumm()})\n        } else {\n            this.changeCurrentImage(1);\n            if(this.props.app.currentImage<this.props.app.images.length-1) {\n                this.props.appSetState({currentImage : this.props.app.currentImage+1});\n            }\n        }\n\n    };\n\n\n    scrollIntoViewIfNeed = (domNode) => {\n        domNode.scrollIntoViewIfNeeded();\n    };\n\n    backPressed() {\n        this.setState({confirmBack: true});\n\n    }\n    backConfirmed(back) {\n        if(back) {\n            this.props.onClickPrevBtn();\n        }\n        this.setState({confirmBack: false});\n    }\n\n    openFormatsPanel = () => {\n        this.setState({isFormatsOpen:!this.state.isFormatsOpen});\n    };\n\n    formatChange(index) {\n        let format = this.props.app.formats[index];\n        let currentImage = this.props.app.currentImage;\n        let images = this.props.app.images; //[this.props.app.currentImage];\n        images[currentImage].format = format;\n        images[currentImage].editorState.initedMask = false;\n        images[currentImage].editorState.initedImagePosition = false;\n\n        this.props.appSetState({images: images}, ()=>{\n            this.props.appImageInitMask(currentImage, true, ()=>{\n                this.props.alignInit(currentImage, ()=>{this.countSumm()});\n            });\n        });\n\n        // appSetState\n        this.setState({isFormatsOpen:false});\n    }\n\n    repeatColors =() => {\n        let colors = this.getColorsToRepeat();\n        if(colors)\n            this.props.appImageChanged( this.props.app.currentImage, colors );\n    };\n\n    getColorsToRepeat = () => {\n        if(this.props.app.currentImage===null || this.props.app.currentImage===0) return false;\n        let editorState = this.props.app.images[this.props.app.currentImage-1].editorState;\n        let current =  this.props.app.images[this.props.app.currentImage].editorState;\n        let hasChange = false;\n        if(editorState.brightness!==current.brightness) hasChange = true;\n        if(editorState.contrast!==current.contrast) hasChange = true;\n        if(editorState.saturate!==current.saturate) hasChange = true;\n        if(editorState.colorR!==current.colorR) hasChange = true;\n        if(editorState.colorG!==current.colorG) hasChange = true;\n        if(editorState.colorB!==current.colorB) hasChange = true;\n\n        if(!hasChange) return false;\n        return {\n            brightness: editorState.brightness,\n            contrast: editorState.contrast,\n            saturate: editorState.saturate,\n            colorR: editorState.colorR,\n            colorG: editorState.colorG,\n            colorB: editorState.colorB,\n        }\n    };\n\n    render() {\n\n        let image = this.props.app.images[this.props.app.currentImage];\n        let format = image ? image.format : {};\n        // let format_lanscape = (format.width-format.height)>1;\n\n        let formatsList = this.state.isFormatsOpen ? (\n            <ClickAwayListener onClickAway={()=>{this.openFormatsPanel()}}>\n                <Paper className=\"app-main-change-formats scrollbar position-absolute\">\n                    <table className=\"table-formats\">\n                        {this.props.app.formats.map( (format, index)=>format.enabled ?\n                            <tbody key={index} onClick={()=>this.formatChange(index)}>\n                            <tr>\n                                <th scope=\"row\">{format.name}</th>\n                                <th scope=\"row\">{format.height}\"x {format.width}\"</th>\n                                <th scope=\"row\">{Math.round(format.height*25.4)}x{Math.round(format.width*25.4)}</th>\n                                <th scope=\"row\">{t(format.surface)}</th>\n                                <th scope=\"row\">{tools.Round(format.cost)}</th>\n                            </tr>\n                            </tbody>\n\n                            : '' )}\n                    </table>\n                </Paper>\n            </ClickAwayListener>\n        ) : null;\n\n        let rightwidget = (\n            <div className=\"app-main-rightwidget h-100 p-2 d-inline-block\">\n                <Paper className=\"h-100 p-2 app-bg-e position-relative\">\n                    <div className=\"_fabwrapper\">\n                        <button className={\"btn btn-big btn-primary\"}\n                                onClick={() => this.props.onClickNextBtn()}\n                                disabled={false}\n                                title={t('Next')}\n                                type=\"button\" >\n                            <Icon>arrow_forward</Icon> {t('Next')}\n                        </button>\n                    </div>\n\n                    <div className=\"_fabwrapper\">\n                        <button className={\"btn btn-big btn-primary\"}\n                                onClick={this.backPressed.bind(this)}\n                                disabled={false}\n                                title={t('Previous')}\n                                type=\"button\" >\n                            <Icon>arrow_back</Icon> {t('Previous')}\n                        </button>\n                    </div>\n\n                    <div className=\"_fabwrapper\">\n                        <button className=\"btn btn-light mr-2\"\n                                onClick={this.repeatColors.bind(this)}\n                                disabled={!this.getColorsToRepeat()}\n                                title={t('repeat color settings')}\n                                type=\"button\" >\n                            <Icon>compare</Icon>\n                        </button>\n\n                        <button className=\"btn btn-light mr-2\"\n                                onClick={this.clickUndo.bind(this)}\n                                disabled={!this.checkUndo()}\n                                title={t('Undo')}\n                                type=\"button\" >\n                            <Icon>undo</Icon>\n                        </button>\n\n                        <button className=\"btn btn-light mr-2\"\n                                onClick={this.clickRedo.bind(this)}\n                                disabled={!this.checkRedo()}\n                                title={t('Redo')}\n                                type=\"button\" >\n                            <Icon>redo</Icon>\n                        </button>\n                    </div>\n\n                    <div className=\"app-main-rightwidget-tablewrp\">\n\n                        {formatsList}\n\n                        <Fab color=\"primary\" className=\"app-main-change-formats-button position-absolute text-primary bg-light\"\n                             style={{right: '0', bottom: '100%' }}\n                             onClick={()=>{this.openFormatsPanel()}}\n                             aria-label=\"Colors\">\n                            <Icon>menu</Icon>\n                        </Fab>\n\n                        <table className=\"table\">\n                            <tbody>\n\n                            <tr>\n                                <th scope=\"row\" colSpan={2}>\n                                    {t('Format')} {format.name}\n                                </th>\n                            </tr>\n                            <tr>\n                                <th scope=\"row\" colSpan={2}>\n                                    {format.height}\"x {format.width}\" {Math.round(format.height*25.4)}x{Math.round(format.width*25.4)}\n                                </th>\n                            </tr>\n\n                            <tr>\n                                <th scope=\"row\">{t('Files')}</th>\n                                <th scope=\"row\">{this.props.app.images.length} / {this.state.imagesCount}</th>\n                            </tr>\n                            <tr>\n                                <th scope=\"row\">{t('Cost')}</th>\n                                <th scope=\"row\">{tools.Round(this.state.imagesSum)}</th>\n                            </tr>\n                            </tbody>\n                        </table>\n\n                    </div>\n\n                </Paper>\n\n            </div>\n        );\n        let dialogConfirmBack = (\n            <Dialog\n                open={this.state.confirmBack}\n                onClose={()=>this.backConfirmed(false)}\n                aria-labelledby=\"alert-dialog-title\"\n                aria-describedby=\"alert-dialog-description\"\n            >\n                <DialogTitle id=\"alert-dialog-title\">{t(\"Warning\")}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText id=\"alert-dialog-description\">\n                        {t('Current state of editor images will be lost.')} {t('Are you sure?')}\n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <button onClick={()=>this.backConfirmed(true)} className={\"btn btn-big btn-light\"} autoFocus>\n                        {t('OK')}\n                    </button>\n                    <button onClick={()=>this.backConfirmed(false)} className={\"btn btn-big btn-primary\"}>\n                        {t('Cancel')}\n                    </button>\n                </DialogActions>\n            </Dialog>\n\n        );\n\n        return (\n\n                <div className=\"app-page app-bg-e0\">\n                    <div style={{display:'none', visibility:'hidden'}}>\n                        <canvas ref={(node)=>{this.processCanvasNode=node}} />\n                    </div>\n\n                    <div className=\"workplace\">\n                        <div className=\"vh100 p-2\">\n                            <Paper className=\"app-editor-items-scroller p-2 app-bg-e\">\n                                <div className=\"app-editor-items-scroller__button\">\n                                    <button type=\"button\"\n                                            className={\"btn btn-primary\"}\n                                            disabled={this.props.app.currentImage===0}\n                                            onClick={()=>{this.changeCurrentImage(-1)}}>\n                                        <Icon>expand_less</Icon>\n                                    </button>\n                                </div>\n                                <div className=\"scrollbar _vertical\">\n\n                                    <div id='listImages' className=\"app-editor-left-thumblist p-2\">\n                                        {this.props.app.images.map( (image, index)=>\n                                            <ImageThumb\n                                                key={index}\n                                                image={image}\n                                                itemIndex={index}\n                                                selected={this.props.app.currentImage===index}\n                                                onSelect={()=>this.selectImage(index)}\n                                                scrollIntoView={this.scrollIntoViewIfNeed}\n                                                {...this.props}\n                                            />\n                                        )}\n\n                                    </div>\n\n                                </div>\n\n                                <div className=\"app-editor-items-scroller__button\">\n                                    <button type=\"button\"\n                                            className={\"btn btn-primary\"}\n                                            disabled={this.props.app.currentImage===this.props.app.images.length-1}\n                                            onClick={()=>{this.changeCurrentImage(1)}}>\n                                        <Icon>expand_more</Icon>\n                                    </button>\n                                </div>\n                            </Paper>\n\n                        </div>\n\n                        {this.props.app.currentImage!==null && (\n                            <ImageEditor\n                                changeCountImage={this.changeCountImage.bind(this)}\n                                processCanvas={this.processCanvasNode}\n                                onMessage={this.props.onMessage}\n                                {...this.props}\n                            />\n                        )}\n\n                        <div className=\"tools\">\n                            {rightwidget}\n                        </div>\n                    </div>\n                    {dialogConfirmBack}\n                </div>\n\n\n        )\n    }\n}\n\n\n\n\n\n","import React from 'react';\nimport * as tools from \"../../tools\";\nimport axios from \"axios\";\n\nimport './index.css';\nimport Icon from \"@material-ui/core/Icon\";\nimport Paper from '@material-ui/core/Paper';\nimport {makeGetUri} from \"../../tools\";\nimport Switch from \"@material-ui/core/Switch\";\nimport Fab from \"@material-ui/core/Fab\";\nimport t from \"../i18n\";\n\n\nexport default class PageSetupFormats extends React.Component {\n\n    state = {\n        editedFormats: null,\n    };\n\n    componentDidMount() {\n        let formats = this.props.app.formats.filter((f)=>!f.rotated);\n        for(let i=0; i<formats.length; i++) {\n            formats[i].cost = tools.Round(formats[i].cost);\n            delete formats[i].rotated;\n            delete formats[i].rotated_key;\n        }\n        // console.log('formats', formats);\n        this.setState( {editedFormats: formats} );\n\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n    }\n\n    formatNew = ()=>{\n        let formats = this.state.editedFormats.slice();\n        if(formats.length>0) {\n            formats.push( Object.assign({}, formats[formats.length-1]) );\n        } else {\n            formats.push( {} );\n        }\n        const last = formats.length-1;\n        formats[last].name = 'new format';\n        formats[last].enabled = false;\n\n        this.setState({editedFormats: formats});\n\n    };\n\n    formatRemove = (index) => {\n        let formats = this.state.editedFormats;\n        formats.splice(index,1);\n        this.setState({editedFormats: formats});\n\n    };\n    formatChange = (index, id, ev) => {\n        let formats = this.state.editedFormats;\n        let changed = true;\n        switch (id) {\n            case 'enabled':\n            case 'portrait':\n                formats[index][id] = !formats[index][id];\n                break;\n\n            case 'name':\n            case 'height':\n            case 'width':\n            case 'surface':\n                formats[index][id] = ev.target.value;\n                break;\n\n            case 'dpi':\n                formats[index][id] = tools.Round(ev.target.value,0);\n                break;\n\n            case 'cost':\n                const x = ev.target.value.replace(/,/g,'.');\n                formats[index][id] = x;\n                break;\n\n            default:\n                changed = false;\n\n        }\n        if(changed)\n            this.setState({editedFormats: formats});\n    };\n\n    formatSave() {\n        let formats = this.state.editedFormats.slice();\n        console.log(formats);\n        for(let i=0; i<formats.length; i++) {\n            // console.log(i, formats[i]);\n\n            formats[i].dpi = Math.max(150, Math.min(tools.Round(formats[i].dpi,0), 1500));\n            formats[i].cost = tools.Round(formats[i].cost,2);\n        }\n        let uri = makeGetUri();\n        const params = new URLSearchParams();\n        params.append('q', 'setupFormatSave');\n        params.append('formats', JSON.stringify(formats));\n        params.append('p', this.props.app.isSetupPassword);\n        axios.post(uri, params ).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    this.props.appSetState({formats: formats}, ()=>{\n                        this.props.onMessage( t('successful saved') );\n                    });\n\n                } else {\n                    this.props.onMessage('error :'+res.data.error);\n                }\n            } else {\n                console.log('axios.post status ', res.status);\n            }\n        });\n    }\n\n    formatMove(index,shift) {\n        let newIndex = index+shift;\n\n        console.log(newIndex);\n        if(newIndex<0 || newIndex>this.state.editedFormats.length-1 ) {\n            return false;\n        }\n        let formats = this.state.editedFormats.slice();\n        let tmp = formats[index];\n        formats[index] = formats[newIndex];\n        formats[newIndex] = tmp;\n        this.setState({editedFormats: formats});\n\n    }\n\n    render() {\n\n        let formats = (this.state.editedFormats ? this.state.editedFormats : []);\n\n        return (\n            <div className=\"app-page app-bg-e0 app-page-setup-formats w-100 h-100\">\n                <div className=\"app-setup  h-100\">\n\n\n\n                    <div className=\"app-setup-main h-100\">\n                        <Paper className=\"app-setup-formats scrollbar p-2 h-100\">\n                            <div className=\"app-setup-formats-header\">\n                                <div className=\"_wrp _wrp_enabled\"><small>On</small></div>\n                                <div className=\"_wrp _wrp_name\"><small>{t('Name')}</small></div>\n                                <div className=\"_wrp _wrp_dpi\"><small>DPI</small></div>\n                                <div className=\"_wrp _wrp_height\"><small>{t('Height')}</small></div>\n                                <div className=\"_wrp _wrp_width\"><small>{t('Width')}</small></div>\n                                <div className=\"_wrp _wrp_surface\"><small>{t('Surface')}</small></div>\n                                <div className=\"_wrp _wrp_cost\"><small>{t('Cost')}</small></div>\n                                <div className=\"_wrp _wrp_portrait\"><small>{t('Portrait')}</small></div>\n                                <div className=\"_wrp _wrp_movecontrol\"> </div>\n                            </div>\n\n                            {formats.map((format, index)=>\n                                <div key={index} className={\"app-setup-format-item\"+(format.enabled ? '' : ' _disabled' )}>\n                                    <div className=\"_wrp _wrp_enabled\">\n                                        <Switch\n                                            checked={format.enabled}\n                                            onChange={(ev) => this.formatChange(index,'enabled', ev)}\n                                            value={'enabled'}\n                                            color=\"primary\"\n                                        />\n\n                                    </div>\n                                    <div className=\"_wrp _wrp_name\">\n                                        <input type=\"text\" value={format.name} onChange={(ev) => this.formatChange(index,'name', ev)}/>\n                                    </div>\n                                    <div className=\"_wrp _wrp_dpi\">\n                                        <input type=\"text\" value={format.dpi} onChange={(ev) => this.formatChange(index,'dpi', ev)}/>\n                                    </div>\n                                    <div className=\"_wrp _wrp_height\">\n                                        <select value={format.height} data-hint={format.height} onChange={(ev) => this.formatChange(index,'height', ev)}>\n                                            {[2.5, 3.5, 4, 4.5, 5, 6, 8, 8.27, 10, 11, 12].map((h, i)=>\n                                                <option key={i} value={h}>{h}\" ({Math.round(h*25.4)})</option>\n                                            )}\n                                        </select>\n\n                                    </div>\n                                    <div className=\"_wrp _wrp_width\">\n                                        <select value={format.width} onChange={(ev) => this.formatChange(index,'width', ev)}>\n                                            {[3.5, 5, 6, 7, 8, 8.27, 10, 12, 14, 15, 16, 17, 18].map((h, i)=>\n                                                <option key={i} value={h}>{h}\" ({Math.round(h*25.4)})</option>\n                                            )}\n                                        </select>\n                                    </div>\n                                    <div className=\"_wrp _wrp_surface\">\n                                        <select value={format.surface} onChange={(ev) => this.formatChange(index,'surface', ev)}>\n                                            {['glance', 'matte'].map((h, i)=>\n                                                <option key={i} value={h}>{t(h)}</option>\n                                            )}\n                                        </select>\n                                    </div>\n                                    <div className=\"_wrp _wrp_cost\">\n                                        <input type=\"text\" value={format.cost} onChange={(ev) => this.formatChange(index,'cost', ev)}/>\n                                    </div>\n                                    <div className=\"_wrp _wrp_portrait\">\n                                        <Switch\n                                            checked={format.portrait}\n                                            onChange={(ev) => this.formatChange(index,'portrait', ev)}\n                                            value={'portrait'}\n                                            color=\"primary\"\n                                        />\n                                    </div>\n\n                                    {format.enabled && (\n                                        <div className=\"_wrp _wrp_movecontrol\">\n                                            <div>\n                                                <Icon className=\"text-primary\"\n                                                      onClick={()=>{this.formatMove(index,-1)}}\n                                                >arrow_upward</Icon>\n                                            </div>\n                                            <div>\n                                                <Icon className=\"text-primary\"\n                                                      onClick={()=>{this.formatMove(index,1)}}\n                                                >arrow_downward</Icon>\n                                            </div>\n                                        </div>\n                                    )}\n                                    {!format.enabled && (\n                                        <div className=\"_wrp _wrp_movecontrol\">\n                                            <Fab className={\"app-setup-format-item-remove\"}\n                                                 onClick={() => this.formatRemove(index)}\n                                                 color=\"secondary\" aria-label=\"Remove\"\n                                                 size=\"small\">\n                                                <Icon>delete</Icon>\n                                            </Fab>\n                                        </div>\n\n                                    )}\n\n\n\n\n                                    <hr/>\n                                </div>\n                            )\n                            }\n                            <div className=\"app-setup-format-new\">\n                                <button className={\"btn btn-primary\"}\n                                        onClick={this.formatNew}\n                                        disabled={false}\n                                        title=\"newFormat\"\n                                        type=\"button\" >\n                                    <Icon>add</Icon>\n                                </button>\n                                <span className=\"float-right\">\n                                    <button className={\"btn btn-success \"}\n                                            onClick={this.formatSave.bind(this)}\n                                            disabled={false}\n                                            title=\"Save\"\n                                            type=\"button\" >\n                                        <Icon>save</Icon>\n                                    </button>\n\n                                </span>\n                            </div>\n\n                        </Paper>\n                    </div>\n\n\n                </div>\n            </div>\n        )\n    }\n}\n\n","import React from 'react';\nimport axios from \"axios\";\nimport * as tools from \"../../tools\";\n\n\nimport './index.css';\nimport Icon from \"@material-ui/core/Icon\";\nimport Paper from '@material-ui/core/Paper';\nimport t from \"../i18n\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\n\n\nexport default class PageSetupArchive extends React.Component {\n\n    state = {\n        arhives: [],\n        currentArchive: null,\n        isLoading: false,\n        archiveFiles: [],\n        currentArchiveFile: null,\n        isMultipleSelectOrders: false,\n        isDeleteConfirmation: 0,\n    };\n\n\n    componentDidMount() {\n        this.loadList();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n    }\n\n    loadList() {\n        if(this.state.isLoading) return;\n\n        let uri = tools.makeGetUri({'q':'loadArchives', 'p': this.props.app.isSetupPassword});\n        this.setState({arhives:[], currentArchive:null, archiveFiles:[], isLoading:true});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    if(res.data.data) {\n                        let arhives = res.data.data.map((d)=>{return {folder:d, selected:false}});\n                        this.setState({arhives: arhives});\n                    }\n                }\n            }\n            this.setState({isLoading: false});\n        });\n\n    }\n\n    tryDeleteArchive() {\n        let archCount = 0;\n        const isMultipleSelectOrders = this.state.isMultipleSelectOrders;\n        if (isMultipleSelectOrders) {\n            let as = this.state.arhives.filter((a)=>{return a.selected});\n            console.log(as);\n            archCount = as.length;\n        }\n        if(archCount>0)\n            this.setState({isDeleteConfirmation: archCount});\n    }\n    deleteArchive() {\n        const isMultipleSelectOrders = this.state.isMultipleSelectOrders;\n        if (isMultipleSelectOrders) {\n            let len = this.state.arhives.length;\n            for( let i=0; i<len; i++) {\n                if(this.state.arhives[i].selected)\n                    this._remove(this.state.arhives[i].folder);\n            }\n        }\n\n        this.setState({isDeleteConfirmation:0, isMultipleSelectOrders:false, currentArchive:null, archiveFiles:[]});\n    }\n    _remove(folder) {\n        let uri = tools.makeGetUri({'q':'removeArchive', folder: folder, 'p': this.props.app.isSetupPassword});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    this.loadList();\n                }\n            }\n        });\n    }\n\n    toggleMultiple() {\n        const isMultipleSelectOrders = !this.state.isMultipleSelectOrders;\n        if (!isMultipleSelectOrders) {\n            let arhives = this.state.arhives.slice();\n            let len = arhives.length;\n            for( let i=0; i<len; i++) {\n                arhives[i].selected = false;\n            }\n            this.setState({arhives: arhives, isMultipleSelectOrders: isMultipleSelectOrders});\n        } else {\n            this.setState({isMultipleSelectOrders: isMultipleSelectOrders});\n        }\n    }\n\n    selectArchive(index) {\n        if(this.state.isMultipleSelectOrders) {\n            let arhives = this.state.arhives.slice();\n            arhives[index].selected = !arhives[index].selected;\n            this.setState({arhives: arhives, currentArchive: index});\n        } else {\n            this.setState({currentArchive: index});\n        }\n        if(index===this.state.currentArchive) return;\n\n        let uri = tools.makeGetUri({'q':'loadArchive', folder: this.state.arhives[index].folder, 'p': this.props.app.isSetupPassword});\n        this.setState({archiveFiles: [], isLoading: true});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    if(res.data.data) {\n                        this.setState({archiveFiles: res.data.data});\n                    }\n                }\n            }\n            this.setState({isLoading: false, currentArchiveFile: null});\n        });\n    }\n\n    selectFile(index) {\n        this.setState({currentArchiveFile: index});\n    }\n\n    render() {\n        let archiveCount = 0;\n        let archiveTotal = 0;\n        let archiveDate = '';\n        let len = this.state.archiveFiles.length;\n        for(let i=0; i<len; i++) {\n            archiveCount += this.state.archiveFiles[i].count;\n            archiveTotal += this.state.archiveFiles[i].format.cost * this.state.archiveFiles[i].count;\n            archiveDate = this.state.archiveFiles[i].date+' '+this.state.archiveFiles[i].time;\n        }\n\n        let archiveFile = null;\n        if(this.state.currentArchiveFile>=0 && this.state.archiveFiles[this.state.currentArchiveFile]) {\n            archiveFile = this.state.archiveFiles[this.state.currentArchiveFile];\n            // console.log(archiveFile);\n        }\n\n        const isMultipleSelectOrders = this.state.isMultipleSelectOrders;\n        let selectedArchiveCount = 0;\n        if (isMultipleSelectOrders) {\n            let as = this.state.arhives.filter((a)=>{return a.selected});\n            console.log(as);\n            selectedArchiveCount = as.length;\n        }\n\n        return (\n            <div className=\"app-page app-bg-e0 app-page-setup-formats w-100 h-100\">\n                <div className=\"app-setup  h-100\">\n\n\n\n                    <div className=\"app-setup-main h-100\">\n                        <Paper className=\"app-setup-arhives p-2 h-100 w-100 d-flex flex-column\">\n                            <div className=\"_listswrp flex-grow-1 h-75\">\n                                <div className=\"h-100 d-flex flex-row\">\n                                    <div className=\"app-setup-archives-list scrollbar flex-grow-0 border position-relative\">\n                                        {(this.state.isLoading) && (\n                                            <div className = \"spinner-border text-primary position-absolute\" role = \"status\" >\n                                                <span className = \"sr-only\" > Loading...</span>\n                                            </div>\n                                        )}\n\n                                        {this.state.arhives.map((a, i)=>\n                                        <div key={i} className={\"_item\"+(i===this.state.currentArchive ? ' bg-primary text-light' : ' bg-light')}\n                                             onClick={()=>{this.selectArchive(i)}}\n                                        >\n\n                                            {isMultipleSelectOrders && (\n                                                <Icon fontSize={\"inherit\"} className=\"text-success\">{a.selected ? 'check_circle' : 'radio_button_unchecked'}</Icon>\n                                            )}\n                                            {a.folder}\n\n                                        </div>\n                                        ) }\n                                    </div>\n                                    <div className=\"app-setup-archive-files scrollbar flex-grow-0 border position-relative\">\n                                        {(this.state.isLoading) && (\n                                            <div className = \"spinner-border text-primary position-absolute\" role = \"status\" >\n                                                <span className = \"sr-only\" > Loading...</span>\n                                            </div>\n                                        )}\n                                        {this.state.archiveFiles.map((f, i)=>\n                                            <div key={i} className={\"_item\"+(i===this.state.currentArchiveFile ? ' bg-primary text-light' : ' bg-light')}\n                                                 onClick={()=>{this.selectFile(i)}}\n                                            >\n                                                {f.name}\n\n                                            </div>\n                                        ) }\n                                    </div>\n                                    <div className=\"app-setup-archive-fileview flex-grow-1 border h-100\">\n                                        <div className=\"d-flex flex-column h-100\">\n                                            <div className=\"_view-img border bg-light flex-grow-1\"\n                                                 style={{backgroundImage: (archiveFile ? \"url('\"+tools.makeGetUri()+archiveFile.file+\"')\" : '')}}\n                                            > </div>\n                                            <div className=\"_infobottom flex-grow-0\">\n                                                <table className=\"table\">\n                                                    <thead>\n                                                    <tr>\n                                                        <th scope=\"col\" colSpan=\"2\">{t('Format')}</th>\n                                                        <th scope=\"col\">{t('Amount')}</th>\n                                                        <th scope=\"col\">{t('Date')}</th>\n                                                        <th scope=\"col\">{t('Prints')}</th>\n                                                        <th scope=\"col\">{t('Total')}</th>\n                                                    </tr>\n                                                    </thead>\n                                                    <tbody>\n                                                        <tr>\n                                                            <td>{archiveFile ? archiveFile.format.name+' '+archiveFile.format.width+'\"x'+archiveFile.format.height+'\"' : ''}</td>\n                                                            <td>{archiveFile ? Math.round(archiveFile.format.height*25.4)+'x'+Math.round(archiveFile.format.width*25.4)+' , '+t(archiveFile.format.surface) : '' }</td>\n                                                            <td>{archiveFile ? archiveFile.count : ''}</td>\n                                                            <td>{archiveFile ? archiveFile.date+' '+archiveFile.time : archiveDate}</td>\n                                                            <td>{archiveCount}</td>\n                                                            <td>{tools.Round(archiveTotal)}</td>\n                                                        </tr>\n                                                    </tbody>\n                                                </table>\n\n\n                                            </div>\n                                        </div>\n\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"_btnswrp flex-grow-0\">\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className={\"btn btn-success btn \"}\n                                            onClick={()=>{this.loadList()}}\n                                            title=\"sample\"\n                                            type=\"button\" >\n                                        <Icon>refresh</Icon>\n                                    </button>\n\n                                </div>\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className={\"btn\"+(isMultipleSelectOrders ? ' btn-outline-success':' btn-outline-secondary')}\n                                            onClick={()=>{this.toggleMultiple()}}\n                                            title=\"multiple\"\n                                            type=\"button\" >\n                                        <Icon>filter_none</Icon>\n                                    </button>\n                                </div>\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className={\"btn btn-success btn \"}\n                                            onClick={()=>{this.tryDeleteArchive()}}\n                                            disabled={selectedArchiveCount===0}\n                                            title=\"Delete\"\n                                            type=\"button\" >\n                                        <Icon>delete_forever</Icon>\n                                    </button>\n\n                                </div>\n\n\n                            </div>\n                        </Paper>\n                    </div>\n\n\n                </div>\n\n\n                <Dialog\n                    open={this.state.isDeleteConfirmation>0}\n                    onClose={()=>this.setState({isDeleteConfirmation:0})}\n                    aria-labelledby=\"alert-dialog-title\"\n                    aria-describedby=\"alert-dialog-description\"\n                >\n                    <DialogTitle id=\"alert-dialog-title\">{t(\"Warning\")}</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText id=\"alert-dialog-description\">\n                            {t('You are selected archives to remove:')} <span className=\"text-center text-dark\" style={{fontSize:'1.4em'}}>{this.state.isDeleteConfirmation>0 ? this.state.isDeleteConfirmation : ''}</span>\n                            <br/>\n                            {t('Are you sure?')}\n                        </DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <button onClick={()=>this.deleteArchive()} className={\"btn btn-big btn-light\"}>\n                            {t('OK')}\n                        </button>\n                        <button onClick={()=>this.setState({isDeleteConfirmation:0})} className={\"btn btn-big btn-primary\"} autoFocus>\n                            {t('Cancel')}\n                        </button>\n                    </DialogActions>\n                </Dialog>\n\n            </div>\n        )\n    }\n}\n\n","import React from 'react';\nimport * as tools from \"../../tools\";\nimport axios from \"axios\";\n\nimport './index.css';\nimport Icon from \"@material-ui/core/Icon\";\nimport Paper from '@material-ui/core/Paper';\nimport {makeGetUri} from \"../../tools\";\nimport Switch from \"@material-ui/core/Switch\";\nimport Fab from \"@material-ui/core/Fab\";\nimport t from \"../i18n\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\n\n\nexport default class PageSetupSources extends React.Component {\n\n    state = {\n        editedSources: this.props.app.sources.slice(),\n        listIcons: [],\n        listScripts: [],\n        scriptTxt: false,\n\n    };\n\n    componentDidMount() {\n        if(!this.state.editedSources) {\n            this.setState({\n                editedSources: this.props.app.sources.slice()\n            });\n        }\n\n        let uri = tools.makeGetUri({'q':'setupSourcesListIcons', 'p': this.props.app.isSetupPassword});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    if(res.data.data) {\n                        this.setState({listIcons: res.data.data});\n                    }\n                }\n            }\n        });\n\n        uri = tools.makeGetUri({'q':'setupSourcesListScripts', 'p': this.props.app.isSetupPassword});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    if(res.data.data) {\n                        this.setState({listScripts: res.data.data});\n                    }\n                }\n            }\n        });\n    }\n\n    viewScript(name) {\n        let scriptTxt = false;\n        let len = this.state.listScripts.length;\n        for(let i=0; i<len; i++) {\n            console.log(this.state.listScripts[i].name, name);\n            if(this.state.listScripts[i].name === name) {\n                console.log('gotcha');\n                scriptTxt = this.state.listScripts[i].script;\n                break;\n            }\n        }\n        this.setState({scriptTxt: scriptTxt});\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n    }\n\n    sourceNew = ()=>{\n        let sources = this.state.editedSources.slice();\n        sources.push( Object.assign({}, sources[0]) );\n        const last = sources.length-1;\n        sources[last].name = 'new source';\n        sources[last].enabled = false;\n\n        this.setState({editedSources: sources});\n\n    };\n\n    sourceRemove = (index) => {\n        let sources = this.state.editedSources;\n        sources.splice(index,1);\n        this.setState({editedSources: sources});\n\n    };\n    sourceChange = (index, id, ev) => {\n        let sources = this.state.editedSources;\n        let changed = true;\n        switch (id) {\n            case 'enabled':\n            case 'emptyhide':\n            case 'autoclear':\n                sources[index][id] = !sources[index][id];\n                break;\n\n            case 'name':\n            case 'path':\n            case 'icon':\n            case 'scripton':\n            case 'scriptoff':\n                sources[index][id] = ev.target.value;\n                break;\n\n            default:\n                changed = false;\n\n        }\n        if(changed)\n            this.setState({editedSources: sources});\n    };\n\n    sourcesSave() {\n        let sources = this.state.editedSources;\n        // for(let i=0; i<sources.length; i++) {\n        //     console.log(i, sources[i]);\n        // }\n        let uri = makeGetUri();\n        const params = new URLSearchParams();\n        params.append('q', 'setupSourcesSave');\n        params.append('sources', JSON.stringify(sources));\n        params.append('p', this.props.app.isSetupPassword);\n        axios.post(uri, params ).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    this.props.appSetState({sources: sources}, ()=>{\n                        this.props.onMessage( t('successful saved') );\n                    });\n\n                } else {\n                    this.props.onMessage('error :'+res.data.error);\n                }\n            } else {\n                console.log('axios.post status ', res.status);\n            }\n        });\n    }\n\n    sourceMove(index,shift) {\n        let newIndex = index+shift;\n\n        console.log(newIndex);\n        if(newIndex<0 || newIndex>this.state.editedSources.length-1 ) {\n            return false;\n        }\n        let sources = this.state.editedSources.slice();\n        let tmp = sources[index];\n        sources[index] = sources[newIndex];\n        sources[newIndex] = tmp;\n        this.setState({editedSources: sources});\n\n    }\n\n    render() {\n\n        let sources = (this.state.editedSources ? this.state.editedSources : []);\n        let listIcons = this.state.listIcons;\n        let listScripts = this.state.listScripts;\n\n        return (\n            <div className=\"app-page app-bg-e0 app-page-setup-formats w-100 h-100\">\n                <div className=\"app-setup  h-100\">\n\n\n\n                    <div className=\"app-setup-main h-100\">\n                        <Paper className=\"app-setup-sources scrollbar p-2 h-100\">\n                            <div className=\"app-setup-sources-header\">\n                                <div className=\"_wrp _wrp_enabled\"><small>On</small></div>\n                                <div className=\"_wrp _wrp_name\"><small>{t('Name')}</small></div>\n                                <div className=\"_wrp _wrp_icondisplay\"> </div>\n                                <div className=\"_wrp _wrp_path\"><small>{t('Path')}</small></div>\n                                <div className=\"_wrp _wrp_scripton\"><small>{t('Script ON / OFF')}</small></div>\n                                <div className=\"_wrp _wrp_emptyhide\"><small>{t('Emptyhide')}</small></div>\n                                <div className=\"_wrp _wrp_autoclear\"><small>{t('Autoclear')}</small></div>\n                                <div className=\"_wrp _wrp_movecontrol\"> </div>\n                            </div>\n\n                            {sources.map((source, index)=>\n                                <div key={index} className={\"app-setup-source-item\"+(source.enabled ? '' : ' _disabled' )}>\n                                    <div className=\"_wrp _wrp_enabled\">\n                                        <Switch\n                                            checked={source.enabled}\n                                            onChange={(ev) => this.sourceChange(index,'enabled', ev)}\n                                            value={'enabled'}\n                                            color=\"primary\"\n                                        />\n\n                                    </div>\n                                    <div className=\"_wrp _wrp_name\">\n                                        <div>\n                                            <input type=\"text\" value={source.name} onChange={(ev) => this.sourceChange(index,'name', ev)} className=\"w-100\"/>\n                                        </div>\n                                        <div>\n                                            <select value={source.icon} data-value={source.icon} onChange={(ev) => this.sourceChange(index,'icon', ev)}  className=\"w-100\">\n                                                {listIcons.map((h, i)=>\n                                                    <option key={i} value={h}>{h.replace(/^.*[\\\\/]/, '')}</option>\n                                                )}\n                                            </select>\n\n                                        </div>\n                                    </div>\n                                    <div className=\"_wrp _wrp_icondisplay\"\n                                         style={{backgroundImage: (source.icon ? 'url('+tools.makeGetUri()+source.icon+')' : '')}}\n                                    > </div>\n                                    <div className=\"_wrp _wrp_path\">\n                                        <input type=\"text\" value={source.path} onChange={(ev) => this.sourceChange(index,'path', ev)} className=\"w-100\"/>\n                                    </div>\n                                    <div className=\"_wrp _wrp_scripton\">\n                                        <div>\n                                            <select value={source.scripton} onChange={(ev) => this.sourceChange(index,'scripton', ev)}>\n                                                <option key={'d'} value=''>{t('---')}</option>\n                                                {listScripts.map((h, i)=>\n                                                    <option key={i} value={h.name}>{h.name}</option>\n                                                )}\n                                            </select>\n                                            <Icon onClick={()=>{this.viewScript(source.scripton)}} className=\"text-success\" >description</Icon>\n                                        </div>\n                                        <div>\n                                            <select value={source.scriptoff} onChange={(ev) => this.sourceChange(index,'scriptoff', ev)}>\n                                                <option key={'d'} value=''>{t('---')}</option>\n                                                {listScripts.map((h, i)=>\n                                                    <option key={i} value={h.name}>{h.name}</option>\n                                                )}\n                                            </select>\n                                            <Icon onClick={()=>{this.viewScript(source.scriptoff)}} className=\"text-warning\" >description</Icon>\n\n                                        </div>\n                                    </div>\n\n                                    <div className=\"_wrp _wrp_emptyhide\">\n                                        <Switch\n                                            checked={source.emptyhide}\n                                            onChange={(ev) => this.sourceChange(index,'emptyhide', ev)}\n                                            value={'emptyhide'}\n                                            color=\"primary\"\n                                        />\n                                    </div>\n                                    <div className=\"_wrp _wrp_autoclear\">\n                                        <Switch\n                                            checked={source.autoclear}\n                                            onChange={(ev) => this.sourceChange(index,'autoclear', ev)}\n                                            value={'autoclear'}\n                                            color=\"primary\"\n                                        />\n                                    </div>\n                                    {source.enabled && (\n                                        <div className=\"_wrp _wrp_movecontrol\">\n                                            <div>\n                                                <Icon className=\"text-primary\"\n                                                      onClick={()=>{this.sourceMove(index,-1)}}\n                                                >arrow_upward</Icon>\n                                            </div>\n                                            <div>\n                                                <Icon className=\"text-primary\"\n                                                      onClick={()=>{this.sourceMove(index,1)}}\n                                                >arrow_downward</Icon>\n                                            </div>\n                                        </div>\n                                    )}\n\n                                    {!source.enabled && (\n                                        <div className=\"_wrp _wrp_movecontrol\">\n                                            <Fab className={\"app-setup-format-item-remove\"}\n                                                 onClick={() => this.sourceRemove(index)}\n                                                 color=\"secondary\" aria-label=\"Remove\"\n                                                 size=\"small\">\n                                                <Icon>delete</Icon>\n                                            </Fab>\n                                        </div>\n                                    )}\n\n                                    <hr/>\n                                </div>\n                            )\n                            }\n                            <div className=\"app-setup-format-new\">\n                                <button className={\"btn btn-primary\"}\n                                        onClick={this.sourceNew}\n                                        disabled={false}\n                                        title=\"newFormat\"\n                                        type=\"button\" >\n                                    <Icon>add</Icon>\n                                </button>\n                                <span className=\"float-right\">\n                                    <button className={\"btn btn-success \"}\n                                            onClick={this.sourcesSave.bind(this)}\n                                            disabled={false}\n                                            title=\"Save\"\n                                            type=\"button\" >\n                                        <Icon>save</Icon>\n                                    </button>\n\n                                </span>\n                            </div>\n\n                        </Paper>\n                    </div>\n\n\n                </div>\n\n                <Dialog\n                    open={this.state.scriptTxt}\n                    onClose={()=>this.setState({scriptTxt: null})}\n                    aria-labelledby=\"alert-dialog-title\"\n                    aria-describedby=\"alert-dialog-description\"\n                    maxWidth={false}\n                >\n                    <DialogContent>\n                        <DialogContentText id=\"alert-dialog-description\" className=\"app-setup-view-code-wrapper\">\n                        <textarea className=\"app-setup-view-code\" readOnly>\n                            {this.state.scriptTxt}\n                        </textarea>\n                        </DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <button onClick={()=>this.setState({scriptTxt: null})} className={\"btn btn-primary\"}>\n                            {t('Close')}\n                        </button>\n                    </DialogActions>\n                </Dialog>\n            </div>\n        )\n    }\n}\n\n","import React from 'react';\nimport * as tools from \"../../tools\";\nimport axios from \"axios\";\n\nimport './index.css';\nimport Paper from '@material-ui/core/Paper';\nimport {makeGetUri} from \"../../tools\";\nimport t from \"../i18n\";\nimport Switch from \"@material-ui/core/Switch\";\n\n\nexport default class PageSetupParameters extends React.Component {\n\n    state = {\n        inputNP: '',\n        inputNP2: '',\n        setup: this.props.app.setup,\n        removeOlder: !(this.props.app.setup.removeArchiveOlder<14 || this.props.app.setup.removeArchiveOlder>5000),\n    };\n\n    savePass() {\n        if(this.state.inputNP!==this.state.inputNP2) {\n            this.props.onMessage(t('New password and his confirm does not match'));\n            this.setState({inputNP:'', inputNP2:''});\n            return;\n        }\n        let uri = tools.makeGetUri({'q':'setupPasswordSave', 'value': this.state.inputNP, 'p':this.props.app.isSetupPassword});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    this.props.onMessage(t('New password saved'));\n                    this.setState({inputNP:'', inputNP2:''})\n                    if(this.props.needConfigure) {\n                        document.location.reload();\n                    }\n                } else {\n                    this.props.onMessage(t('error')+res.data.error);\n                    console.log(res.data.error);\n                }\n            }\n        });\n    }\n\n    saveParameters() {\n        let uri = makeGetUri();\n        const params = new URLSearchParams();\n        params.append('q', 'setupParametersSave');\n        let setup = Object.assign(this.state.setup);\n        if(setup.removeArchiveOlder<14 || setup.removeArchiveOlder>5000) {\n            setup.removeArchiveOlder = 0;\n            this.setState( {setup: setup, removeOlder: false} );\n        }\n        params.append('setup', JSON.stringify(setup));\n        params.append('p', this.props.app.isSetupPassword);\n        axios.post(uri, params ).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    this.props.onMessage(t('Parameters saved'));\n                } else {\n                    this.props.onMessage(t('error')+res.data.error);\n                    console.log(res.data.error);\n                }\n            } else {\n                console.log('axios.post status ', res.status);\n            }\n        });\n\n    }\n\n\n\n\n    inputTyped = (ev , key) => {\n        let state = {};\n        state[key] = ev.target.value;\n        this.setState(state);\n    };\n\n    removeOlderToggle() {\n        this.setState( {removeOlder: !this.state.removeOlder} );\n    }\n\n    setupChange(key, ev) {\n        let setup = Object.assign(this.state.setup);\n        let changed = true;\n        switch (key) {\n\n            case 'processMode':\n            case 'batchSaveMode':\n            case 'copiesMode':\n            case 'printNaming':\n            case 'copiesNaming':\n            case 'removeArchiveOlder':\n\n                setup[key] = ev.target.value;\n                break;\n\n\n            default:\n                changed = false;\n\n        }\n        if(changed)\n            this.setState( {setup: setup} );\n\n    }\n\n    render() {\n\n        let namingOption = [\n            '_4x6_102x152_glance',\n            '_102x152_glance',\n            '_4x6_glance',\n            '_102x152',\n            '_4x6',\n            '_4x6_102x152',\n        ];\n\n        return (\n            <div className=\"app-page app-bg-e0 app-page-setup-formats w-100 h-100\">\n                <div className=\"app-setup  h-100\">\n\n\n\n                    <div className=\"app-setup-main h-100\">\n                        <Paper className=\"app-setup-formats scrollbar p-4 mr-2\">\n                            <div className=\"m-2\">\n                                {this.props.needConfigure &&\n                                <div className=\"text-center text-danger\">\n                                    <strong>{t('You should setup new password!')}</strong>\n                                </div>\n                                }\n                                <form>\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"np\">{t('New password')}</label>\n                                        <input id=\"np\" type=\"text\" autoComplete={'off'} className={\"app-login-pass form-control text-center\"} value={this.state.inputNP} onChange={(e)=>this.inputTyped(e,'inputNP')} autoFocus/>\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"np2\">{t('Retype password')}</label>\n                                        <input id=\"np2\" type=\"text\" autoComplete={'off'} className={\"app-login-pass form-control text-center\"} value={this.state.inputNP2} onChange={(e)=>this.inputTyped(e,'inputNP2')} />\n                                    </div>\n\n                                    <div className=\"p-2 text-right\">\n                                        <button className={\"btn btn-primary\"}\n                                                onClick={this.savePass.bind(this)}\n                                                disabled={false}\n                                                title=\"save\"\n                                                type=\"button\" >\n                                            {t('Save')}\n                                        </button>\n\n                                    </div>\n                                </form>\n\n                            </div>\n\n                        </Paper>\n                        <Paper className=\"app-setup-formats scrollbar p-4 mr-2\">\n                            <div className=\"m-2\">\n                                <form>\n\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"processmode\">{t('Process mode')}</label>\n                                        <select  id=\"processmode\" value={this.state.setup.processMode} onChange={(ev) => this.setupChange('processMode', ev)} className={\"form-control\"}>\n                                            <option key={'frontend'} value='frontend'>DOESN'T WORK{t('frontend')}</option>\n                                            <option key={'backend'} value='backend'>{t('backend')} ({t('Recomended')})</option>\n                                        </select>\n                                    </div>\n\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"batch\">{t('Print mode')}</label>\n                                        <select  id=\"batch\" value={this.state.setup.batchSaveMode} onChange={(ev) => this.setupChange('batchSaveMode', ev)} className={\"form-control\"}>\n                                            <option value='0'>DOESN'T WORK {t('Wait for each file')}</option>\n                                            <option value='1'>{t('Fast batch on backend')} ({t('Recomended')})</option>\n                                        </select>\n                                    </div>\n\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"copiesMode\">{t('Print copies')}</label>\n                                        <select  id=\"copiesMode\" value={this.state.setup.copiesMode} onChange={(ev) => this.setupChange('copiesMode', ev)} className={\"form-control\"}>\n                                            <option value='1'>{t('Make copy for each file')}</option>\n                                            <option value='0'>{t('Add count to name of file')} ({t('Recomended')})</option>\n                                        </select>\n                                    </div>\n\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"printNaming\">{t('Print naming')}</label>\n                                        <select  id=\"printNaming\" value={this.state.setup.printNaming} onChange={(ev) => this.setupChange('printNaming', ev)} className={\"form-control\"}>\n                                            {namingOption.map((t,n)=>\n                                                <option key={n} value={n}>{t}</option>\n                                            )}\n                                        </select>\n                                    </div>\n\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"copiesNaming\">{t('Copies naming')}</label>\n                                        <select  id=\"copiesNaming\" value={this.state.setup.copiesNaming} onChange={(ev) => this.setupChange('copiesNaming', ev)} className={\"form-control\"}>\n                                            <option value='0'>999_copy2{namingOption[this.state.setup.printNaming]}</option>\n                                            <option value='1'>999{namingOption[this.state.setup.printNaming]}_copy2</option>\n                                            <option value='2'>999{namingOption[this.state.setup.printNaming]}_c2</option>\n                                            <option value='3'>999_c2{namingOption[this.state.setup.printNaming]}</option>\n                                        </select>\n                                    </div>\n\n\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"removeArchiveOlder\">{t('Remove archives, older than days')}</label>\n                                        <Switch\n                                            checked={this.state.removeOlder}\n                                            onChange={(ev) => this.removeOlderToggle()}\n                                            value={'enabled'}\n                                            color=\"primary\"\n                                        />\n                                        <input type=\"text\" value={this.state.setup.removeArchiveOlder} onChange={(ev) => this.setupChange('removeArchiveOlder', ev)}/>\n\n                                    </div>\n\n\n                                    <div className=\"p-2 text-right\">\n                                        <button className={\"btn btn-primary\"}\n                                                onClick={this.saveParameters.bind(this)}\n                                                disabled={false}\n                                                title=\"save\"\n                                                type=\"button\" >\n                                            {t('Save')}\n                                        </button>\n\n                                    </div>\n                                </form>\n\n                            </div>\n                        </Paper>\n                    </div>\n\n\n                </div>\n            </div>\n        )\n    }\n}\n\n","import React from 'react';\n\nimport './index.css';\nimport Icon from \"@material-ui/core/Icon\";\nimport Paper from '@material-ui/core/Paper';\nimport t from \"../i18n\";\nimport PageSetupFormats from './PageSetupFormats'\nimport PageSetupArchive from './PageSetupArchive'\nimport PageSetupSources from './PageSetupSources'\nimport PageSetupParameters from './PageSetupParameters'\n\nexport default class PageSetup extends React.Component {\n\n    state = {\n        currentTab: 'archive',\n    };\n\n    componentDidMount() {\n        if(this.props.needConfigure) {\n            this.setState({currentTab: 'parameters'});\n        }\n    }\n\n    openTab = (tab) => {\n        if(tab!== this.state.currentTab)\n            this.setState({currentTab: tab})\n    };\n\n    render() {\n\n        let tab = null;\n        switch (this.state.currentTab) {\n            case 'formats':\n                tab = <PageSetupFormats key={this.state.currentTab} {...this.props}/>;\n                break;\n\n            case 'sources':\n                tab = <PageSetupSources key={this.state.currentTab} {...this.props}/>;\n                break;\n\n            case 'parameters':\n                tab = <PageSetupParameters key={this.state.currentTab} {...this.props}/>;\n                break;\n\n            default:\n                tab = <PageSetupArchive key={this.state.currentTab} {...this.props}/>;\n                break;\n        }\n\n        return (\n            <div className=\"app-page app-bg-e0 app-setup w-100 h-100\">\n                <div className=\"app-setup-wrapper h-100\">\n                    <div className=\"app-setup-main h-85 w-100\">\n                        <div className=\"app-setup-main-tabcontrol w-15 h-100 d-inline-block p-2\">\n                            <Paper className=\"_tab-control w-100 h-100 p-2\">\n                                <div className=\"_menuwrapper\">\n                                    <button className={\"btn \"+(this.state.currentTab==='formats' ? 'btn-primary' : 'btn-outline-primary')}\n                                            onClick={()=>{this.openTab('formats')}}\n                                            type=\"button\" > {t('Formats')}\n                                    </button>\n                                </div>\n                                <div className=\"_menuwrapper\">\n                                    <button className={\"btn \"+(this.state.currentTab==='sources' ? 'btn-primary' : 'btn-outline-primary')}\n                                            onClick={()=>{this.openTab('sources')}}\n                                            type=\"button\" > {t('Sources')}\n                                    </button>\n                                </div>\n                                <div className=\"_menuwrapper\">\n                                    <button className={\"btn \"+(this.state.currentTab==='archive' ? 'btn-primary' : 'btn-outline-primary')}\n                                            onClick={()=>{this.openTab('archive')}}\n                                            type=\"button\" > {t('Archive')}\n                                    </button>\n                                </div>\n                                <div className=\"_menuwrapper\">\n                                    <button className={\"btn \"+(this.state.currentTab==='parameters' ? 'btn-primary' : 'btn-outline-primary')}\n                                            onClick={()=>{this.openTab('parameters')}}\n                                            type=\"button\" > {t('Parameters')}\n                                    </button>\n                                </div>\n                                <hr/>\n                                <div>\n                                    <small>\n                                        <p>{t('You should use Chrome-browser as client with parameters:')}</p>\n                                        <p className=\"text-info\">chrome {window.location.href} --kiosk  --new-window --start-maximized --disable-extensions --disable-notifications --disable-sync --disable-translate=1</p>\n                                    </small>\n                                </div>\n\n                            </Paper>\n                        </div>\n                        <div className=\"app-setup-main-tab w-85 h-100 d-inline-block p-2\">\n                            {tab}\n                        </div>\n                    </div>\n                    <div className=\"app-setup-bottom h-15 p-2\">\n                            <Paper className=\"app-setup-bottom-buttons text-center h-100 p-2\">\n                                <Paper className=\"float-left h-100 p-2\">\n                                    {this.props.app.appWidth}x{this.props.app.appHeight}\n                                    <div>\n                                        <button className={\"btn btn-light\"}\n                                                onClick={()=>{if(window.confirm(t('Refresh application')+'?')) document.location.reload();}}\n                                                disabled={false}\n                                                title=\"Refresh\"\n                                                type=\"button\" >\n                                            <Icon>update</Icon> {this.props.app.version}\n                                        </button>\n\n                                    </div>\n                                </Paper>\n                                {!this.props.needConfigure &&\n                                    <div className=\"m-2 d-inline-block\">\n                                        <button className={\"btn btn-primary btn-big\"}\n                                                onClick={()=>{this.props.Logout()}}\n                                                disabled={false}\n                                                title=\"Logout\"\n                                                type=\"button\" >\n                                            <Icon>close</Icon>\n                                        </button>\n                                    </div>\n                                }\n\n                            </Paper>\n\n                    </div>\n                </div>\n            </div>\n            )\n    }\n}\n\n","import React from 'react';\nimport * as tools from \"../../tools\";\nimport axios from \"axios\";\nimport t from \"../i18n\";\n\nimport './index.css';\nimport Icon from \"@material-ui/core/Icon\";\nimport Paper from '@material-ui/core/Paper';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport {makeGetUri} from \"../../tools\";\nimport {calculateImageDimensions} from \"../../tools\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\n\nexport default class PagePrint extends React.Component {\n    state = {\n        orderFolder: null,\n        orderNum: null,\n        savingImages: false,\n        orderPrinted: false,\n    };\n\n    savePartialProgress(start, processed, party, imageslen) {\n        processed /= 2; // increment twice (init + process)\n        let progress = Math.ceil((start+processed)/imageslen*100);\n        let job_done = start+processed >= imageslen;\n        if(job_done) {\n            progress = -1;\n            if(this.props.app.setup.batchSaveMode==='1') {\n                let uri = makeGetUri({'q':'orderFilesProcessBatch', 'folder': this.state.orderFolder});\n                axios.get(uri).then(res => {\n                    if(res.status===200) {\n                        if(res.data.error!=='') {\n                            this.props.onMessage(t('orderFilesProcessBatch error:')+res.data.error);\n                        }\n                    } else {\n                        this.props.onMessage(t('orderFilesProcessBatch error status, let see log'));\n                        console.log(t('orderFilesProcessBatch error status'), res.status);\n                    }\n                });\n            }\n\n            // job done\n        } else {\n            if(processed >= party) {\n                // partial end\n                setTimeout(()=>{ this.saveImage(start+processed); },500);\n                // console.log('partial end', start, processed); job_done = true;\n            }\n        }\n        if(this.props.app.progressBarValue !== progress) {\n            let isPleaseWait = (progress>-1 && progress<99);\n            this.props.appSetState({progressBarValue:progress, isPleaseWait:isPleaseWait, savingImages:!job_done });\n        }\n        if(job_done)\n            this.setState({orderPrinted: true} );\n    }\n\n    checkBeforeSaveImage() {\n        let total = 0;\n        for(let i=0; i<this.props.app.images.length; i++) {\n            total += this.props.app.images[i].count;\n        }\n        if(total) {\n            this.saveImage(0);\n        } else {\n            this.props.onClickNextBtn();\n        }\n    }\n    saveImage = (first) => {\n        let party = 10;\n        let imageslen = this.props.app.images.length;\n        if(first+party>imageslen) {\n            party = imageslen - first;\n        }\n\n        let processed = 0;\n        let orderFolder = '';// '../';\n        if(this.state.orderFolder) {\n            orderFolder = this.state.orderFolder;\n        }\n        this.savePartialProgress(first, processed, party, imageslen);\n        let uri = makeGetUri({'q':'orderGetFolder', 'folder': orderFolder});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    if(res.data.data) {\n                        orderFolder = res.data.data;\n                        this.setState({orderFolder: orderFolder, orderNum: res.data.orderNum});\n\n                        let partImages = this.props.app.images.slice(first, first+party);\n                        partImages.forEach( (image, index)=>{\n                            let i = first+index;\n                            processed++; // count init\n                            this.savePartialProgress(first, processed, party, imageslen);\n\n                            // console.log('Process image from:', first, 'index:', index, 'key', i );\n\n                            this.autoInitImage(i, ()=>{\n\n                                let image = this.props.app.images[i];\n                                if(image.count) {\n                                    if(this.props.app.setup.processMode === 'frontend') {\n                                        tools.processImage(this.processCanvasNode, this.props.app, i, (DataURL)=>{\n\n                                            let uri = tools.makeGetUri();\n                                            const params = new URLSearchParams();\n                                            params.append('q', 'orderFileWrite');\n                                            params.append('folder', orderFolder);\n                                            params.append('image', JSON.stringify(image));\n                                            params.append('name', (i+1)+'.'+image.extension);\n                                            params.append('count', image.count);\n                                            params.append('copy', this.props.app.setup.copiesMode ? this.props.app.setup.copiesMode : 1);\n                                            params.append('data', DataURL);\n\n                                            axios.post(uri, params ).then(res => {\n                                                if(res.status===200) {\n                                                    if(res.data.error!=='') {\n                                                        this.props.onMessage('error '+res.data.error);\n                                                    }\n                                                    processed++;\n                                                    // console.log('processed', processed);\n                                                    this.savePartialProgress(first, processed, party, imageslen);\n                                                }\n                                            });\n                                        });\n\n                                    } else { // this.props.app.setup.processMode === backend\n                                        const p = calculateImageDimensions(this.props.app, i);\n\n                                        let uri = tools.makeGetUri();\n                                        const params = new URLSearchParams();\n                                        params.append('q', 'orderFileToProcess');\n                                        if(this.props.app.setup.batchSaveMode==='1') params.append('batch', '1');\n                                        params.append('folder', orderFolder);\n                                        params.append('name', (i+1)+'.'+image.extension);\n                                        params.append('image', JSON.stringify(image));\n                                        params.append('dimensions', JSON.stringify(p));\n                                        params.append('count', image.count);\n                                        params.append('copy', this.props.app.setup.copiesMode ? this.props.app.setup.copiesMode : 1);\n\n                                        axios.post(uri, params ).then(res => {\n                                            if(res.status===200) {\n                                                if(res.data.error!=='') {\n                                                    this.props.onMessage(t('error')+':'+res.data.error);\n                                                }\n                                                processed++;\n                                                // console.log('processed', processed);\n                                                this.savePartialProgress(first, processed, party, imageslen);\n                                            }\n                                        });\n                                    }\n\n                                } else {\n                                    processed++;\n                                    this.savePartialProgress(first, processed, party, imageslen);\n                                }\n                            });\n                        }, this );\n\n                        // for(let i=first; i<first+party; i++) {\n                        //\n                        //     // console.log('image init ', first+i);\n                        //     processed++; // count init\n                        //     this.savePartialProgress(first, processed, party, imageslen);\n                        //\n                        // }//for\n\n                    }\n                } else {\n                    this.props.onMessage(t('error')+':'+res.data.error);\n                }\n            } else {\n                this.props.onMessage(t('error status, let see log'));\n                console.log('error status', res.status);\n            }\n        });\n    };\n\n    autoInitImage = (i, fn_callback) => {\n        let image = this.props.app.images[i];\n\n        this.props.appImageInitMask(i, false, ()=>{\n\n            // console.log(' autoInitImage appImageInitMask', i );\n\n            if(!image.editorState.initedImagePosition) {\n                // console.log('init image '+i);\n                this.props.alignInit(i, fn_callback);\n            } else {\n                if( typeof(fn_callback) === 'function') { fn_callback(); }\n            }\n\n        });\n\n    };\n\n\n\n    render() {\n\n        const formats = this.props.app.formats;\n        const images = this.props.app.images;\n        let temporary = [];\n        let _flen = formats.length;\n        for(let i=0; i<_flen; i++) {\n            const ims = images.filter((image)=>{\n                for (let key in image.format) {\n                    if (formats[i][key] === undefined || formats[i][key] !== image.format[key])\n                        return false;\n                }\n                return true;\n            });\n            temporary.push(ims);\n        }\n        // console.log(temporary);\n\n        let summary = []; //temporary.filter((t,i)=>t.length>0);\n        _flen = temporary.length;\n        let totalSum = 0;\n        for(let i=0; i<_flen; i++) {\n            const tmp = temporary[i];\n            if(tmp.length>0) {\n                let cnt = 0;\n                for(let j=0; j<tmp.length; j++) {\n                    cnt += tmp[j].count;\n                }\n                if(cnt>0) {\n                    summary.push({ format: formats[i], count: cnt, });\n                    totalSum += formats[i].cost * cnt;\n                }\n            }\n        }\n        // console.log(summary);\n\n        return (\n\n            <div className=\"app-page app-bg-e0 app-page-start w-100 h-100\">\n                <div className=\"app-print h-90 p-2\">\n                    <Paper className=\"h-100 w-100 p-2 app-bg-e text-center\">\n                        <Paper className=\"app-print-costs-paper scrollbar p-2 m-2\">\n                            <table className=\"table\">\n                                <thead>\n                                <tr>\n                                    <th scope=\"col\" colSpan=\"2\">{t('Format')}</th>\n                                    <th scope=\"col\">{t('Amount')}</th>\n                                    <th scope=\"col\">{t('Total')}: {totalSum}</th>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                {summary.map((sum, i)=>\n                                    <tr key={i}>\n                                        <td>{sum.format.name} {sum.format.width}\" x{sum.format.height}\"</td>\n                                        <td>{Math.round(sum.format.height*25.4)}x{Math.round(sum.format.width*25.4)} , {t(sum.format.surface)}</td>\n                                        <td>{sum.count}</td>\n                                        <td>{tools.Round(sum.format.cost * sum.count)}</td>\n                                    </tr>\n                                ) }\n                                </tbody>\n                            </table>\n\n                        </Paper>\n                        <div className=\"app-print-costs-buttons text-center\">\n                            <button className={\"btn btn-big btn-primary m-2\"}\n                                    onClick={() => {this.props.onClickPrevBtn()}}\n                                    disabled={false}\n                                    title={t('Previous')}\n                                    type=\"button\" >\n                                <Icon>arrow_back</Icon> {t('Previous')}\n                            </button>\n\n                            <button type=\"button\"\n                                    className={\"btn btn-big btn-success m-2\"}\n                                    disabled={this.state.savingImages}\n                                    onClick={()=>{this.checkBeforeSaveImage()}}>\n                                <Icon>print</Icon> {t('Print')}\n                            </button>\n\n                        </div>\n                    </Paper>\n\n\n                </div>\n\n                <div className=\"app-bottomframe w-100 h-10 p-2 position-relative\">\n                    <Paper className=\"h-100 w-100 p-2 app-bg-e\">\n                        {(this.props.app.progressBarValue>=0 && (\n                            <div className=\"app-bottom-progress h-100 p-2 w-100\">\n                                <LinearProgress variant=\"determinate\" value={this.props.app.progressBarValue} />\n                            </div>\n                        ))}\n                    </Paper>\n                </div>\n\n                <Dialog\n                    open={this.state.orderPrinted}\n                    onClose={this.props.onClickNextBtn}\n                    aria-labelledby=\"alert-dialog-title\"\n                    aria-describedby=\"alert-dialog-description\"\n                >\n                    <DialogTitle id=\"alert-dialog-title\">{t('Successful printed')}</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText id=\"alert-dialog-description\">\n                            {t(\"The number of your order is\")}\n                            <span className=\"text-center text-dark\" style={{fontSize:'1.4em', display:'block'}}>{this.state.orderNum}</span>\n                            {t('Dont forget to remove your source.')}\n                            <br/><br/>\n                            {t('Thank you!')}\n                        </DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <button onClick={this.props.onClickNextBtn} className={\"btn btn-big  btn-primary\"} autoFocus>\n                            OK\n                        </button>\n                    </DialogActions>\n                </Dialog>\n\n            </div>\n        );\n    }\n}\n\n","import React from 'react';\nimport '../index.css';\nimport Icon from \"@material-ui/core/Icon\";\nimport Paper from '@material-ui/core/Paper';\n\nexport default class SetupPin extends React.Component {\n    state = {\n        pwd : '',\n    };\n\n    passTyped = (ev) => {\n        this.setState({pwd: ev.target.value});\n        this.props.appSetState({isSetupPassword: ev.target.value});\n    };\n\n    numbClick(numb) {\n        let pwd = this.state.pwd+''+numb;\n        this.setState({pwd: pwd});\n        this.props.appSetState({isSetupPassword: pwd });\n    };\n\n\n    render() {\n        if (!this.props.app.isSetup || this.props.app.isSetupLogged) return null;\n\n        return (\n            <div className=\"app-page-login p-2 w-100 h-100\">\n                <div className=\"app-login-wrapper-bkg app-bg-e0 app-page-start p-2 w-100 h-100\"> </div>\n\n                <div className=\"app-main app-login-wrapper w-100\">\n                    <Paper className=\"app-login p-2\">\n                        <form onSubmit={(ev)=>{this.setState({pwd: ''}); this.props.Login(ev)}}>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"p\">Pin</label>\n                                <input id=\"p\" type=\"text\" autoComplete={'off'} className={\"app-login-pass form-control text-center\"} value={this.state.pwd} onChange={this.passTyped} autoFocus/>\n                            </div>\n                            <div className=\"numbrow\">\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"7\")}\n                                            type=\"button\" > 7\n                                    </button>\n                                </div>\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"8\")}\n                                            type=\"button\" > 8\n                                    </button>\n                                </div>\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"9\")}\n                                            type=\"button\" > 9\n                                    </button>\n                                </div>\n                            </div>\n\n                            <div className=\"numbrow\">\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"4\")}\n                                            type=\"button\" > 4\n                                    </button>\n                                </div>\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"5\")}\n                                            type=\"button\" > 5\n                                    </button>\n                                </div>\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"6\")}\n                                            type=\"button\" > 6\n                                    </button>\n                                </div>\n                            </div>\n\n                            <div className=\"numbrow\">\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"1\")}\n                                            type=\"button\" > 1\n                                    </button>\n                                </div>\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"2\")}\n                                            type=\"button\" > 2\n                                    </button>\n                                </div>\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"3\")}\n                                            type=\"button\" > 3\n                                    </button>\n                                </div>\n                            </div>\n                            <div className=\"numbrow\">\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className={\"btn btn-success btn-medium btn-3d\"}\n                                            disabled={false}\n                                            title=\"Login\"\n                                            type=\"submit\" >\n                                        <Icon>vpn_key</Icon>\n                                    </button>\n                                </div>\n\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"0\")}\n                                            type=\"button\" > 0\n                                    </button>\n                                </div>\n\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className={\"btn btn-medium btn-3d\"}\n                                            onClick={()=>{this.setState({pwd: ''});this.props.Logout()}}\n                                            disabled={false}\n                                            title=\"Logout\"\n                                            type=\"button\" >\n                                        <Icon>close</Icon>\n                                    </button>\n                                </div>\n\n                            </div>\n\n                        </form>\n                    </Paper>\n\n                </div>\n\n            </div>\n\n        )\n    }\n}\n\n","import React from 'react';\nimport './splash-screen.css';\nimport t from \"./i18n\";\nimport {getLangs} from \"./i18n\";\nimport {setLang} from \"./i18n\";\nimport '../index.css';\nimport Icon from \"@material-ui/core/Icon\";\n\n\nexport default class LoaderSplashScreen extends React.Component {\n    state = {\n        caseInfinityLoop: false,\n    };\n\n    componentDidMount() {\n        this.tm = setTimeout( ()=>{ this.setState({caseInfinityLoop:true}) }, 179000);\n    }\n    componentWillUnmount() {\n        if(this.tm) clearTimeout(this.tm);\n    }\n\n    langOnLoad(key) {\n        setLang(key);\n        this.setState({caseInfinityLoop:false});\n    }\n\n    render() {\n\n        let langs = getLangs();\n\n        return (\n            <div className=\"splash-screen app-bg-e\">\n                {this.props.serverError || this.state.caseInfinityLoop ?\n                    <div className='text-center'>\n                        <div className=\"splash-screen-text-wrapper error bg-danger text-light pr-5 pl-5\">\n                            {t('Server error:')}\n                            <br/><br/>\n                            {this.props.serverError}\n                        </div>\n                        <div className=\"p-4\">\n                            <button className={\"btn btn-primary btn-big btn-3d\"}\n                                    onClick={()=>{ document.location.reload();}}\n                                    disabled={false}\n                                    title=\"Refresh\"\n                                    type=\"button\" >\n                                <Icon>update</Icon> {t('Restart')}\n                            </button>\n                        </div>\n\n                    </div>\n                    :\n                    <div className=\"splash-screen-text-wrapper\">\n                        {t('Wait a moment while app loading')}\n                        <div className=\"loading-dot\">.</div>\n                    </div>\n                }\n\n                <div className=\"splash-screen-lang-buttons\">\n                    {langs.map( (lang, index)=>\n                        <div key={index} className=\"m-3 d-inline-block\">\n                            <button className=\"btn btn-success btn-3d p-3\"\n                                    onClick={()=>this.langOnLoad(lang.key)}\n                                    disabled={false}\n                                    title=\"Language\"\n                                    type=\"button\" >\n                                <Icon>language</Icon>{lang.caption}\n                            </button>\n\n                        </div>\n                    )}\n\n                </div>\n\n\n            </div>\n        )\n\n    }\n}\n\n","import React from 'react';\nimport './App.css';\nimport {version} from './version.json';\n\nimport {makeGetUri, THEME} from './tools.js';\nimport axios from \"axios\";\nimport 'bootstrap/dist/css/bootstrap.css';\nimport PageStart from './Components/PageStart';\nimport PageLoadImages from './Components/PageLoadImages';\nimport PageEditor from './Components/PageEditor';\nimport PageSetup from './Components/PageSetup';\nimport PagePrint from './Components/PagePrint';\nimport SetupPin from './Components/SetupPin.js';\n\nimport LoaderSplashScreen from './Components/LoaderSplashScreen';\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport './assets/iconfont/material-icons.css';\nimport './assets/iconfont/test.css';\n\nimport * as tools from \"./tools\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport t from \"./Components/i18n\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\n\n\n// CANCELED:    \n\n// DONE: repeat apply contrast & brightness & color from previous photo (and undo)\n\n// TODO:    - /\n// DONE:       DPI\n// TODO: printMode 'backend - Wait for each file' broken\n// TODO:   printMode frontent\n// TODO:     \n\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.updateSavePageTimer = null;\n        this.appWrapperNode = null;\n        this.needConfigure = false;\n        this.foundStateToRecover = false;\n    }\n    state = {\n        appstate: 'start',\n        pages: {},\n        sources: [],\n        currentSource: null,\n        formats: [],\n        currentFormat: null,\n        images: [],\n        is_loading_init: false,\n\n        editorHeight: 0,\n        editorWidth: 0,\n\n        // needUpdateCanvas: false,\n\n        snackMessage: null,\n        setup: {\n            batchSaveMode: false\n        },\n\n        isAppStarting: true,\n        isSetup: false,\n        isSetupLogged: false,\n        isSetupPassword: '',\n        isUploadEnable: false,\n        isPleaseWait: false,\n        progressBarValue: -1,\n\n        isDebugShow: false,\n\n        appWidth: null,\n        appHeight: null,\n\n        serverError: null,\n        version: version\n    };\n\n\n    appSetState = (stateToSave, fn_callback)=> {\n        let state = this.state;\n        for (let prop in stateToSave) {\n            state[prop] = stateToSave[prop];\n        }\n        this.setState(state,\n            ()=>{\n                if( typeof(fn_callback) === 'function') fn_callback();\n            });\n    };\n\n    appImageChanged = (index, editorState, fn_callback) => {\n        let image = this.state.images[index];\n        for (let prop in editorState) {\n            image.editorState[prop] = editorState[prop];\n        }\n        let images = this.state.images;\n        images[index] = image;\n        this.setState({\n            images: images,\n        }, ()=>{\n            if( typeof(fn_callback) === 'function') fn_callback();\n        })\n    };\n\n\n    appEditorChanged = (clientWidth,clientHeight) => {\n        // console.log(\"appEditorChanged: \"+this.state.editorWidth+\" === \"+clientWidth+\" && \"+this.state.editorHeight+\" === \"+clientHeight)\n\n        if(this.state.editorWidth === clientWidth && this.state.editorHeight === clientHeight) {\n            return;\n        }\n\n        let images = this.state.images;\n        let len = images.length;\n        for(let i=0; i<len; i++ ) {\n            images[i].editorState.initedMask = false;\n        }\n        this.setState({\n            editorWidth: clientWidth,\n            editorHeight: clientHeight,\n            images: images,\n        }, ()=>{\n            if(this.state.currentImage>=0) {\n                console.log('try reinit');\n                this.appImageInitMask(this.state.currentImage, true);\n            }\n        })\n    };\n\n    appImageInitMask(index, force, fn_callback) {\n\n        let image = this.state.images[index];\n        if(image.editorState.initedMask && !force) {\n            if( typeof(fn_callback) === 'function') fn_callback();\n            return;\n        }\n\n        // console.log(p.stateEditorWidth, p.editorWidth, p.stateEditorHeight, p.editorHeight);\n        let formatRatio = (image.format.height && image.format.width ? image.format.height / image.format.width : 1);\n        // console.log('this ratio : '+ratio);\n        let maskTB = 0;\n        let maskLR = 0;\n\n        let editorRatio = this.state.editorHeight / this.state.editorWidth;\n        // console.log('editorWidth:'+this.state.editorWidth, ' editorHeight:'+this.state.editorHeight);\n        if(formatRatio>editorRatio) {\n            maskLR = (this.state.editorWidth-image.format.width/image.format.height*this.state.editorHeight)/2;\n        } else {\n            maskTB = (this.state.editorHeight-image.format.height/image.format.width*this.state.editorWidth)/2;\n        }\n\n        let newState = {\n            maskTB: maskTB,\n            maskLR: maskLR,\n            ratio: (this.state.editorHeight-maskTB*2)/tools.dpi_inch2dots(image.format.height, image.format.dpi),\n            initedMask: true,\n        };\n        // console.log(newState);\n        // if(!ret) {\n            this.appImageChanged(index, newState, ()=>{\n                if( typeof(fn_callback) === 'function') fn_callback();\n            });\n        // }\n\n        // return newState;\n\n    }\n\n    appFormatRotate = (index, fn_callback) => {\n\n        let currentImage = this.state.currentImage;\n        if(index!==undefined) {\n            currentImage = index;\n        }\n        let currentFormat = this.state.images[currentImage].format;\n        let rotated_key = currentFormat.rotated_key;\n        // console.log(rotated_key);\n        if(!this.state.formats[rotated_key]) {\n            this.onMessage(t('Error - format does not exist!'));\n            return;\n        }\n        let format = this.state.formats[rotated_key];\n        let images = this.state.images; //[this.props.app.currentImage];\n        images[currentImage].format = format;\n        images[currentImage].editorState.initedMask = false;\n        images[currentImage].editorState.initedImagePosition = false;\n        images[currentImage].editorState.imageRotate = 0;\n        images[currentImage].editorState.initedFormat = true;\n\n        this.appSetState({images: images}, ()=>{\n            this.appImageInitMask(currentImage, true, fn_callback);\n        });\n\n    };\n\n\n    alignInit = (index, fn_callback)=> {\n        console.log('alignInit', index, fn_callback);\n        let image = this.state.images[index];\n        let format = image.format;\n        let initrotate = false;\n        let format_lanscape = (format.width-format.height)>1;\n        let image_landscape = (image.width-image.height)>1;\n\n        // 1 - no rotate\n        // 3 - 180deg\n        // 6 - 90deg\n        // 8 - 270deg\n        if(!image.editorState.initedFormat) {\n            if(image.orientation === 6 || image.orientation === 8) {\n                console.log('image.orientation === 6 OR 8 - appFormatRotate:', index);\n                this.appFormatRotate(index, ()=>{this.alignInit(index, fn_callback)});\n                return;\n            }\n            if(format_lanscape !== image_landscape) {\n                console.log('format_lanscape !== image_landscape - appFormatRotate:', index);\n                this.appFormatRotate(index, ()=>{this.alignInit(index, fn_callback)});\n                return;\n            }\n        }\n\n        console.log('format_lanscape:', format.width,'>', format.height, '=', format_lanscape);\n        console.log('image_landscape:', image.width,'>', image.height, '=', image_landscape);\n\n        if(format_lanscape !== image_landscape) {\n            initrotate = true;\n                        console.log('initrotate', initrotate);\n        }\n\n        if(initrotate) {\n            if(format_lanscape) {\n                console.log('initrotate alignPortrait', initrotate);\n                this.alignPortrait(index, fn_callback,true, initrotate);\n            } else {\n                console.log('initrotate alignLandscape', initrotate);\n                this.alignLandscape(index, fn_callback, true, initrotate);\n            }\n        } else {\n            if(format_lanscape) {\n                console.log('alignLandscape', initrotate);\n                this.alignLandscape(index, fn_callback, true);\n            } else {\n                console.log('alignPortrait', initrotate);\n                this.alignPortrait(index, fn_callback, true);\n            }\n        }\n    };\n\n    alignLandscape = (index, fn_callback, init, initrotate)=> {\n        let image = this.state.images[index];\n                                // console.log('alignLandscape landscape', image.editorState.ratio);\n        let sliderPositionLR = 0;\n        let imageZoom = image.format.width/image.width;\n        let imgWidth = tools.dpi_inch2dots(image.width, image.format.dpi) * imageZoom * image.editorState.ratio;\n        let imgHeight = tools.dpi_inch2dots(image.height, image.format.dpi) * imageZoom * image.editorState.ratio;\n        let viewportY = this.state.editorHeight - image.editorState.maskTB*2;\n        let sliderPositionTB = (viewportY - imgHeight)/2;\n        let isWhiteFields = viewportY > imgHeight;\n                                // console.log('alignLandscape', 'isWhiteFields', isWhiteFields,)\n\n        console.log('alignLandscape', image.editorState.imageRotate, initrotate);\n\n        if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270 || initrotate) {\n            imageZoom = image.format.width/image.height;\n            imgWidth = tools.dpi_inch2dots(image.width, image.format.dpi) * imageZoom * image.editorState.ratio;\n            imgHeight = tools.dpi_inch2dots(image.height, image.format.dpi) * imageZoom * image.editorState.ratio;\n            sliderPositionTB = (imgWidth-imgHeight)/2 + (viewportY-imgWidth)/2 ;\n            sliderPositionLR = (imgHeight-imgWidth)/2;\n            isWhiteFields = viewportY > imgWidth;\n                                // console.log('alignLandscape', 'isWhiteFields', isWhiteFields,)\n        }\n\n        if(init && isWhiteFields) {\n            this.alignPortrait(index, fn_callback, false, initrotate);\n            return;\n        }\n\n        let editorState = {\n            imageZoom : imageZoom,\n            imageZoomMax: imageZoom*5,\n            imageZoomMin: imageZoom*0.5,\n            sliderPositionTB: sliderPositionTB,\n            sliderPositionLR: sliderPositionLR,\n            imgWidth: imgWidth,\n            imgHeight: imgHeight,\n            initedImagePosition: !(imgWidth===0 && imgHeight===0),\n            needUpdateCanvas: imageZoom>image.editorState.imageZoom,\n        };\n        if(initrotate) editorState['imageRotate']=90;\n\n        this.appImageChanged(index, editorState, fn_callback);\n\n    };\n    alignPortrait = (index, fn_callback, init, initrotate)=> {\n        let image = this.state.images[index];\n                                // console.log('alignPortrait', image.editorState.ratio);\n        let sliderPositionTB = 0;\n        let imageZoom = image.format.height/image.height;\n        let imgWidth = tools.dpi_inch2dots(image.width, image.format.dpi) * imageZoom * image.editorState.ratio;\n        let imgHeight = tools.dpi_inch2dots(image.height, image.format.dpi) * imageZoom * image.editorState.ratio;\n        let viewportX = this.state.editorWidth - image.editorState.maskLR*2;\n        let sliderPositionLR = (viewportX - imgWidth)/2;\n        let isWhiteFields = viewportX > imgWidth;\n                                // console.log('alignPortrait', 'isWhiteFields', isWhiteFields,)\n\n        console.log('alignPortrait', image.editorState.imageRotate, initrotate);\n\n        if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270 || initrotate) {\n            imageZoom = image.format.height/image.width;\n            imgWidth = tools.dpi_inch2dots(image.width, image.format.dpi) * imageZoom * image.editorState.ratio;\n            imgHeight = tools.dpi_inch2dots(image.height, image.format.dpi) * imageZoom * image.editorState.ratio;\n            sliderPositionLR = (imgHeight-imgWidth)/2 + (viewportX-imgHeight)/2 ;\n            sliderPositionTB = (imgWidth-imgHeight)/2;\n            isWhiteFields = viewportX > imgHeight;\n                                // console.log('alignPortrait', 'isWhiteFields', isWhiteFields,)\n        }\n\n        if(init && isWhiteFields) {\n            this.alignLandscape(index, fn_callback, false, initrotate);\n            return;\n        }\n\n        let editorState = {\n            imageZoom: imageZoom,\n            imageZoomMax: imageZoom*5,\n            imageZoomMin: imageZoom*0.5,\n            sliderPositionTB: sliderPositionTB,\n            sliderPositionLR: sliderPositionLR,\n            imgWidth: imgWidth,\n            imgHeight: imgHeight,\n            initedImagePosition: !(imgWidth===0 && imgHeight===0),\n            needUpdateCanvas: imageZoom>image.editorState.imageZoom,\n        };\n        if(initrotate) editorState['imageRotate']=90;\n\n        this.appImageChanged(index, editorState, fn_callback);\n\n    };\n\n    updateDimensions() {\n        if(this.appWrapperNode) {\n            let appWidth = this.appWrapperNode.clientWidth;\n            let appHeight = this.appWrapperNode.clientHeight;\n            if(this.appWrapperNode.clientWidth > this.appWrapperNode.clientHeight) {\n                // console.log(appWidth,appHeight);\n                this.setState({appWidth: appWidth, appHeight: appHeight});\n            }\n        }\n    }\n\n    checkLoadedState = (state)=> {\n        // console.log('checkLoadedState');\n        let fl=state.formats.length;\n        let formats_rotated = [];\n        for(let i=0; i<fl; i++) {\n            if(state.formats[i].rotated===undefined) {\n                state.formats[i].rotated = false;\n                state.formats[i].rotated_key = fl+i;\n                formats_rotated.push({\n                    cost: state.formats[i].cost,\n                    dpi: state.formats[i].dpi,\n                    enabled: false,\n                    rotated: true,\n                    rotated_key: i,\n                    height: state.formats[i].width,\n                    width:  state.formats[i].height,\n                    name: 'm'+state.formats[i].name,\n                });\n\n            }\n        }\n        state.formats = state.formats.concat(formats_rotated);\n\n        state.isUploadEnable = false;\n        delete state.version;\n        delete state.appWidth;\n        delete state.appHeight;\n        state.isAppStarting = false;\n        return state;\n    };\n\n    componentWillUnmount() {\n        window.removeEventListener(\"resize\", this.updateDimensions);\n    }\n    componentDidMount() {\n        window.addEventListener(\"resize\", this.updateDimensions);\n\n        // this.updateDimensions();\n\n        let uri = makeGetUri({'q':'init'});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    if(res.data.data) {\n                        let state = this.checkLoadedState(res.data.data);\n                        if(state.appstate && state.appstate !== 'start') {\n                            this.foundStateToRecover = true;\n                        }\n                        for (let prop in res.data.setup) {\n                            state.setup[prop] = res.data.setup[prop];\n                        }\n                        this.setState(state, ()=>{\n                            this.updateDimensions();\n                            // ---------------------------------------------------\n                            axios.get(makeGetUri({'q':'configure'})).then(res => {\n                                if(res.status===200) {\n                                    if(res.data.error) {\n                                        this.needConfigure = true;\n                                        this.setState({appstate: 'setup'});\n                                    }\n                                }\n                            });\n                            // ---------------------------------------------------\n                        });\n                    }\n                } else {\n                    this.setState({serverError:res.data.error});\n                }\n            } else {\n                this.setState({serverError:'Error: server fail'});\n            }\n        }).catch((error)=>{\n            console.log(error);\n            this.setState({serverError:error.message});\n        });\n    }\n\n    resetApp() {\n        let uri = makeGetUri({'q':'init', 'reset':'reset'});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    if(res.data.data) {\n                        this.foundStateToRecover = false;\n                        let state = this.checkLoadedState(res.data.data);\n                        for (let prop in res.data.setup) {\n                            state.setup[prop] = res.data.setup[prop];\n                        }\n                        this.setState(state, ()=>{ this.updateDimensions(); this.savePages(); });\n                    }\n                }\n            }\n        });\n\n    }\n\n\n\n    onMessage = (msg) => {\n      if(msg) {\n          this.setState({\n              snackMessage: msg\n          })\n      }\n    };\n    onMessageHide = () => {\n        this.setState({\n            snackMessage: null\n        })\n    };\n\n    uploadEnable =(ev)=> {\n        ev.preventDefault();\n\n        let uri = tools.makeGetUri({'q':'login', 'pass': this.state.isSetupPassword});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    this.setState({isUploadEnable:true, isSetup:false});\n                } else {\n                    console.log(res.data.error);\n                    this.Logout();\n                }\n            }\n        });\n\n    };\n\n    Login = (ev) => {\n        ev.preventDefault();\n        // ev.stopPropagation();\n        let uri = tools.makeGetUri({'q':'login', 'pass': this.state.isSetupPassword});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    this.setState({isSetupLogged: true,})\n                } else {\n                    console.log(res.data.error);\n                    this.Logout();\n                }\n            }\n        });\n        return false;\n    };\n\n    Logout = () => {\n        let isSetupLogged = this.state.isSetupLogged;\n        this.setState({isSetup : false, isSetupLogged: false, isSetupPassword: '' },\n            ()=>{\n                    this.savePages();\n                    if(isSetupLogged) {\n                        this.resetApp();\n                    }\n                }\n            );\n\n    };\n\n\n\n    savePages(pageid, pagestate, OKmessage) {\n      let newAppState = this.state;\n\n        if(this.updateSavePageTimer) clearTimeout(this.updateSavePageTimer);\n        this.updateSavePageTimer = setTimeout(()=>{\n            let uri = makeGetUri();\n            const params = new URLSearchParams();\n            params.append('q', 'saveClientState');\n            params.append('state', JSON.stringify(newAppState));\n            axios.post(uri, params ).then(res => {\n                if(res.status===200) {\n                    if(res.data.error==='') {\n                        if(OKmessage) this.onMessage(OKmessage);\n                        // console.log('state saved, '+this.state.appstate);\n                    }\n                }\n            });\n        }, 1700);\n    }\n\n\n    sourceClick(id) {\n      //console.log(id);\n        const source = this.state.sources[id];\n        if(!source.enabled) return;\n\n        if(!source.emptyhide || (source.emptyhide && source.hasFiles))\n            this.setState({currentSource: id})\n    }\n\n    formatClick(id) {\n        //console.log(id);\n        this.setState({currentFormat: id})\n    }\n\n    removeTmp( fn_callback ){\n        let uri = makeGetUri({'q':'removetmp'});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    if( typeof(fn_callback) === 'function') fn_callback();\n                }\n            }\n        });\n    }\n\n    scriptSource = (source, s_key) => {\n        // let s_key = 'scripton';\n        if(source[s_key] && source[s_key]!=='') {\n            let uri = makeGetUri({'q':'scriptSource', 'scripts':source[s_key]});\n            axios.get(uri);\n        }\n    };\n\n    autoclearSource = (source_id) => {\n        if(this.state.sources[source_id].autoclear) {\n            let uri = makeGetUri({'q':'autoclearSource','id':source_id} );\n            axios.get(uri);\n        }\n    };\n\n    ClickNextBtn(args) {\n      switch (this.state.appstate) {\n          case 'start':\n              this.scriptSource(this.state.sources[this.state.currentSource], 'scripton');\n              this.removeTmp(()=>{ this.setState({appstate: 'loadImages'}) });\n              break; // ---------------------------------------------------------------------------------\n\n          case 'loadImages':\n              this.scriptSource(this.state.sources[this.state.currentSource], 'scriptoff');\n              this.setState({appstate:'editor', images:args, currentImage:null, isPleaseWait:false });\n              break; // ---------------------------------------------------------------------------------\n\n          case 'editor':\n              this.setState({appstate:'print' }, ()=>{this.savePages()});\n              break; // ---------------------------------------------------------------------------------\n\n          case 'print':\n              this.autoclearSource(this.state.currentSource);\n              this.resetApp();\n              break; // ---------------------------------------------------------------------------------\n\n          default:\n              alert('no action');\n              break;\n      }\n    }\n\n    ClickPrevBtn() {\n        switch (this.state.appstate) {\n            case 'loadImages':\n                this.autoclearSource(this.state.currentSource);\n                this.resetApp();\n                break; // ---------------------------------------------------------------------------------\n\n            case 'editor':\n                this.scriptSource(this.state.sources[this.state.currentSource], 'scripton');\n                this.setState({appstate: 'loadImages'});\n                break; // ---------------------------------------------------------------------------------\n\n            case 'print':\n                this.setState({appstate: 'editor'});\n                break; // ---------------------------------------------------------------------------------\n\n            default:\n                alert('no action');\n\n        }\n    }\n\n    render() {\n\n        let wrongOrientation = (!this.state.serverError && this.appWrapperNode && this.appWrapperNode.clientHeight > this.appWrapperNode.clientWidth) ? true: false;\n\n        let toRenderd = <div> </div>;\n        let appstate = this.state.appstate;\n        if(this.state.isSetupLogged) {\n            appstate = 'setup';\n        }\n\n        if(this.state.isAppStarting || this.foundStateToRecover ) {\n            toRenderd = <LoaderSplashScreen serverError={this.state.serverError} />;\n        } else {\n            switch (appstate) {\n                case 'setup':\n                    toRenderd =  (\n                        <PageSetup\n                            app={this.state}\n                            onMessage={this.onMessage}\n                            appSetState = {this.appSetState.bind(this)}\n                            Logout = {this.Logout.bind(this)}\n                            savePages={this.savePages.bind(this)}\n                            needConfigure={this.needConfigure}\n                />\n                    );\n                    break;\n                case 'start':\n                    toRenderd =  (\n                        <PageStart\n                            app={this.state}\n                            onMessage={this.onMessage}\n                            onClickSource={(id) => this.sourceClick(id)}\n                            onClickFormat={(id) => this.formatClick(id)}\n                            onClickNextBtn={() => this.ClickNextBtn()}\n                            savePages={this.savePages.bind(this)}\n                            appSetState = {this.appSetState.bind(this)}\n                        />\n                    );\n                    break;\n\n                case 'loadImages':\n                    toRenderd =  (\n                        <PageLoadImages\n                            app={this.state}\n                            onMessage={this.onMessage}\n                            onClickNextBtn={(this.ClickNextBtn.bind(this))}\n                            onClickPrevBtn={() => this.ClickPrevBtn()}\n                            savePages={this.savePages.bind(this)}\n                            appSetState = {this.appSetState.bind(this)}\n                        />\n                    );\n                    break;\n\n                case 'editor':\n                    toRenderd =  (\n                        <PageEditor\n                            app={this.state}\n                            onMessage={this.onMessage}\n                            onClickNextBtn={() => this.ClickNextBtn()}\n                            onClickPrevBtn={() => this.ClickPrevBtn()}\n                            savePages={this.savePages.bind(this)}\n\n                            appSetState = {this.appSetState.bind(this)}\n                            appFormatRotate = {this.appFormatRotate.bind(this)}\n                            appImageInitMask = {this.appImageInitMask.bind(this)}\n                            appEditorChanged = {this.appEditorChanged.bind(this)}\n                            appImageChanged = {this.appImageChanged.bind(this)}\n                            alignInit = {this.alignInit.bind(this)}\n                            alignLandscape = {this.alignLandscape.bind(this)}\n                            alignPortrait = {this.alignPortrait.bind(this)}\n\n\n\n                        />\n                    );\n                    break;\n\n                case 'print':\n                    toRenderd =  (\n                        <PagePrint\n                            app={this.state}\n                            onMessage={this.onMessage}\n                            onClickNextBtn={(this.ClickNextBtn.bind(this))}\n                            onClickPrevBtn={() => this.ClickPrevBtn()}\n                            savePages={this.savePages.bind(this)}\n                            appSetState = {this.appSetState.bind(this)}\n                            alignInit = {this.alignInit.bind(this)}\n                            alignLandscape = {this.alignLandscape.bind(this)}\n                            alignPortrait = {this.alignPortrait.bind(this)}\n                            appImageInitMask = {this.appImageInitMask.bind(this)}\n                        />\n                    );\n                    break;\n\n                default:\n                    toRenderd = (\n                        <div className=\"App\">\n                            Learn React\n                        </div>\n                    );\n            }\n\n        }\n\n\n        let appWidth = this.state.appWidth ? this.state.appWidth : '100%';\n        let appHeight = this.state.appHeight ? this.state.appHeight : '100%';\n        return (\n            <div ref={(node)=>{this.appWrapperNode=node}}\n                style={{width:appWidth, height:appHeight}}\n                className={\"app-wrapper\"}>\n                <CssBaseline />\n                <MuiThemeProvider theme={THEME}>\n                    <SetupPin app={this.state}\n                              appSetState = {this.appSetState.bind(this)}\n                              Login = { this.state.isSetup === 1 ? this.Login.bind(this) :\n                                        this.state.isSetup === 2 ? this.uploadEnable.bind(this) :\n                                        this.Login.bind(this)\n                              }\n                              Logout = {this.Logout.bind(this)}\n                    />\n                    {toRenderd}\n                    <Snackbar\n                        anchorOrigin={{ vertical: 'bottom', horizontal: 'left', }}\n                        autoHideDuration={6000}\n                        open={(this.state.snackMessage!==null)}\n                        onClose={this.onMessageHide}\n                        ContentProps={{\n                            'aria-describedby': 'message-id',\n                        }}\n                        message={<span id=\"message-id\">{this.state.snackMessage}</span>}\n                        action={[\n                            <IconButton\n                                key=\"close\"\n                                aria-label=\"Close\"\n                                color=\"inherit\"\n                                className={'classes.close'}\n                                onClick={this.onMessageHide}\n                            >\n                                <CloseIcon />\n                            </IconButton>\n                        ]}\n                    />\n\n                    {this.state.isPleaseWait && (\n                        <div className=\"app-please-wait-wrp position-fixed\">\n                            <div onClick={()=>{this.setState({isPleaseWait:false})}} className = \"app-please-wait spinner-border text-primary\" role = \"status\" >\n                                <span className = \"sr-only\" > Loading...</span>\n                            </div>\n                        </div>\n                    )}\n\n                    <Dialog\n                        open={wrongOrientation}\n                        onClose={()=>{this.updateDimensions()}}\n                        aria-labelledby=\"alert-dialog-title\"\n                        aria-describedby=\"alert-dialog-description\"\n                    >\n                        <DialogTitle id=\"alert-dialog-title\">{t('Wrong orientation')}</DialogTitle>\n                        <DialogContent>\n                            <DialogContentText id=\"alert-dialog-description\">\n                                {t(\"Please, turn your device to lanscape\")}\n                            </DialogContentText>\n                        </DialogContent>\n                        <DialogActions>\n                            <button onClick={()=>{this.updateDimensions()}} className={\"btn btn-big  btn-primary\"} autoFocus>\n                                OK\n                            </button>\n                        </DialogActions>\n                    </Dialog>\n\n                    <Dialog\n                        open={this.foundStateToRecover}\n                        onClose={()=>{this.foundStateToRecover = false}}\n                        aria-labelledby=\"alert-dialog-title\"\n                        aria-describedby=\"alert-dialog-description\"\n                    >\n                        <DialogTitle id=\"alert-dialog-title\">{version}</DialogTitle>\n                        <DialogContent>\n                            <DialogContentText id=\"alert-dialog-description\">\n                                <strong>{t('Last session terminated abnormally.')}</strong> {t(\"Do you want to recover last session?\")}\n                            </DialogContentText>\n                        </DialogContent>\n                        <DialogActions>\n                            <button onClick={()=>{this.foundStateToRecover = false; this.updateDimensions()}} className={\"btn btn-3d p-3 btn-success \"} autoFocus>\n                                {t(\"Recover last\")}\n                            </button>\n                            <button onClick={()=>{this.resetApp()}} className={\"btn btn-3d p-3  btn-primary\"} autoFocus>\n                                {t(\"Start new session\")}\n\n                            </button>\n                        </DialogActions>\n                    </Dialog>\n\n\n\n                </MuiThemeProvider>\n\n            </div>\n        )\n\n    }\n\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n//import 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\n\nimport App from './App';\n\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}