{"version":3,"sources":["tools.js","Components/i18n.js","Components/PageStart/index.js","Components/PageLoadImages/index.js","Components/PageEditor/ImageThumb.js","Components/PageEditor/ImageEditorZoomCanvas.js","Components/PageEditor/ImageEditorZoom.js","Components/PageEditor/ImageEditorColorCanvas.js","Components/PageEditor/ImageEditorBrightness.js","Components/PageEditor/ImageEditorColor.js","Components/PageEditor/ImageEditor.js","Components/PageEditor/index.js","Components/PageSetup/PageSetupFormats.js","Components/PageSetup/PageSetupArchive.js","Components/PageSetup/PageSetupSources.js","Components/PageSetup/PageSetupParameters.js","Components/PageSetup/index.js","Components/PagePrint/index.js","Components/SetupPin.js","Components/LoaderSplashScreen.js","App.js","index.js"],"names":["p","query","document","location","search","substr","result","split","forEach","part","item","decodeURIComponent","getJsonFromUrl","AJAX_URI","undefined","url","window","href","THEME","createMuiTheme","palette","primary","main","makeGetUri","param","str","key","hasOwnProperty","push","encodeURIComponent","uri","join","ColorCorrection","pixelArray","gain","contrast","gainR","gainG","gainB","intercept","i","data","length","saturate","amount","r","g","b","ColorSepia","calculateImageDimensions","app","indexImage","image","images","realRatio","editorState","imageZoom","ratio","viewportWidth","editorWidth","maskLR","viewportHeight","editorHeight","maskTB","sX","sliderPositionLR","sY","sliderPositionTB","sW","imgWidth","sH","imgHeight","imageRotate","centerX","TB","LR","cW","cH","cX","cY","pX","pY","pW","pH","dpi_dots2inch","dots","dpi","dpi_inch2dots","inch","Round","x","dec","String","replace","parseFloat","isNaN","toFixed","parseInt","setLang","newLang","i18n","LANG","getLangs","langs","prop","caption","langCaption","t","en","ua","Wait a moment while app loading","Cancel","Warning","Next","Previous","Print","Save","Loaded already","Name","Height","Width","Surface","glance","matte","Files","Selected","Cost","Are you sure?","error","error status, let see log","Select CD, flash card or other source, then select format what you want, and press button","Select folder from list, and choose pictures to print. To view in fullscreen click on the name of picture","To continue you should select at least one image","Select all","Select none","No images","Current state of editor images will be lost.","Format","Amount","Total","Successful printed","The number of your order is","Dont forget to remove your source.","Thank you!","PageStart","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","clientUploadProgress","progress","percentage","Math","floor","loaded","total","appSetState","progressBarValue","clientUpload","event","formData","FormData","uploadfiles","target","files","isPleaseWait","config","onUploadProgress","Ev","headers","Content-Type","append","axios","post","tools","q","isSetupPassword","then","checkSources","catch","console","log","finally","openLangsPanel","setState","isLangsOpen","state","checkSourceTimer","checkSourceTimerMax","checkSourceTimerCount","clearTimeout","_this2","sources","slice","len","hasFiles","prevProps","prevState","snapshot","isUploadEnable","inputUpload","click","initRefresh","_this3","_loop","enabled","emptyhide","id","get","res","status","setTimeout","bind","_this4","langsList","react_default","a","createElement","ClickAwayListener_default","onClickAway","Paper_default","className","map","lang","index","onClick","scope","Icon_default","source","Card_default","currentSource","onClickSource","CardContent_default","src","icon","alt","name","formats","format","currentFormat","onClickFormat","height","width","round","surface","cost","disabled","onClickNextBtn","type","style","minWidth","title","isSetup","version","htmlFor","ref","input","multiple","onChange","e","LinearProgress_default","variant","value","React","Component","resetState","folders","tree","currentFolder","is_loadind_images","expandedImage","progressAjax","previewMaxResize","isAutoclearLoading","isAutoclearLoaded","PageLoadImages","nextPage","selectedimages","filter","marked","dirs","dir","params","URLSearchParams","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","_d","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_f","onDownloadProgress","progressEvent","percentCompleted","lengthComputable","thumbname","thumbs","lastIndexOf","extension","width_pixel","height_pixel","orientation","thumb","works","count","imageZoomMax","imageZoomMin","colorR","colorG","colorB","brightness","sepia","initedImagePosition","initedMask","currentTab","response","responderEnd","onMessage","imagesContainer","isAutoclearTimer","autoclear","onClickDir","direction","scrollTop","scrollHeight","rowH","ceil","currentDir","list","level","_L","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","precache","imagesScroll","reopenThumb","_this5","newIm","reopen","mode","changed","children","viewHeight","clientHeight","is_appeared","rect","getBoundingClientRect","bottom","top","_this6","node","onScroll","PageLoadImages_ImagePreview","assign","itemIndex","onExpand","showExpandImg","onMark","MarkImage","setpreviewMaxResize","role","onClickPrevBtn","scrollImages","markAllImages","PageLoadImages_ModalExpand","itemCurrent","itemPrev","itemNext","onClose","hideExpandImg","ImagePreview","_this7","rotate","imgWrapper","clientWidth","imgStyle","backgroundImage","max","onDoubleClick","Fab_default","stopPropagation","aria-label","PureComponent","ModalExpand","_this8","imgsrc","ImageThumb","nodeThumb","scrollRef","thumbWidth","selected","scrollIntoView","boxStyles","styles","clrZoom","clrFilters","clrColors","onSelect","encodeURI","backgroundColor","color","contrastText","fontSize","ImageEditorZoomCanvas","onDragStart","preventDefault","movingStart","dragImage","dragX","dragY","movingOn","screenX","screenY","shiftX","shiftY","currentImage","appImageChanged","movingStop","canvasImg","Image","crossOrigin","_upd","updateCanvas","assertThisInitialized","onload","renderedImageIndex","imgSrc","appImageInitMask","appEditorChanged","myImgContainer","img_src","alignInit","myCanvas","ctx","getContext","canvasX","canvasY","drawImage","getImageData","putImageData","isDebugShow","_calculateImageDimens","z","lineWidth","strokeStyle","strokeRect","w","newImage","rL","rR","rT","rB","maskTBStyle","viewportStyles","left","maskLRStyle","canvasWidth","canvasHeight","canvasStyle","transform","onMouseMove","onMouseUp","draggable","onMouseDown","ImageEditorZoom","sliderZoom","L","T","newState","needUpdateCanvas","sliderChangeTB","sliderChangeLR","Slider_default","classes","vertical","min","ImageEditorZoomCanvas_ImageEditorZoomCanvas","trackAfter","alignTop","alignLeft","alignLandscape","alignPortrait","alignRight","alignBottom","appFormatRotate","ImageEditorColorCanvas","fakeThins","ImageEditorBrightness","sliderChangeBrightness","sliderChangeContrast","sliderChangeSaturate","sliderResetBrightness","sliderResetContrast","sliderResetSaturate","sliderChangeSepia","ImageEditorColorCanvas_ImageEditorColorCanvas","FormControlLabel_default","control","Switch_default","checked","label","sliderChangeColorR","sliderChangeColorG","sliderChangeColorB","sliderResetColorR","sliderResetColorG","sliderResetColorB","track","step","ImageEditor","showTabButton","tabChange","editorWrapper","editorTabs","ImageEditorZoom_ImageEditorZoom","ImageEditorBrightness_ImageEditorBrightness","ImageEditorColor_ImageEditorBrightness","right","changeCountImage","PageEditor","checkUndo","undo","history","current","clickUndo","currentUndo","skipChanges","checkRedo","clickRedo","selectImage","changeCurrentImage","newCurrent","countSumm","scrollIntoViewIfNeed","domNode","scrollIntoViewIfNeeded","openFormatsPanel","isFormatsOpen","repeatColors","colors","getColorsToRepeat","hasChange","confirmBack","imagesCount","imagesSum","nextProps","nextState","nextContext","wasChanged","l","leftChain","rightChain","compare2Objects","y","Date","RegExp","Number","toString","isPrototypeOf","constructor","prototype","indexOf","pop","arguments","start","savePages","back","formatsList","formatChange","rightwidget","backPressed","colSpan","dialogConfirmBack","Dialog_default","open","backConfirmed","aria-labelledby","aria-describedby","DialogTitle_default","DialogContent_default","DialogContentText_default","DialogActions_default","autoFocus","display","visibility","processCanvasNode","ImageEditor_ImageEditor","processCanvas","ImageThumb_ImageThumb","PageSetupFormats","editedFormats","formatNew","last","formatRemove","splice","ev","f","rotated","JSON","stringify","shift","newIndex","tmp","data-hint","h","portrait","formatMove","size","formatSave","PageSetupArchive","arhives","currentArchive","isLoading","archiveFiles","currentArchiveFile","isMultipleSelectOrders","isDeleteConfirmation","loadList","d","folder","archCount","as","_remove","archiveCount","archiveTotal","archiveDate","date","time","archiveFile","selectedArchiveCount","selectArchive","selectFile","file","toggleMultiple","tryDeleteArchive","deleteArchive","PageSetupSources","editedSources","listIcons","listScripts","scriptTxt","sourceNew","sourceRemove","sourceChange","script","data-value","path","scripton","viewScript","scriptoff","sourceMove","sourcesSave","maxWidth","readOnly","PageSetupParameters","inputNP","inputNP2","setup","removeOlder","removeArchiveOlder","inputTyped","needConfigure","reload","namingOption","autoComplete","savePass","processMode","setupChange","batchSaveMode","copiesMode","printNaming","n","copiesNaming","removeOlderToggle","saveParameters","PageSetup","openTab","tab","PageSetupFormats_PageSetupFormats","PageSetupSources_PageSetupSources","PageSetupParameters_PageSetupParameters","PageSetupArchive_PageSetupArchive","appWidth","appHeight","confirm","Logout","PagePrint","orderFolder","orderNum","savingImages","orderPrinted","saveImage","first","party","imageslen","processed","savePartialProgress","autoInitImage","canvas","fn_callback","img","alpha","fillStyle","fillRect","zX","zY","translate","PI","sx","sy","toDataURL","DataURL","job_done","temporary","_flen","ims","summary","totalSum","cnt","j","sum","checkBeforeSaveImage","SetupPin","pwd","passTyped","numb","isSetupLogged","onSubmit","Login","numbClick","LoaderSplashScreen","caseInfinityLoop","tm","serverError","langOnLoad","App","appstate","pages","is_loading_init","snackMessage","isAppStarting","stateToSave","rotated_key","initedFormat","initrotate","format_lanscape","image_landscape","init","viewportY","isWhiteFields","viewportX","checkLoadedState","fl","formats_rotated","concat","msg","onMessageHide","uploadEnable","pass","resetApp","scriptSource","s_key","scripts","autoclearSource","source_id","updateSavePageTimer","appWrapperNode","force","removeEventListener","updateDimensions","addEventListener","message","reset","pageid","pagestate","OKmessage","newAppState","args","removeTmp","alert","wrongOrientation","toRenderd","LoaderSplashScreen_LoaderSplashScreen","PageSetup_PageSetup","PageStart_PageStart","sourceClick","formatClick","ClickNextBtn","PageLoadImages_PageLoadImages","ClickPrevBtn","PageEditor_PageEditor","PagePrint_PagePrint","CssBaseline_default","core_styles","theme","SetupPin_SetupPin","Snackbar_default","anchorOrigin","horizontal","autoHideDuration","ContentProps","action","IconButton_default","Close_default","ReactDOM","render","src_App_0","getElementById"],"mappings":"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","file":"static/js/main.1db4439e.chunk.js","sourcesContent":["import { createMuiTheme } from '@material-ui/core/styles';\n\nlet p = getJsonFromUrl();\n// const AJAX_URI must has finishing slash\nexport const AJAX_URI = p.url!==undefined ? p.url : (window.location.href==='http://localhost:3000/' ? 'http://localhost:89/' : '/server/');\n\nexport const THEME = createMuiTheme({\n    palette: {\n        primary: {\n            main:'#007bff',\n        },\n    }\n});\n\nexport function getJsonFromUrl() {\n    let url = document.location.search;\n    var query = url.substr(1);\n    var result = {};\n    query.split(\"&\").forEach(function(part) {\n        var item = part.split(\"=\");\n        result[item[0]] = decodeURIComponent(item[1]);\n    });\n    return result;\n}\nexport function makeGetUri(param) {\n\n    let str = [];\n    for (let key in param)\n        if (param.hasOwnProperty(key)) {\n            str.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(param[key]));\n        }\n    let uri = str.join(\"&\");\n    uri = AJAX_URI+(uri!=='' ? '?'+uri : '');\n\n    return uri;\n}\n\n// 1 inch ≈ 2.54 cm\n// 300 dpi = 300/2.54 ≈ 118.11 dpcm (dot per cantimeter)\n\nexport function ColorCorrection(pixelArray, gain, contrast, gainR, gainG, gainB) {\n    const intercept = 128 * (1 - contrast);\n\n    for (let i = 0; i < pixelArray.data.length; i += 4) {\n        pixelArray.data[i] *= gainR * gain;\n        pixelArray.data[i + 1] *= gainG *gain;\n        pixelArray.data[i + 2] *= gainB *gain;\n\n        pixelArray.data[i] = pixelArray.data[i] * contrast + intercept;\n        pixelArray.data[i+1] = pixelArray.data[i+1] * contrast + intercept;\n        pixelArray.data[i+2] = pixelArray.data[i+2] * contrast + intercept;\n\n        // pixelArray.data[i] = 255 * Math.pow(pixelArray.data[i] / 255, 1 / gamma);\n        // pixelArray.data[i + 1] = 255 * Math.pow(pixelArray.data[i + 1] / 255, 1 / gamma);\n        // pixelArray.data[i + 2] = 255* Math.pow(pixelArray.data[i + 2] / 255, 1 / gamma);\n        //\n        // pixelArray.data[i] = 255 * (pixelArray.data[i]/255 + offset);\n        // pixelArray.data[i + 1] = 255 * (pixelArray.data[i + 1] / 255 + offset);\n        // pixelArray.data[i + 2] = 255 * (pixelArray.data[i + 2] / 255 + offset);\n    }\n    return pixelArray;\n}\n\nexport function saturate(pixelArray, amount) {\n    let r,g,b;\n\n    for (let i=0; i < pixelArray.data.length; i += 4) {\n        r = (.213 + .787 * amount) * pixelArray.data[i]\n            + (.715 - .715 * amount) * pixelArray.data[i + 1]\n            + (.072 - .072 * amount) * pixelArray.data[i + 2];\n        g = (.213 - .213 * amount) * pixelArray.data[i]\n            + (.715 + .285 * amount) * pixelArray.data[i + 1]\n            + (.072 - .072 * amount) * pixelArray.data[i + 2];\n        b = (.213 - .213 * amount) * pixelArray.data[i]\n            + (.715 - .715 * amount) * pixelArray.data[i + 1]\n            + (.072 + .928 * amount) * pixelArray.data[i + 2];\n\n        pixelArray.data[i] = r;\n        pixelArray.data[i + 1] = g;\n        pixelArray.data[i + 2] = b;\n    }\n    return pixelArray;\n}\n\nexport function ColorSepia (pixelArray) {\n    let r,g,b;\n    for (let i=0; i < pixelArray.data.length; i += 4) {\n\n        r = pixelArray.data[i] * 0.393 + pixelArray.data[i+1] * 0.769 + pixelArray.data[i+2] * 0.189;\n        g = pixelArray.data[i] * 0.349 + pixelArray.data[i+1] * 0.686 + pixelArray.data[i+2] * 0.168;\n        b = pixelArray.data[i] * 0.272 + pixelArray.data[i+1] * 0.534 + pixelArray.data[i+2] * 0.131;\n\n        pixelArray.data[i] = r;\n        pixelArray.data[i+1] = g;\n        pixelArray.data[i+2] = b;\n    }\n    return pixelArray;\n}\n\nexport function calculateImageDimensions(app, indexImage) {\n    const image = app.images[indexImage];\n    const realRatio = image.editorState.imageZoom*image.editorState.ratio;\n\n    let viewportWidth = app.editorWidth - image.editorState.maskLR*2;\n    let viewportHeight = app.editorHeight - image.editorState.maskTB*2;\n    // let formatWidth = dpi_inch2dots(image.format.width, image.format.dpi);\n    // let formatHeight = dpi_inch2dots(image.format.height, image.format.dpi);\n\n\n\n    let sX = image.editorState.sliderPositionLR*-1;\n    let sY = image.editorState.sliderPositionTB*-1;\n    let sW = image.editorState.imgWidth;\n    let sH = image.editorState.imgHeight;\n    // console.log(' Pre-Source : ',  Math.round(sX), Math.round(sY), Math.round(sW), Math.round(sH));\n    if(image.editorState.imageRotate===0 || image.editorState.imageRotate===180) {\n        if(sX>0) {\n            sW -= sX;\n        } else if(sX<0) {\n            sX=0;\n        }\n        if(sW+image.editorState.sliderPositionLR+sX>viewportWidth) {\n            sW = viewportWidth-image.editorState.sliderPositionLR-sX;\n        }\n        if(sW<0) sW = 0;\n        // console.log(' Pre-Source : ',  Math.round(sX), Math.round(sY), Math.round(sW), Math.round(sH));\n        if(sY>0) {\n            sH -= sY;\n            if(sY>image.editorState.imgHeight) sY = image.editorState.imgHeight;\n        } else if(sY<0) {\n            sY=0;\n        }\n        if(sH+image.editorState.sliderPositionTB+sY>viewportHeight) {\n            sH = viewportHeight-image.editorState.sliderPositionTB-sY;\n        }\n        if(sH<0) sH = 0;\n\n    } else { // --------------------------------------------rotated 90 / 270\n        let centerX = image.editorState.sliderPositionLR+image.editorState.imgWidth/2;\n        let centerY = image.editorState.sliderPositionTB+image.editorState.imgHeight/2;\n\n        let TB = centerY - image.editorState.imgWidth/2;\n        sX = 0;\n        if(TB+sW>viewportHeight) { sW = viewportHeight-TB; }\n        if(TB<0) { sX=TB*-1; sW-=sX; }\n        if(TB>viewportHeight){ sW = 0; }\n\n        let LR = centerX - image.editorState.imgHeight/2;\n        sY = 0;\n        if(LR+sH>viewportWidth) { sY = LR+sH-viewportWidth; sH-=sY;  }\n        if(LR<0) { sH += LR; }\n        if(LR>viewportWidth){ sH = 0; }\n\n    }\n    if(image.editorState.imageRotate===180 || image.editorState.imageRotate===270) { // 180 --- upside // 270 --- upside\n        sX = image.editorState.imgWidth - sW - sX;\n        sY = image.editorState.imgHeight - sH - sY;\n    }\n\n\n    // console.log(' Pre-Source : ',  Math.round(sX), Math.round(sY), Math.round(sW), Math.round(sH));\n\n    let cW = sW; //#######################################################################################\n    let cH = sH; //#######################################################################################\n\n    sX /= realRatio;\n    sY /= realRatio;\n    sW /= realRatio;\n    sH /= realRatio;\n    // console.log(' ------- Source : ',  Math.round(sX), Math.round(sY), Math.round(sW), Math.round(sH), 'dims:', Math.round(sX+sW),Math.round(sY+sH));\n\n\n    let cX = image.editorState.sliderPositionLR;\n    let cY = image.editorState.sliderPositionTB;\n    // console.log(' ------- Pre-Canvas : ',  Math.round(cX), Math.round(cY), Math.round(cW), Math.round(cH));\n    if(cX<0) {\n        cX = 0;\n    }\n    if(cY<0) {\n        cY = 0;\n    }\n\n    // console.log(' ------- Canvas : ',  Math.round(cX), Math.round(cY), Math.round(cW), Math.round(cH) );\n\n    cX /=image.editorState.ratio;\n    cY /=image.editorState.ratio;\n    cW /=image.editorState.ratio;\n    cH /=image.editorState.ratio;\n\n\n    let pX = image.editorState.sliderPositionLR;\n    let pY = image.editorState.sliderPositionTB;\n    let pW = image.editorState.imgWidth;\n    let pH = image.editorState.imgHeight;\n    // console.log('Pre-values: ',  Math.round(pX), Math.round(pY), Math.round(pW), Math.round(pH));\n    if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) {\n        // let imageCenterX = pX + pW/2;\n        // let imageCenterY = pY + pH/2;\n        pX = (pX + pW/2) - pH/2;\n        pY = (pY + pH/2) - pW/2;\n\n        pW = image.editorState.imgHeight;\n        pH = image.editorState.imgWidth;\n    }\n    // console.log('Pre-values: ',  Math.round(pX), Math.round(pY), Math.round(pW), Math.round(pH));\n    if(pW+pX>viewportWidth) {\n        pW = viewportWidth-pX;\n    }\n    if(pX<0) {\n        pW += pX;\n        pX = 0;\n    }\n    if(pW<0) pW = 0;\n\n    if(pH+pY>viewportHeight) {\n        pH = viewportHeight-pY;\n    }\n    if(pY<0) {\n        pH += pY;\n        pY = 0;\n    }\n    if(pH<0) pH = 0;\n\n\n    pX /=image.editorState.ratio;\n    pY /=image.editorState.ratio;\n    pW /=image.editorState.ratio;\n    pH /=image.editorState.ratio;\n\n    // console.log('------Ret-values: ', Math.round(pX), Math.round(pY), Math.round(pW), Math.round(pH));\n\n\n\n    return {\n        sX: sX, sY: sY, sW: sW, sH: sH,\n\n        cX: cX, cY: cY, cW: cW, cH: cH,\n\n        pX: pX, pY: pY, pW: pW, pH: pH,\n    };\n\n}\n\nexport function processImage(canvas, app, index, fn_callback) {\n    // this.props.parentProps.image\n    const image = app.images[index];\n\n    console.log(image);\n    if(typeof fn_callback !== 'function') return;\n\n    let img = new Image();\n    img.crossOrigin = 'anonymous';\n\n    img.onload=function(){\n\n\n        if(image.editorState.imageRotate === 0 || image.editorState.imageRotate === 180) {\n            canvas.width = dpi_inch2dots(image.format.width, image.format.dpi);\n            canvas.height = dpi_inch2dots(image.format.height, image.format.dpi);\n        } else {\n            canvas.width = dpi_inch2dots(image.format.height, image.format.dpi);\n            canvas.height = dpi_inch2dots(image.format.width, image.format.dpi);\n        }\n\n\n        const p = calculateImageDimensions(app, index);\n\n        const ctx = canvas.getContext('2d', {alpha: false});\n        ctx.fillStyle = \"#ffffff\";\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n                        console.log('processImage', p);\n\n        if(image.editorState.imageRotate !== 0) {\n            ctx.drawImage(img, p.sX, p.sX, p.sW, p.sH, p.cX, p.cY, p.cW, p.cH);\n        } else {\n            let zX = canvas.width/-2;\n            let zY = canvas.height/-2;\n            if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) {\n                let t = canvas.width;\n                canvas.width = canvas.height;\n                canvas.height = t;\n            }\n            ctx.translate(canvas.width / 2, canvas.height / 2);\n            ctx.rotate(image.editorState.imageRotate * Math.PI / 180);\n            ctx.drawImage(img, p.sx, p.sy, p.sW, p.sH, zX + p.cX, zY + p.cY, p.cW, p.cH);\n\n        }\n\n        let pixelArray = ctx.getImageData(Math.floor(p.pX), Math.floor(p.pY), Math.ceil(p.pW), Math.ceil(p.pH) );\n\n        if(image.editorState.brightness!==1 || image.editorState.contrast!==1 || image.editorState.colorR!==1 || image.editorState.colorG!==1 || image.editorState.colorB!==1 ) {\n            pixelArray = ColorCorrection(pixelArray, image.editorState.brightness, image.editorState.contrast, image.editorState.colorR, image.editorState.colorG, image.editorState.colorB);\n        }\n        if(image.editorState.sepia) {\n            pixelArray = ColorSepia(pixelArray, 1);\n        }\n        if(image.editorState.saturate!==1) {\n            pixelArray = saturate(pixelArray, image.editorState.saturate);\n        }\n\n        ctx.putImageData(pixelArray, Math.floor(p.pX), Math.floor(p.pY));\n\n        //const dataURL = this.myCanvas.toDataURL('image/png');\n        fn_callback( canvas.toDataURL('image/jpeg', 0.7) );\n    };\n    img.src= makeGetUri()+image.src;\n\n}\n\nexport function dpi_dots2cm(dots, dpi) {\n    if(dpi===undefined || !dpi) dpi = 300;\n    return dots / (dpi / 2.54);\n}\n\nexport function dpi_cm2dots(cm, dpi) {\n    if(dpi===undefined || !dpi) dpi = 300;\n    return cm * (dpi / 2.54);\n}\n\nexport function dpi_dots2inch(dots, dpi) {\n    if(dpi===undefined || !dpi) dpi = 300;\n    return dots / dpi;\n}\n\nexport function dpi_inch2dots(inch, dpi) {\n    if(dpi===undefined || !dpi) dpi = 300;\n    return inch * dpi;\n}\n\nexport function Round(x, dec) {\n    if(x===undefined) x=0;\n    x =  String(x).replace(/,/g,'.');\n    x = parseFloat(x);\n    if(isNaN(x)) x = 0;\n\n    if(dec===undefined) {\n        return x.toFixed(2);\n    } else {\n        return x.toFixed( parseInt(dec) );\n    }\n}\n\nexport function deepCompare () {\n    var i, l, leftChain, rightChain;\n\n    function compare2Objects (x, y) {\n        var p;\n\n        // remember that NaN === NaN returns false\n        // and isNaN(undefined) returns true\n        if (isNaN(x) && isNaN(y) && typeof x === 'number' && typeof y === 'number') {\n            return true;\n        }\n\n        // Compare primitives and functions.\n        // Check if both arguments link to the same object.\n        // Especially useful on the step where we compare prototypes\n        if (x === y) {\n            return true;\n        }\n\n        // Works in case when functions are created in constructor.\n        // Comparing dates is a common scenario. Another built-ins?\n        // We can even handle functions passed across iframes\n        if ((typeof x === 'function' && typeof y === 'function') ||\n            (x instanceof Date && y instanceof Date) ||\n            (x instanceof RegExp && y instanceof RegExp) ||\n            (x instanceof String && y instanceof String) ||\n            (x instanceof Number && y instanceof Number)) {\n            return x.toString() === y.toString();\n        }\n\n        // At last checking prototypes as good as we can\n        if (!(x instanceof Object && y instanceof Object)) {\n            return false;\n        }\n\n        if (x.isPrototypeOf(y) || y.isPrototypeOf(x)) {\n            return false;\n        }\n\n        if (x.constructor !== y.constructor) {\n            return false;\n        }\n\n        if (x.prototype !== y.prototype) {\n            return false;\n        }\n\n        // Check for infinitive linking loops\n        if (leftChain.indexOf(x) > -1 || rightChain.indexOf(y) > -1) {\n            return false;\n        }\n\n        // Quick checking of one object being a subset of another.\n        for (p in y) {\n            if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {\n                return false;\n            }\n            else if (typeof y[p] !== typeof x[p]) {\n                return false;\n            }\n        }\n\n        for (p in x) {\n            if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {\n                return false;\n            }\n            else if (typeof y[p] !== typeof x[p]) {\n                return false;\n            }\n\n            switch (typeof (x[p])) {\n                case 'object':\n                case 'function':\n\n                    leftChain.push(x);\n                    rightChain.push(y);\n\n                    if (!compare2Objects (x[p], y[p])) {\n                        return false;\n                    }\n\n                    leftChain.pop();\n                    rightChain.pop();\n                    break;\n\n                default:\n                    if (x[p] !== y[p]) {\n                        return false;\n                    }\n                    break;\n            }\n        }\n\n        return true;\n    }\n\n    if (arguments.length < 1) {\n        return true; //Die silently? Don't know how to handle such case, please help...\n        // throw \"Need two or more arguments to compare\";\n    }\n\n    for (i = 1, l = arguments.length; i < l; i++) {\n\n        leftChain = [];\n        rightChain = [];\n\n        if (!compare2Objects(arguments[0], arguments[i])) {\n            return false;\n        }\n    }\n\n    return true;\n}","\nexport function setLang(newLang) {\n    if(i18n[newLang]) window.LANG = newLang;\n}\n\nexport function getLangs() {\n    let langs = [];\n    for(let prop in i18n) {\n        langs.push({key:prop, caption:i18n[prop].langCaption});\n    }\n    return langs;\n}\n\nexport default function t(str) {\n    let LANG = 'ua';\n    if(window.LANG) LANG = window.LANG;\n    return (i18n[LANG][str]===undefined && i18n[LANG][str]!=='') ? str : i18n[LANG][str];\n}\n\nconst i18n = {\n    'en' : {\n        'langCaption' : 'English',\n    },\n    'ua' : {\n        'langCaption' : 'Українська',\n\n        'Wait a moment while app loading': 'Зачекайте трішки, програма завантажується',\n        'Cancel': 'Відміна',\n        'Warning': 'Увага',\n        'Next': 'Далі',\n        'Previous': 'Назад',\n        'Print': 'Друк',\n        'Save': 'Зберегти',\n        'Loaded already': 'Отримано файлів',\n        'Name':'Назва',\n        'Height':'Висота',\n        'Width':'Ширина',\n        'Surface':'Поверхня',\n        'glance':'глянець',\n        'matte':'матовий',\n\n        'Files': 'Файли',\n        'Selected': 'Вибрано',\n        'Cost': 'Вартість',\n\n        'Are you sure?': 'Ви упевнені?',\n        'error': 'помилка ',\n        'error status, let see log': 'статус помилки виведено в консоль',\n\n        'Select CD, flash card or other source, then select format what you want, and press button':\n            'Виберіть CD чи флешку чи інший носій із Вашими знімками. Потім виберіть бажаний формат. Для продовження натисніть',\n\n        'Select folder from list, and choose pictures to print. To view in fullscreen click on the name of picture' :\n            'Виберіть папку, та відмічайте потрібні фото. Щоб збільшити фото, натисніть на його назву',\n\n        'To continue you should select at least one image': 'Щоб продовжити потрібно вибрати хоча б одне зображення ',\n        'Select all': 'Вибрати всі',\n        'Select none': 'Не вибирати нічого',\n        'No images': 'Зображень не знайдено',\n\n        'Current state of editor images will be lost.': 'Зроблені правки будуть втрачені при поверненні.',\n\n\n        'Format': 'Формат',\n        'Amount': 'К-сть',\n        'Total': 'Всього',\n        'Successful printed': 'Успішно надруковано',\n        'The number of your order is': 'Номер вашого замовлення',\n        'Dont forget to remove your source.' : 'Не забудьте забрати Ваш носій.',\n        'Thank you!': 'Дякуємо!',\n\n    }\n};","import React from 'react';\nimport * as tools from \"../../tools\";\nimport t from \"../i18n\";\nimport {getLangs} from \"../i18n\";\nimport {setLang} from \"../i18n\";\nimport './index.css';\nimport Icon from '@material-ui/core/Icon';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Paper from \"@material-ui/core/Paper\";\nimport axios from \"axios\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\n\nexport default class PageStart extends React.Component {\n    constructor(props) {\n        super(props);\n        this.checkSourceTimer = null;\n        this.checkSourceTimerMax = 7200; // about 10 hours\n        this.checkSourceTimerCount = this.checkSourceTimerMax;\n\n        this.state = {\n            isLangsOpen: false,\n        }\n    }\n\n\n    componentWillUnmount() {\n        if(this.checkSourceTimer) clearTimeout(this.checkSourceTimer);\n    }\n\n    componentDidMount() {\n        let sources = this.props.app.sources.slice();\n        let len = sources.length;\n\n        for(let i=0; i<len; i++)\n            sources[i].hasFiles = false;\n        this.props.appSetState({sources : sources}, ()=>{\n            this.checkSources(true);\n        });\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if(prevProps.app.isUploadEnable !== this.props.app.isUploadEnable && this.props.app.isUploadEnable){\n            if(this.inputUpload) this.inputUpload.click();\n        }\n    }\n\n    checkSources(initRefresh) {\n        if(!this.props.app.sources) return;\n\n        let sources = this.props.app.sources.slice();\n        let len = sources.length;\n\n        if(initRefresh) {\n            this.checkSourceTimerCount = 0;\n        }\n\n        for(let i=0; i<len; i++) {\n            if(sources[i].enabled && sources[i].emptyhide) {\n                let uri = tools.makeGetUri({'q':'checkEmptySource', 'id': i});\n                axios.get(uri).then(res => {\n                    if(res.status===200) {\n                        if(res.data.error==='') {\n                            sources[i].hasFiles = res.data.data;\n                            this.props.appSetState({sources : sources});\n                        }\n                    }\n\n                });\n            }\n        }\n        if(this.checkSourceTimerCount<this.checkSourceTimerMax)\n            this.checkSourceTimer = setTimeout( this.checkSources.bind(this), 9000 );\n\n        this.checkSourceTimerCount++;\n    }\n\n\n    clientUploadProgress = (progress) => {\n        let percentage = Math.floor((progress.loaded * 100) / progress.total);\n        // console.log(myFileId)\n        this.props.appSetState({ progressBarValue: percentage });\n\n        // console.log(percentage);\n    };\n\n    clientUpload = (event)=>{\n        let formData = new FormData();\n        let uploadfiles = event.target.files;\n\n        if(uploadfiles.length===0) return;\n\n        this.props.appSetState({isPleaseWait:true});\n        let config = {\n            onUploadProgress: (Ev)=>this.clientUploadProgress(Ev),\n            headers: { 'Content-Type': 'multipart/form-data' },\n        };\n\n        // formData.append(\"q\", 'src-upload');\n        for (let i=0; i<uploadfiles.length; i++) {\n            formData.append(\"images[]\", uploadfiles[i]);\n        }\n\n        axios.post( tools.makeGetUri({'q':'src-upload', 'p':this.props.app.isSetupPassword}), formData, config )\n            .then(()=>{\n                this.checkSources();\n            })\n            .catch((error)=>{\n                console.log(error);\n            })\n            .finally(()=>{\n                if(event.target) event.target.files = null;\n                this.props.appSetState({isPleaseWait:false, progressBarValue:-1});\n            });\n    };\n\n    openLangsPanel=(key)=>{\n        if(key) {\n            setLang(key);\n        }\n        this.setState({isLangsOpen:!this.state.isLangsOpen});\n    };\n\n\n\n    render() {\n        let sources = (this.props.app.sources ? this.props.app.sources : []);\n        let langs = getLangs();\n        let langsList = this.state.isLangsOpen ? (\n            <ClickAwayListener onClickAway={()=>{this.openLangsPanel()}}>\n                <Paper className=\"app-main-change-langs scrollbar position-absolute\">\n                    <table className=\"table-langs\">\n                        {langs.map( (lang, index)=>\n                            <tbody key={index} onClick={()=>this.openLangsPanel(lang.key)}>\n                            <tr>\n                                <th scope=\"row\" className=\"text-left\"><Icon>language</Icon> {lang.caption}</th>\n                            </tr>\n                            </tbody>\n\n                            )}\n                    </table>\n                </Paper>\n            </ClickAwayListener>\n        ) : null;\n\n\n        return (\n            <div className=\"app-page app-bg-e0 app-page-start w-100 h-100\">\n                <div className=\"app-main h-85\">\n                    <div className=\"app-main-selectors w-85 h-100 d-inline-block\">\n                        <div  className=\"app-main-selectors-source text-center w-50 h-100 p-2 d-inline-block\">\n                            <Paper className=\"scrollbar p-2 h-100 app-bg-e  position-relative\">\n                                {sources.map( (source, index)=>\n                                    <Card key={index}\n                                          className={'app-source-item d-inline-block m-2'+(this.props.app.currentSource===index ? ' text-white bg-primary' : '')+(source.enabled ? '' : ' app-source-disabled')+((source.emptyhide && !source.hasFiles) ? ' app-source-emptyhide' : '')}\n                                          onClick={() => this.props.onClickSource(index)}\n                                    >\n                                        <CardContent>\n                                            <div className=\"card-img\">\n                                                <img src={tools.makeGetUri()+source.icon} alt={source.name} className=\"app-source-icon\"/>\n                                            </div>\n                                            {source.enabled && source.name}\n\n                                        </CardContent>\n                                    </Card>\n                                )}\n\n                            </Paper>\n                        </div>\n                        <div className=\"app-main-selectors-format w-50 h-100 p-2 d-inline-block position-relative\">\n                            <Paper className=\"scrollbar p-2 h-100 app-bg-e  position-relative\">\n                                {this.props.app.formats.map( (format, index)=>format.enabled ?\n                                    <Card key={index}\n                                          className={'app-format-item m-2'+(this.props.app.currentFormat===index ? ' text-white bg-primary' : '')}\n                                          onClick={() => this.props.onClickFormat(index)}\n                                    >\n                                        <CardContent>\n                                            <div className=\"app-main-selectors-format-wrp\">\n                                                <div className=\"_w30\">{format.name}</div>\n                                                <div className=\"_w20\">\n                                                    {format.height}\"x {format.width}\"\n                                                </div>\n                                                <div className=\"_w20\">\n                                                    {Math.round(format.height*25.4)}x{Math.round(format.width*25.4)}\n                                                </div>\n                                                <div className=\"_w15\">{t(format.surface)}</div>\n                                                <div className=\"_w15 text-right\">{tools.Round(format.cost)}</div>\n                                            </div>\n\n                                        </CardContent>\n                                    </Card>\n                                :\n                                    ''\n                                )}\n                            </Paper>\n                        </div>\n\n                    </div>\n\n                    <div className=\"app-main-rightwidget w-15 h-100 p-2 d-inline-block\">\n                        <Paper className=\"h-100 p-2 app-bg-e position-relative\">\n                            <div className=\"_fabwrapper\">\n                                <button\n                                    className={\"btn btn-big btn-primary\"}\n                                    disabled={this.props.app.currentSource===null || this.props.app.currentFormat===null}\n                                    onClick={() => this.props.onClickNextBtn()}\n                                    type=\"button\">\n                                    <Icon>arrow_forward</Icon> {t('Next')}\n                                </button>\n                            </div>\n\n                            <div className=\"_fabwrapper\">\n                                <button\n                                    className=\"btn btn-big btn-success mt-4\"\n                                    disabled={this.checkSourceTimerCount<this.checkSourceTimerMax}\n                                    onClick={() => this.checkSources(true)}\n                                    type=\"button\">\n                                    <Icon>refresh</Icon> {t('Refresh')}\n                                </button>\n                            </div>\n\n\n                            <div className=\"bottom-absolute w-100\">\n\n                                <div className=\"_fabwrapper\">\n                                    <div className=\"app-main-change-langs-wrapper position-relative\">\n                                        {langsList}\n                                        <button className=\"btn btn-big btn-light text-success\"\n                                                style={{minWidth:'10vh', width:'auto'}}\n                                                onClick={this.openLangsPanel}\n                                                disabled={false}\n                                                title={t('Language')}\n                                                type=\"button\" >\n                                            <Icon>language</Icon>\n                                            <div>\n                                                {t('langCaption')}\n                                            </div>\n                                        </button>\n\n                                    </div>\n                                </div>\n\n\n                                <div className=\"_fabwrapper\">\n                                    <button type=\"button\"\n                                            className={\"btn btn-big btn-success\"}\n                                            disabled={false}\n                                            onClick={()=>{this.props.appSetState({isSetup:1})}}>\n                                        <Icon>build</Icon>\n                                        <div>\n                                            {this.props.app.version}\n                                        </div>\n                                    </button>\n                                </div>\n\n                            </div>\n\n\n                        </Paper>\n                    </div>\n\n                </div>\n\n                <div className=\"app-bottomframe p-2 h-15 w-100\">\n                    <Paper className=\"p-2 app-bg-e h-100 w-100 app-bottom-msg-wrp position-relative\">\n\n                        {this.props.app.isUploadEnable && (\n                            <label htmlFor=\"file-input\">\n                                <input id=\"file-input\" ref={input=>this.inputUpload=input} type=\"file\" multiple onChange={(e)=>this.clientUpload(e)} />\n                                <Icon className=\"_icon text-white text-success\">info</Icon>\n                            </label>\n\n                        )}\n                        {!this.props.app.isUploadEnable && (\n                            <Icon onClick={()=>{this.props.appSetState({isSetup:2})}} className=\"_icon text-white\">info</Icon>\n                        )}\n\n                        <div className=\"_msg\">\n                            {t('Select CD, flash card or other source, then select format what you want, and press button')} '{t('Next')}'\n                        </div>\n\n                        {(this.props.app.progressBarValue>=0 && (\n                            <div className=\"app-bottom-progress h-100 p-2 w-100\">\n                                <LinearProgress variant=\"determinate\" value={this.props.app.progressBarValue} />\n                            </div>\n                        ))}\n\n                    </Paper>\n                </div>\n\n            </div>\n\n\n        );\n    }\n}\n\n","import React, {PureComponent} from 'react';\nimport * as tools from \"../../tools\";\nimport axios from \"axios\";\nimport t from \"../i18n\";\n\nimport './index.css';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Icon from \"@material-ui/core/Icon\";\nimport Fab from '@material-ui/core/Fab';\nimport Paper from '@material-ui/core/Paper';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n// import ImageThumb from \"../PageEditor/ImageThumb\";\n\nconst resetState = {\n    folders: [],\n    tree: [],\n    currentFolder: null,\n    is_loadind_images: true,\n    expandedImage: null,\n    images: [],\n    progressAjax: {},\n    previewMaxResize: null,\n    isAutoclearLoading: false,\n    isAutoclearLoaded: 0,\n};\n\nexport default class PageLoadImages extends React.Component {\n    constructor(props) {\n        super(props);\n        this.imagesContainer = null;\n        this.isAutoclearTimer = null;\n\n        this.state = resetState;\n    }\n\n\n    componentDidMount() {\n        // if(this.props.app.pages['loadImages']) {\n        //     this.setState( this.props.app.pages['loadImages'] );\n        // } else {\n        //     this.onClickDir(null);\n        // }\n        if(this.props.app.sources[this.props.app.currentSource].autoclear) {\n            this.setState({isAutoclearLoading:true}, ()=>{this.onClickDir(null);});\n        } else {\n            this.onClickDir(null);\n        }\n\n\n    }\n\n\n    scrollImages(direction) {\n        // console.log(this.imagesContainer);\n\n        if(this.imagesContainer) {\n            console.log('scrollTop', this.imagesContainer.scrollTop);\n            console.log('scrollHeight', this.imagesContainer.scrollHeight);\n            let rowH = this.imagesContainer.scrollHeight/Math.ceil((this.state.images.length/3) );\n            console.log('rowCount', rowH);\n            this.imagesContainer.scrollTop += rowH*direction;\n        }\n    }\n\n    onClickDir(index) {\n        let currentDir = (index && this.state.folders ? this.state.folders[index].dir : '' );\n        let uri = '';\n\n        if(this.state.isAutoclearLoading) {\n\n            uri = tools.makeGetUri({'q':'source', 'id': this.props.app.currentSource, dir: currentDir});\n            axios.get(uri).then(res => {\n                if(res.status===200) {\n                    if(res.data.error==='') {\n                        this.setState({ isAutoclearLoaded: res.data.data.length } );\n                    }\n                }\n            });\n\n            this.isAutoclearTimer = setTimeout( ()=>{this.onClickDir()}, 3000);\n\n        } else { // ------------------------------------------- full load folders and images\n\n            if(this.isAutoclearTimer) clearTimeout(this.isAutoclearTimer);\n\n            let _d = '';\n            let folders = [{\n                'list': this.props.app.currentSource,\n                'source': this.props.app.sources[this.props.app.currentSource],\n                'name': this.props.app.sources[this.props.app.currentSource].name,\n                'dir': _d,\n                'level': 0,\n            }];\n            this.setState({folders: folders, currentFolder: null });\n\n            uri = tools.makeGetUri({'q':'folders', 'id': this.props.app.currentSource, dir: currentDir });\n            axios.get(uri).then(res => {\n                if(res.status===200) {\n                    if(res.data.error==='') {\n                        var _L = 1;\n                        for (let i=0; i<res.data.tree.length; i++) {\n                            _d += (_d!=='' ? '/' : '')+res.data.tree[i];\n                            let _f = {\n                                'list': this.props.app.currentSource,\n                                'name': res.data.tree[i],\n                                'dir': _d,\n                                'level': _L,\n                            };\n                            if(_L<5) _L++;\n                            folders.push(_f);\n                        }\n\n                        for (let _f of res.data.data) {\n                            _f.level = _L;\n                            folders.push(_f);\n                        }\n                        this.setState({\n                            folders: folders,\n                            currentFolder: res.data.tree.length,\n                        });\n\n                        this.setState({images: [], is_loadind_images: true });\n\n                        let progress = 3;\n                        this.props.appSetState({ progressBarValue:progress });\n                        let uri = tools.makeGetUri({'q':'source', 'precache':true, 'id': this.props.app.currentSource, dir: currentDir});\n                        axios.get(uri, {\n                            onDownloadProgress: (progressEvent) => {\n                                let percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n                                progress = progressEvent.lengthComputable ? percentCompleted : progress;\n                                // console.log(progress);\n                                this.props.appSetState({ progressBarValue: progress })\n                            }\n                        })\n                            .then((/*response*/) => {\n                                this.props.appSetState({ progressBarValue:-1 });\n\n                                uri = tools.makeGetUri({'q':'source', 'id': this.props.app.currentSource, dir: currentDir});\n                                axios.get(uri).then(res => {\n                                    if(res.status===200) {\n                                        if(res.data.error==='') {\n                                            this.setState({ images: res.data.data }, ()=>{this.imagesScroll()} );\n                                        }\n                                    }\n                                    this.setState({is_loadind_images: false});\n                                });\n\n\n                            }).catch(error => {\n                            if (error.response) {\n                                console.log(error.responderEnd);\n                                this.props.onMessage('testProgress error: '+error.responderEnd);\n                                progress = -1;\n                                this.props.appSetState({ progressBarValue:-1 })\n                            }\n                        });\n\n                    }\n                }\n            });\n\n        }\n\n\n    }\n\n\n    showExpandImg(index) {\n        this.setState({expandedImage: null} , ()=>{\n            this.setState({expandedImage: index}, ()=>{this.reopenThumb(index)})\n        })\n    }\n    reopenThumb(index) {\n        //image.name\n        let newIm = this.state.images.slice();\n        let reopen = newIm[index].name;\n        newIm[index].name = '';\n        this.setState({images: newIm}, ()=>{\n            newIm[index].name = reopen;\n            this.setState({images: newIm});\n        });\n\n    }\n\n    hideExpandImg() {\n        this.setState({expandedImage: null})\n    }\n    MarkImage(index){\n        let newIm = this.state.images.slice();\n        newIm[index].marked = !newIm[index].marked;\n        this.setState({images: newIm});\n    }\n\n    markAllImages(mode) {\n        let newIm = this.state.images;\n        for(let i=0; i<newIm.length; i++) {\n            newIm[i].marked = mode;\n        }\n        this.setState({images: newIm});\n    }\n\n\n    setpreviewMaxResize(value) {\n        this.setState({previewMaxResize:value});\n    }\n\n    nextPage = ()=> {\n\n        // args - this.state.images\n        const selectedimages = this.state.images.filter(function(x){return x.marked});\n        if(selectedimages.length===0) {\n            this.props.onMessage(t('To continue you should select at least one image'));\n            return;\n        }\n        const dirs = selectedimages.map( (image)=> { return image.dir;} );\n        const files = selectedimages.map( (image)=> { return image.name;} );\n\n        let uri = tools.makeGetUri();\n        const params = new URLSearchParams();\n        params.append('q', 'movetowork');\n        params.append('id', this.props.app.currentSource);\n        params.append('maxWidth', (this.state.previewMaxResize ? this.state.previewMaxResize : 300));\n\n        for(let _d of dirs ) params.append('dirs[]', _d);\n        for(let _f of files ) params.append('files[]', _f);\n\n\n            let progress = 3;\n            this.props.appSetState({ progressBarValue: progress, isPleaseWait:true });\n            axios.post(uri, params, {\n                onDownloadProgress: (progressEvent) => {\n                    let percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n                    progress = progressEvent.lengthComputable ? percentCompleted : progress;\n                    // console.log(progress);\n                    this.props.appSetState({ progressBarValue: progress })\n                }\n            })\n                .then((/*response*/) => {\n                    progress = -1;\n                    this.props.appSetState({ progressBarValue:-1 });\n\n                    let uri = tools.makeGetUri({'q':'workpath'});\n                    axios.get(uri).then(res => {\n                        if(res.status===200) {\n                            if(res.data.error==='') {\n                                let dpi =  this.props.app.formats[this.props.app.currentFormat].dpi ? this.props.app.formats[this.props.app.currentFormat].dpi : 300;\n                                const images = selectedimages.map( (image)=> {\n                                    let thumbname = res.data.data.thumbs+image.dir+ image.name.substr(0, image.name.lastIndexOf(\".\")) +\".jpg\";\n                                    return {\n                                        name: image.name,\n                                        extension: image.extension,\n                                        width: tools.dpi_dots2inch(image.width, dpi),\n                                        height: tools.dpi_dots2inch(image.height, dpi),\n                                        width_pixel: image.width,\n                                        height_pixel: image.height,\n                                        orientation : image.orientation,\n                                        thumb: thumbname.replace('?', '%3F'),\n                                        src: res.data.data.works+image.name,\n                                        format: this.props.app.formats[this.props.app.currentFormat],\n                                        count: 1,\n                                        editorState: {\n\n                                            maskTB: 0,\n                                            maskLR: 0,\n                                            imageZoom: 1.0,\n                                            imageZoomMax: 1.9,\n                                            imageZoomMin: 0.1,\n                                            imageRotate: 0,\n                                            colorR: 1.0,\n                                            colorG: 1.0,\n                                            colorB: 1.0,\n                                            brightness: 1,\n                                            contrast: 1,\n                                            saturate: 1,\n                                            sepia: false,\n\n                                            sliderPositionTB: 0,\n                                            sliderPositionLR: 0,\n\n                                            initedImagePosition: false,\n                                            initedMask: false,\n                                            ratio: 1.0,\n                                            imgWidth: image.width,\n                                            imgHeight: image.height,\n                                            currentTab: 0,\n\n                                        },\n\n\n                                };\n                                } );\n                                this.props.onClickNextBtn(images);\n\n                            }\n                        }\n                    });\n\n                    //console.log(images);\n                    // this.setState({appstate: 'editor', images: images});\n                }).catch(error => {\n                    if (error.response) {\n                        console.log('movetowork error', error.responderEnd);\n                        this.props.onMessage('movetowork error: '+error.responderEnd);\n                        progress = -1;\n                        this.props.appSetState({ progressBarValue:-1, isPleaseWait:false })\n                    }\n                });\n\n    };\n\n    imagesScroll() {\n        // console.log(this.imagesContainer.children);\n        let images = this.state.images.slice();\n        let changed = false;\n        if(this.imagesContainer && this.imagesContainer.children) {\n            let viewHeight = this.imagesContainer.clientHeight;\n            let len = this.imagesContainer.children.length;\n            for(let i=0; i<len; i++) {\n                if(images[i] && !images[i].is_appeared) {\n                    let rect = this.imagesContainer.children[i].getBoundingClientRect();\n                    let is_visible = !(rect.bottom < 0 || rect.top - viewHeight >= 0);\n                    if(is_visible) {\n                        images[i].is_appeared = true;\n                        changed = true;\n                    }\n                }\n            }\n        }\n        if(changed) {\n            this.setState({images:images});\n        }\n    }\n\n\n\n    render() {\n\n        const selectedimages = this.state.images.filter(function(x){return x.marked});\n        const cost = this.props.app.formats[this.props.app.currentFormat].cost;\n\n        return (\n\n            <div className=\"app-page app-bg-e0 app-page-start w-100 h-100\">\n                <div className=\"app-main h-90\">\n                    <div className=\"d-inline-block w-85 h-100\">\n                        <div className=\"app-main-selectors w-100 h-100 d-flex flex-row\">\n                            <div  className=\"app-main-selectors-folder h-100 p-2 flex-grow-1 flex-shrink-1\">\n                                <Paper className=\"scrollbar p-2 h-100 app-bg-e\">\n                                    {this.state.folders.map( (dir, index)=>\n                                        <Card key={index}\n                                              className={'m-1 app-dir-item level'+dir.level+' '+(this.state.currentFolder===index ? ' text-white bg-primary' : '')}\n                                              onClick={() => this.onClickDir(index) }\n                                        >\n                                            <CardContent>\n                                                {dir.source && (\n                                                    <img src={tools.makeGetUri()+dir.source.icon} alt={dir.source.name} className=\"app-dir-item-icon\"/>\n                                                )}\n                                                {dir.name}\n                                                {index===0 &&\n                                                <Icon className=\"float-right\" >refresh</Icon>\n                                                }\n                                            </CardContent>\n                                        </Card>\n                                    )}\n                                </Paper>\n                            </div>\n                            <div className=\"app-main-selectors-image h-100 p-2 flew-grow-0 flex-shrink-0\">\n                                <Paper className=\"h-100 position-relative app-bg-e\">\n                                    <div  ref={(node)=>{this.imagesContainer=node}}\n                                          onScroll={()=>this.imagesScroll()}\n                                          className=\"p-2 h-100 scrollbar\">\n                                            {this.state.images.map( (image, index)=>\n                                                <ImagePreview\n                                                    key={image.name}\n                                                    image={image}\n                                                    itemIndex={index}\n                                                    imagesContainer = {this.imagesContainer}\n                                                    onExpand={()=>this.showExpandImg(index)}\n                                                    onMark={()=>this.MarkImage(index)}\n                                                    setpreviewMaxResize={()=>this.setpreviewMaxResize.bind(this)}\n                                                    {...this.props}\n                                                />\n                                            )}\n\n                                    </div>\n\n                                    {(!this.state.is_loadind_images && this.state.images.length===0) && (\n                                        <div className='app-source-noimages h-100 text-primary' >\n                                            {t('No images')}\n                                        </div>\n                                    )}\n\n                                    {(this.state.is_loadind_images && !this.state.isAutoclearLoading) && (\n                                        <div className = \"list-images-loader spinner-border text-primary\" role = \"status\" >\n                                            <span className = \"sr-only\" > Loading...</span>\n                                        </div>\n\n                                    )}\n\n                                </Paper>\n                            </div>\n\n                        </div>\n\n                    </div>\n                    <div className=\"app-main-rightwidget w-15 h-100 p-2 d-inline-block\">\n                        <Paper className=\"h-100 p-2 app-bg-e position-relative\">\n                            <div className=\"_fabwrapper\">\n                                <button className={\"btn btn-big btn-primary\"}\n                                        onClick={() => this.nextPage()}\n                                        disabled={false}\n                                        title={t(\"Next\")}\n                                        type=\"button\" >\n                                    <Icon>arrow_forward</Icon> {t('Next')}\n                                </button>\n                            </div>\n\n                            <div className=\"_fabwrapper\">\n                                <button className={\"btn btn-big btn-primary\"}\n                                        onClick={() => {this.props.onClickPrevBtn()}}\n                                        disabled={false}\n                                        title={t(\"Previous\")}\n                                        type=\"button\" >\n                                    <Icon>arrow_back</Icon> {t(\"Previous\")}\n                                </button>\n                            </div>\n\n\n                            <div className=\"_fabwrapper mt-4\">\n                                <button className={\"btn btn-success\"}\n                                        onClick={()=>this.scrollImages(-1)}\n                                        disabled={false}\n                                        title={t(\"up\")}\n                                        type=\"button\" >\n                                    <Icon>expand_less</Icon>\n                                </button>\n                            </div>\n\n                            <div className=\"_fabwrapper\">\n                                <button className={\"btn btn-success mr-2\"}\n                                        onClick={() => this.markAllImages(true)}\n                                        disabled={false}\n                                        title={t(\"Select all\")}\n                                        type=\"button\" >\n                                    <Icon>filter</Icon>\n                                </button>\n\n                                <button className={\"btn btn-success\"}\n                                        onClick={() => this.markAllImages(false)}\n                                        disabled={false}\n                                        title={t(\"Select none\")}\n                                        type=\"button\" >\n                                    <Icon>filter_none</Icon>\n                                </button>\n                            </div>\n\n                            <div className=\"_fabwrapper\">\n                                <button className={\"btn btn-success\"}\n                                        onClick={()=>this.scrollImages(1)}\n                                        disabled={false}\n                                        title={t(\"down\")}\n                                        type=\"button\" >\n                                    <Icon>expand_more</Icon>\n                                </button>\n                            </div>\n\n\n                            <div className=\"app-main-rightwidget-tablewrp\">\n                                <table className=\"table\">\n                                    <tbody>\n                                    <tr>\n                                        <th scope=\"row\">{t('Files')}</th>\n                                        <th scope=\"row\">{this.state.images.length}</th>\n                                    </tr>\n                                    <tr>\n                                        <th scope=\"row\">{t('Selected')}</th>\n                                        <th scope=\"row\">{selectedimages.length}</th>\n                                    </tr>\n                                    <tr>\n                                        <th scope=\"row\">{t('Cost')}</th>\n                                        <th scope=\"row\">{tools.Round(selectedimages.length*cost)}</th>\n                                    </tr>\n                                    </tbody>\n                                </table>\n\n                            </div>\n\n                        </Paper>\n\n                    </div>\n\n                </div>\n\n                <div className=\"app-bottomframe w-100 h-10 p-2 position-relative\">\n                    <Paper className=\"p-2 app-bg-e h-100 w-100 app-bottom-msg-wrp\">\n                        <Icon className=\"_icon text-white\">info</Icon>\n                        <div className=\"_msg\">\n                            {t('Select folder from list, and choose pictures to print. To view in fullscreen click on the name of picture')}\n                        </div>\n                    </Paper>\n\n                    {(this.props.app.progressBarValue>=0 && (\n                    <div className=\"app-bottom-progress h-100 p-2 w-100\">\n                        <LinearProgress variant=\"determinate\" value={this.props.app.progressBarValue} />\n                    </div>\n                    ))}\n                </div>\n\n                {this.state.isAutoclearLoading && (\n                    <div className=\"app-please-wait-wrp position-fixed\">\n\n                        <Paper className=\"app-page-loadimages-wait p-3\">\n                            <div className=\"app-source-icon-wrp\">\n                                <img src={tools.makeGetUri()+this.props.app.sources[this.props.app.currentSource].icon} alt={this.props.app.sources[this.props.app.currentSource].name} className=\"app-source-icon\"/>\n                            </div>\n                            {this.props.app.sources[this.props.app.currentSource].name}\n                            <div className=\"_loaded p-3\">\n                                {t('Loaded already')}: {this.state.isAutoclearLoaded}\n                            </div>\n\n                            <div className=\"_fabwrapper\">\n                                <button className={\"btn btn-big btn-success\"}\n                                        onClick={()=>{this.setState({isAutoclearLoading:false}, ()=>{this.onClickDir()}) }}\n                                        disabled={false}\n                                        title={t(\"OK\")}\n                                        type=\"button\" >\n                                    {t('Next')}\n                                </button>\n                            </div>\n\n                        </Paper>\n\n                    </div>\n                )}\n\n\n                <ModalExpand\n                    image={this.state.expandedImage!==null ? this.state.images[this.state.expandedImage] : null}\n                    itemCurrent={this.state.expandedImage}\n                    itemPrev={this.state.expandedImage>0 ? this.state.expandedImage-1: null}\n                    itemNext={this.state.expandedImage<(this.state.images.length-2) ? this.state.expandedImage+1 : null}\n                    onExpand={this.showExpandImg.bind(this)}\n                    onMark={this.MarkImage.bind(this)}\n                    onClose={this.hideExpandImg.bind(this)}\n                />\n            </div>\n        );\n    }\n}\n\nclass ImagePreview extends PureComponent {\n\n    render() {\n        const image = this.props.image;\n        // this.props.image.orientation\n        // 1 - no rotate\n        // 3 - 180deg\n        // 6 - 270deg\n        // 8 - 90deg\n        var rotate = \"\";\n        switch (this.props.image.orientation) {\n            case 3:\n                rotate = \" rotate180\";\n                break;\n            case 6:\n                rotate = \" rotate90\";\n                break;\n            case 8:\n                rotate = \" rotate270\";\n                break;\n            default:\n                break;\n        }\n\n        let previewMaxResize = 300;\n        if(this.props.previewMaxResize) {\n            previewMaxResize = this.props.previewMaxResize;\n        } else {\n            if(this.imgWrapper) {\n                previewMaxResize = this.imgWrapper.clientWidth;\n                this.props.setpreviewMaxResize(previewMaxResize);\n            }\n        }\n\n        let imgStyle = {backgroundImage: 'url('+tools.makeGetUri({'q':'img', 'id':image.list, dir:image.dir, 'src':image.name, 'max':previewMaxResize})+')'};\n\n        return (\n            <Card className='app-source-image-item d-inline-block m-1 position-relative' >\n                <CardContent className={\"p-0\"}\n                     onClick={()=>this.props.onMark()}\n                     onDoubleClick={()=>this.props.onExpand(this.props.itemIndex)}\n                >\n                    <div ref={(node)=>{this.imgWrapper=node}}\n                        className={\"app-source-image-item-img-wrapper p-1 \"+(image.marked ? ' text-white bg-primary': '')}>\n                        {image.is_appeared &&\n                        <div className={\"app-source-image-item-img border \"+rotate} style={imgStyle} />\n                        }\n                        {!image.is_appeared &&\n                        <div className=\"app-source-image-item-img border \" >\n                        </div>\n                        }\n\n                        <div className='app-source-image-item-toggle position-absolute'>\n                            <Fab className=\"bg-primary text-light\"\n                                onClick={(e)=> {e.stopPropagation(); this.props.onMark()}}\n                                aria-label=\"Check\" >\n                                <Icon>check</Icon>\n                            </Fab>\n                        </div>\n                        <div className='app-source-image-item-fullscreen position-absolute'>\n                            <Fab className=\"bg-success text-light\"\n                                onClick={()=>this.props.onExpand(this.props.itemIndex)}\n                                aria-label=\"Fullscreen\" >\n                                <Icon>zoom_in</Icon>\n                            </Fab>\n                        </div>\n\n\n                        <div className=\"app-selectimages-item-text text-center m-1\">\n                            {image.name}\n                        </div>\n\n                    </div>\n                </CardContent>\n            </Card>\n        )\n    }\n}\n\nclass ModalExpand extends PureComponent {\n\n    render() {\n        const image = this.props.image;\n\n        if (image===null) return null;\n\n        var rotate = \"\";\n        switch (image.orientation) {\n            case 3:\n                rotate = \" rotate180\";\n                break;\n            case 6:\n                rotate = \" rotate90\";\n                break;\n            case 8:\n                rotate = \" rotate270\";\n                break;\n            default:\n                break;\n        }\n\n        let imgsrc = tools.makeGetUri({'q':'img', 'id':image.list, dir:image.dir, 'src':image.name, 'max':-1});\n\n        return (\n            <div className=\"app-modal\" onClick={()=>this.props.onClose()}>\n                <div className=\"app-modal-main position-fixed\">\n                        <div className={\"rotate-wrp app-source-image-expanded rounded\"+rotate+(image.marked ? ' bg-primary': '')}>\n                            <img src={imgsrc} alt=\"zoomed\" onClick={(e)=> {e.stopPropagation(); this.props.onMark(this.props.itemCurrent)}} />\n                        </div>\n\n                </div>\n\n                <div\n                    onClick={(e)=>{if(this.props.itemPrev===null)return; e.stopPropagation(); this.props.onExpand(this.props.itemPrev)}}\n                    className='app-image-expanded-button _prev position-absolute'>\n                    <Fab disabled={this.props.itemPrev===null} aria-label=\"Previous\">\n                        <Icon>navigate_before</Icon>\n                    </Fab>\n                </div>\n\n                <div\n                    onClick={(e)=> {e.stopPropagation(); this.props.onMark(this.props.itemCurrent)}}\n                    className='app-image-expanded-button _check position-absolute'>\n                    <Fab\n                        aria-label=\"Check\" >\n                        <Icon className=\"text-success\">check</Icon>\n                    </Fab>\n                </div>\n\n                <div\n                    onClick={(e)=>{if(this.props.itemNext===null)return; e.stopPropagation(); this.props.onExpand(this.props.itemNext)}}\n                    className='app-image-expanded-button _next position-absolute'>\n                    <Fab disabled={this.props.itemNext===null}\n                         aria-label=\"Next\">\n                        <Icon>navigate_next</Icon>\n                    </Fab>\n                </div>\n\n                <div\n                    onClick={(e)=>{e.stopPropagation(); this.props.onClose()}}\n                    className='app-image-expanded-button _close position-absolute'>\n                    <Fab aria-label=\"Close\" >\n                        <Icon>close</Icon>\n                    </Fab>\n                </div>\n\n            </div>\n        );\n\n\n    }\n\n}\n","import React, {PureComponent} from \"react\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\n\nimport * as tools from \"../../tools\";\nimport Icon from \"@material-ui/core/Icon\";\nimport {THEME} from \"../../tools\";\n\n\nexport default class ImageThumb extends PureComponent {\n    constructor(props){   // Optional, declare a class field to improve readability\n        super(props);\n        this.nodeThumb = null;\n        this.scrollRef = null;\n\n        this.state = {\n            thumbWidth: '100px',\n        }\n    }\n\n    componentDidMount() {\n        if(this.nodeThumb) {\n            if(this.state.thumbWidth !== this.nodeThumb.clientHeight) {\n                this.setState({\n                    thumbWidth: this.nodeThumb.clientHeight, //this is not an error, need square\n                })\n            }\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if(this.scrollRef && this.props.selected) {\n            this.props.scrollIntoView(this.scrollRef);\n        }\n    }\n\n    render() {\n        const image = this.props.image;\n        // this.props.image.orientation\n        // 1 - no rotate\n        // 3 - 180deg\n        // 6 - 270deg\n        // 8 - 90deg\n        let rotate = \"\";\n        switch (image.orientation) {\n            case 3:\n                rotate = \" rotate180\";\n                break;\n            case 6:\n                rotate = \" rotate90\";\n                break;\n            case 8:\n                rotate = \" rotate270\";\n                break;\n            default:\n                break;\n        }\n        let boxStyles = {width: this.state.thumbWidth, height: this.state.thumbWidth}; //this is not an error, need square\n\n        let styles = {width: '100%', height: 'auto'};\n        if(image.height>image.width) {\n            styles = {width: 'auto', height: '100%'};\n        }\n\n\n        let _icon_enabled = 'inherit';\n        let _icon_disabled = 'disabled';\n        let clrZoom = _icon_disabled;\n        let clrFilters = _icon_disabled;\n        let clrColors = _icon_disabled;\n        if(image.editorState) {\n            if(image.editorState.initedImagePosition) clrZoom = _icon_enabled;\n            if(image.editorState.brightness!==1) clrFilters = _icon_enabled;\n            if(image.editorState.contrast!==1) clrFilters = _icon_enabled;\n            if(image.editorState.saturate!==1) clrFilters = _icon_enabled;\n            if(image.editorState.sepia) clrFilters = _icon_enabled;\n            if(image.editorState.colorR!==1) clrColors = _icon_enabled;\n            if(image.editorState.colorG!==1) clrColors = _icon_enabled;\n            if(image.editorState.colorB!==1) clrColors = _icon_enabled;\n        }\n\n\n        return (\n            <Card className={'app-editor-thumb-item h-100 d-inline-block m-1 position-relative '+(this.props.selected ? ' text-light bg-primary' : ' text-primary bg-light')} >\n                <CardContent  className={\"p-0 h-100 position-relative\"} onClick={this.props.onSelect} >\n                    <div ref={(node)=>this.scrollRef=node} className={\"app-editor-thumb-item-img-wrapper h-100 p-1\"}>\n                        <div ref={(node)=>this.nodeThumb=node} style={boxStyles} className={\"app-editor-thumb-item-box h-100 border \"+rotate} >\n                            <span className=\"app-editor-thumb-item-img-helper\"/>\n                            <img\n                                src={tools.makeGetUri()+encodeURI(image.thumb)}\n                                style={styles}\n                                alt=\"\" className={\"app-editor-thumb-item-image\"+(!image.count ? ' _zero' : '')}/>\n                        </div>\n                    </div>\n                    <div className={\"app-editor-thumb-item-img-countbubble\"}\n                        style={{backgroundColor: THEME.palette.primary.main, color:THEME.palette.primary.contrastText }}\n                        >\n                        <span>{image.count ? image.count : '-'}</span>\n                    </div>\n\n                    <div className={\"app-editor-thumb-item-img-controls h-100\"}>\n                        <div className=\"app-editor-thumb-item-img-controls-flexv pr-1 h-100\">\n\n                            <div>\n                                <Icon fontSize={'small'} color={clrZoom}>zoom_out_map</Icon>\n                            </div>\n                            <div>\n                                <Icon fontSize={'small'} color={clrFilters}>brightness_medium</Icon>\n                            </div>\n                            <div>\n                                <Icon fontSize={'small'} color={clrColors}>equalizer</Icon>\n                            </div>\n                            <div className={\"app-editor-thumb-item-img-index\"}>\n                                <span>{this.props.itemIndex+1}</span>\n                            </div>\n                        </div>\n\n\n                    </div>\n                    {!image.count && (\n                        <div className=\"app-editor-thumb-zeroprint\">x</div>\n                    )}\n                </CardContent>\n\n\n            </Card>\n        )\n    }\n}\n","import React from \"react\";\nimport * as tools from \"../../tools\";\nimport {calculateImageDimensions} from \"../../tools\";\n\nexport default class ImageEditorZoomCanvas extends React.Component {\n    constructor(props) {\n        super(props);\n        this.canvasImg = new Image();\n        this.canvasImg.crossOrigin = 'anonymous';\n        const _upd = this.updateCanvas.bind(this);\n        this.canvasImg.onload = function() {\n            _upd();\n        };\n        this.renderedImageIndex = null;\n\n        this.state = {\n            imgSrc: null,\n            dragImage: false,\n            dragX: 0,\n            dragY: 0,\n        }\n    }\n\n    componentDidMount() {\n        const image = this.props.app.images[this.props.app.currentImage];\n        if(!image.editorState.initedMask) {\n            this.props.appImageInitMask(this.props.app.currentImage);\n            return;\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n\n        if(this.props.app.currentImage!==prevProps.app.currentImage) {\n            console.log('new image clicked');\n            this.setState({\n                imgSrc: null,\n            });\n            return;\n        }\n\n        this.props.appEditorChanged(this.myImgContainer.clientWidth, this.myImgContainer.clientHeight);\n\n        const image = this.props.app.images[this.props.app.currentImage];\n        if(!image.editorState.initedMask) {\n            this.props.appImageInitMask(this.props.app.currentImage);\n            return;\n        }\n\n        if(!image.editorState.initedImagePosition) {\n            this.props.alignInit(this.props.app.currentImage);\n            return;\n        }\n\n        let img_src = tools.makeGetUri()+encodeURI(image.src);\n        if(this.canvasImg.src!==img_src) {\n            const _upd = this.updateCanvas.bind(this);\n            this.canvasImg.onload = function() {\n                _upd();\n            };\n            this.canvasImg.src=img_src;\n            return;\n        }\n\n        // if(image.editorState.needUpdateCanvas) {\n            this.updateCanvas();\n        // }\n\n\n    }\n\n    updateCanvas() {\n\n        // console.log('Zoom updateCanvas');\n        if(!this.myCanvas || this.myCanvas.clientWidth===0 || this.myCanvas.clientHeight===0) return;\n\n        const ctx = this.myCanvas.getContext('2d');\n        let canvasX = this.myCanvas.clientWidth;\n        let canvasY = this.myCanvas.clientHeight;\n        // console.log('drawImage', this.canvasImg.src, canvasX, canvasY);\n\n        const editorState = this.props.app.images[this.props.app.currentImage].editorState;\n        try {\n            ctx.drawImage(this.canvasImg, 0, 0, canvasX, canvasY);\n            let pixelArray = ctx.getImageData(0,0, canvasX, canvasY);\n\n            if(editorState.brightness!==1 || editorState.contrast!==1 || editorState.colorR!==1 || editorState.colorG!==1 || editorState.colorB!==1 ) {\n                pixelArray = tools.ColorCorrection(pixelArray, editorState.brightness, editorState.contrast, editorState.colorR, editorState.colorG, editorState.colorB);\n            }\n            if(editorState.sepia) {\n                pixelArray = tools.ColorSepia(pixelArray, 1);\n            }\n            if(editorState.saturate!==1) {\n                pixelArray = tools.saturate(pixelArray, editorState.saturate);\n            }\n            ctx.putImageData(pixelArray, 0, 0);\n\n            if(this.props.app.isDebugShow) {\n                // draw source rect\n                const {sX, sY, sW, sH} = calculateImageDimensions(this.props.app, this.props.app.currentImage);\n                const r = editorState.ratio;\n                const z = editorState.imageZoom;\n                const w = 6;\n                ctx.lineWidth = w;\n                ctx.strokeStyle = \"yellow\";\n                // console.log(Math.round(sX*r*z), Math.round(sY*r*z), Math.round(sW*r*z), Math.round(sH*r*z));\n                ctx.strokeRect(Math.round(sX*r*z)+w, Math.round(sY*r*z)+w, Math.round(sW*r*z)-w*2, Math.round(sH*r*z)-w*2 );\n            }\n\n        } catch (e) {\n            console.log('drawImage failed')\n        }\n    }\n\n    onDragStart = (e) => {\n        e.preventDefault();\n        return false;\n    };\n\n    movingStart =() =>{\n        this.setState({\n            dragImage: true,\n            dragX: null,\n            dragY: null,\n        });\n\n    };\n    movingOn = (e) => {\n        if(this.state.dragImage) {\n            const dragX = this.state.dragX ? this.state.dragX : e.screenX;\n            const dragY = this.state.dragY ? this.state.dragY : e.screenY;\n            const shiftX = e.screenX - dragX;\n            const shiftY = e.screenY - dragY;\n            // console.log(shiftX, shiftY);\n            this.setState({\n                dragX: e.screenX,\n                dragY: e.screenY,\n            }, ()=> {\n                const sliderPositionLR = this.props.app.images[this.props.app.currentImage].editorState.sliderPositionLR + shiftX;\n                const sliderPositionTB = this.props.app.images[this.props.app.currentImage].editorState.sliderPositionTB + shiftY;\n                this.props.appImageChanged(this.props.app.currentImage, {sliderPositionLR: sliderPositionLR, sliderPositionTB: sliderPositionTB})\n            });\n\n        }\n    };\n    movingStop =() =>{\n        this.setState({\n            dragImage: false,\n            dragX: null,\n            dragY: null,\n        });\n\n    };\n\n    render() {\n        // console.log('ZoomCanvas render');\n        const newImage = this.renderedImageIndex !== this.props.app.currentImage;\n        this.renderedImageIndex = this.props.app.currentImage;\n\n        const image = this.props.app.images[this.props.app.currentImage];\n        if(newImage) {\n            let img_src = tools.makeGetUri()+encodeURI(image.src);\n            if(this.canvasImg.src!==img_src) {\n                this.canvasImg.src=img_src;\n            }\n        }\n\n\n        // console.log('render ImageEditorZoomCanvas ');\n        let maskTBStyle = {\n            height: image.editorState.maskTB,\n        };\n        let viewportStyles = {\n            height: this.props.app.editorHeight - image.editorState.maskTB*2,\n            width: this.props.app.editorWidth - image.editorState.maskLR*2,\n            top: image.editorState.maskTB,\n            left: image.editorState.maskLR,\n        };\n        let maskLRStyle = {\n            width: image.editorState.maskLR,\n        };\n\n        let canvasWidth = Math.ceil(image.editorState.imgWidth);\n        let canvasHeight = Math.ceil(image.editorState.imgHeight);\n        let canvasStyle = {\n            top: image.editorState.sliderPositionTB,\n            left: image.editorState.sliderPositionLR,\n            transform: 'rotate('+image.editorState.imageRotate+'deg)',\n        };\n\n        let rL, rR, rT, rB;\n        if(this.props.app.isDebugShow) {\n            const p = calculateImageDimensions(this.props.app, this.props.app.currentImage);\n            // console.log(p);\n            const ratio = image.editorState.ratio;\n            rL = Math.round(p.pX*ratio)+2;\n            rR = Math.round((p.pX+p.pW)*ratio)-2;\n            rT = Math.round(p.pY*ratio)+2;\n            rB = Math.round((p.pY+p.pH)*ratio)-2;\n\n            // console.log(rT, rR, rB, rL);\n            // console.log('-----------------');\n        }\n\n       return (\n           <div className=\"app-main-editor-Printable-Mask border-light fld3d\">\n               <div className=\"app-main-editor-Printable-mask _t\" style={{height:'1rem'}} />\n               <div className=\"app-main-editor-Printable-mask _l\" style={{width:'1rem'}} />\n               <div ref={(node)=>{this.myImgContainer=node}} className='app-main-editor-Printable' >\n\n                   <div className=\"app-main-editor-Printable-mask _t\" style={maskTBStyle} />\n                   <div className=\"app-main-editor-Printable-mask _l\" style={maskLRStyle} />\n\n                   <div onMouseMove={this.movingOn} onMouseUp={this.movingStop} className=\"app-main-editor-Printable-viewport\"\n                        style={viewportStyles}>\n                       <canvas\n                           className=\"app-main-editor-Printable-img\"\n                           ref={(node)=>{this.myCanvas=node}}\n                           width={ canvasWidth }\n                           height={ canvasHeight}\n                           style={ canvasStyle }\n                           draggable\n                           onDragStart={(e)=>this.onDragStart(e)}\n                           onMouseDown={this.movingStart}\n                           onMouseUp={this.movingStop}\n                       />\n\n                       {this.props.app.isDebugShow && (\n                           <div className=\"vRuler vRulerX\" style={{left: rL}} />\n                       )}\n                       {this.props.app.isDebugShow && (\n                           <div className=\"vRuler vRulerW\" style={{left: rR}} />\n                       )}\n                       {this.props.app.isDebugShow && (\n                           <div className=\"hRuler hRulerY\" style={{top: rT}} />\n                       )}\n                       {this.props.app.isDebugShow && (\n                           <div className=\"hRuler hRulerH\" style={{top: rB}} />\n                       )}\n\n                   </div>\n                   <div className=\"app-main-editor-Printable-mask _r\" style={maskLRStyle} />\n                   <div className=\"app-main-editor-Printable-mask _b\" style={maskTBStyle} />\n\n\n               </div>\n               <div className=\"app-main-editor-Printable-mask _r\" style={{width:'1rem'}} />\n               <div className=\"app-main-editor-Printable-mask _b\" style={{height:'1rem'}} />\n\n           </div>\n\n\n\n        );\n    }\n}\n\n","import React from \"react\";\nimport Slider from \"@material-ui/lab/Slider\";\nimport Icon from \"@material-ui/core/Icon\";\nimport ImageEditorZoomCanvas from \"./ImageEditorZoomCanvas\"\nimport * as tools from \"../../tools\";\nimport Fab from \"@material-ui/core/Fab\";\n\nexport default class ImageEditorZoom extends React.Component {\n    // constructor(props) {\n    //     super(props);\n    //     this.updateCanvasTimer = null;\n    //\n    //     this.state = {\n    //         needUpdateCanvas: false,\n    //     }\n    // }\n\n\n    sliderZoom = (event, value)=>{\n        const state = this.props.app;\n        const image = state.images[state.currentImage];\n\n        let imageZoom = value / 100;\n\n        let imgWidth = tools.dpi_inch2dots(image.width, image.format.dpi)*imageZoom*image.editorState.ratio;\n        let imgHeight = tools.dpi_inch2dots(image.height, image.format.dpi)*imageZoom*image.editorState.ratio;\n\n        let L = (image.editorState.imgWidth - imgWidth)/2;\n        let T = (image.editorState.imgHeight - imgHeight)/2;\n\n        // state.needUpdateCanvas = true;\n        // state.images[state.currentImage].editorState.imageZoom = imageZoom;\n        // state.images[state.currentImage].editorState.sliderPositionTB = image.sliderPositionTB + T;\n        // state.images[state.currentImage].editorState.sliderPositionLR = image.sliderPositionLR + L;\n        // state.images[state.currentImage].editorState.imgWidth = imgWidth;\n        // state.images[state.currentImage].editorState.imgHeight = imgHeight;\n        // this.props.saveAppState( state );\n\n        let newState = {\n            imageZoom: imageZoom,\n            sliderPositionTB: image.editorState.sliderPositionTB + T,\n            sliderPositionLR: image.editorState.sliderPositionLR + L,\n            imgWidth: imgWidth,\n            imgHeight: imgHeight,\n            needUpdateCanvas: true,\n        };\n\n        this.props.appImageChanged( this.props.app.currentImage, newState);\n\n    };\n\n    sliderChangeTB = (event, value)=>{this.props.appImageChanged( this.props.app.currentImage, { sliderPositionTB: value, }) };\n\n    sliderChangeLR = (event, value)=>{this.props.appImageChanged( this.props.app.currentImage, { sliderPositionLR: value, }) };\n\n    imageRotate = ()=> {\n        let imageRotate = 0;\n        switch (this.props.app.images[this.props.app.currentImage].editorState.imageRotate) {\n            case 90:\n                imageRotate = 180;\n                break;\n            case 180:\n                imageRotate = 270;\n                break;\n            case 270:\n                imageRotate = 0;\n                break;\n            default:\n                imageRotate = 90;\n                break;\n        }\n        this.props.appImageChanged( this.props.app.currentImage, { imageRotate: imageRotate });\n    };\n\n    render() {\n        // console.log('render ImageEditorZoom, imgWidth:', this.props.parentState.imgWidth);\n        const image = this.props.app.images[this.props.app.currentImage];\n\n        return (\n            <div className=\"h-100 d-flex flex-row\">\n                <div className=\"app-main-editor-visual-left h-90 flex-grow-0 flex-shrink-0\">\n                    <div className=\"vert-slider-button-wrapper text-center d-inline-block\">\n                        <Fab color=\"primary\" className={'_fabmini ml-3'}\n                             onClick={()=>{this.sliderZoom(null, image.editorState.imageZoom*100+0.51)}}\n                             disabled={false}\n                             aria-label=\"Colors\">\n                            <Icon>zoom_in</Icon>\n                        </Fab>\n                    </div>\n                    <div className=\"vert-slider-wrapper h-85 position-relative d-inline-block\">\n\n                        <Slider className='app-slider-for-zoom'\n                                classes={{thumb: '_thumb'}}\n                                thumb={<Icon className={'app-slider-thumb-icon'} color='primary'>zoom_in</Icon>}\n                                vertical\n                                max={image.editorState.imageZoomMax*100}\n                                min={image.editorState.imageZoomMin*100}\n                                value={image.editorState.imageZoom*100}\n                                onChange={this.sliderZoom} />\n                        {this.props.app.isDebugShow && (\n                        <div className={'_value'}><small>{image.editorState.imageZoom}</small></div>\n                        )}\n\n                    </div>\n                    <div className=\"vert-slider-button-wrapper text-center d-inline-block\">\n                        <Fab color=\"primary\" className={'_fabmini ml-3'}\n                             onClick={()=>{this.sliderZoom(null, image.editorState.imageZoom*100-0.51)}}\n                             disabled={false}\n                             aria-label=\"Colors\">\n                            <Icon>zoom_out</Icon>\n                        </Fab>\n                    </div>\n                </div>\n                <div className=\"app-main-editor-visual-container h-100  flex-grow-1 flex-shrink-1\">\n                    <div className=\"h-90\">\n                        <ImageEditorZoomCanvas\n                            {...this.props}\n                        />\n                    </div>\n                    <div className=\"app-main-editor-visual-bottom h-10 w-100  d-flex flex-row\">\n                        <div className=\"hori-slider-button-wrapper text-center flex-grow-0\">\n                            <Fab color=\"primary\" className=\"_fabmini mt-3\"\n                                 onClick={()=>{this.sliderChangeLR(null, image.editorState.sliderPositionLR-1)}}\n                                 disabled={false}\n                                 aria-label=\"Colors\">\n                                <Icon>navigate_before</Icon>\n                            </Fab>\n                        </div>\n                        <div className=\" flex-grow-1\">\n                            <div className=\"hori-slider-wrapper h-100 w-100 position-relative d-inline-flex\">\n                                <Slider className='app-slider-for-position'\n                                        classes={{trackAfter: '_trackAfter', thumb: '_thumb'}}\n                                        thumb={<Icon className={'app-slider-thumb-icon'} color='primary'>image</Icon>}\n                                        max={(this.props.app.editorWidth-image.editorState.maskLR*2)*0.9}\n                                        value={image.editorState.sliderPositionLR}\n                                        min={(image.editorState.imgWidth)*-0.9}\n                                        onChange={this.sliderChangeLR}\n                                />\n\n                                {this.props.app.isDebugShow && (\n                                    <div className={'_value'}><small>({image.editorState.sliderPositionLR})</small></div>\n                                )}\n                            </div>\n\n                        </div>\n                        <div className=\"hori-slider-button-wrapper text-center flex-grow-0\" >\n                            <Fab color=\"primary\" className={'_fabmini mt-3'}\n                                 onClick={()=>{this.sliderChangeLR(null, image.editorState.sliderPositionLR+1)}}\n                                 disabled={false}\n                                 aria-label=\"Colors\">\n                                <Icon>navigate_next</Icon>\n                            </Fab>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"app-main-editor-visual-right h-90  flex-grow-0 flex-shrink-0\">\n\n                    <div className=\"d-inline-flex flex-column h-100\">\n                        <div className=\"vert-slider-button-wrapper text-center d-inline-block\">\n                            <Fab color=\"primary\" className={'_fabmini'}\n                                 onClick={()=>{this.sliderChangeTB(null, image.editorState.sliderPositionTB-1)}}\n                                 disabled={false}\n                                 aria-label=\"Colors\">\n                                <Icon>expand_less</Icon>\n                            </Fab>\n                        </div>\n                        <div className=\"vert-slider-wrapper h-85 position-relative d-inline-flex\">\n                            <Slider className='app-slider-for-position'\n                                    classes={{trackAfter: '_trackAfter', thumb: '_thumb'}}\n                                    thumb={<Icon className={'app-slider-thumb-icon'} color='primary'>image</Icon>}\n                                    max={(image.editorState.imgHeight)*-0.9}\n                                    value={image.editorState.sliderPositionTB}\n                                    min={(this.props.app.editorHeight-image.editorState.maskTB*2)*0.9}\n                                    onChange={this.sliderChangeTB}\n                                    vertical\n                            />\n                            {this.props.app.isDebugShow && (\n                                <div className={'_value'}><small>({image.editorState.sliderPositionTB})</small></div>\n                            )}\n                        </div>\n                        <div className=\"vert-slider-button-wrapper text-center d-inline-block\">\n                            <Fab color=\"primary\" className={'_fabmini'}\n                                 onClick={()=>{this.sliderChangeTB(null, image.editorState.sliderPositionTB+1)}}\n                                 disabled={false}\n                                 aria-label=\"Colors\">\n                                <Icon>expand_more</Icon>\n                            </Fab>\n                        </div>\n\n                    </div>\n\n\n                    <div className=\"vert-buttons-wrapper h-100 d-inline-flex\">\n                        <div className=\"app-main-editor-visual-right-buttons\">\n                            <div className=\"zoom-positioning\">\n                                <div className=\"zoom-positioning-w1 zoom-positioning-h1  d-inline-block\"/>\n                                <div className=\"zoom-positioning-w2 zoom-positioning-h1 d-inline-block\">\n                                    <button type=\"button\"\n                                            className={\"btn btn-primary h-100\"}\n                                            onClick={()=>{this.props.alignTop()}}>\n                                        <Icon>vertical_align_top</Icon>\n                                    </button>\n                                </div>\n                                <div className=\"zoom-positioning-w1 zoom-positioning-h1 d-inline-block\"/>\n                            </div>\n                            <div className=\"zoom-positioning\">\n                                <div className=\"zoom-positioning-w1 zoom-positioning-h2 d-inline-block\">\n                                    <button type=\"button\"\n                                            className={\"btn btn-primary h-100\"}\n                                            onClick={()=>{this.props.alignLeft()}}>\n                                        <Icon style={{transform:'rotate(270deg)'}}>vertical_align_top</Icon>\n                                    </button>\n                                </div>\n                                <div className=\"d-inline-block\">\n                                    <div className=\"zoom-positioning-w2 zoom-positioning-h1\">\n                                        <button type=\"button\"\n                                                className={\"btn btn-primary h-100\"}\n                                                onClick={()=>{this.props.alignLandscape(this.props.app.currentImage, image.format)}}>\n                                            <Icon>swap_horiz</Icon>\n                                        </button>\n                                    </div>\n                                    <div className=\"zoom-positioning-w2 zoom-positioning-h1\">\n                                        <button type=\"button\"\n                                                className={\"btn btn-primary h-100\"}\n                                                onClick={()=>{this.props.alignPortrait(this.props.app.currentImage, image.format)}}>\n                                            <Icon>swap_vert</Icon>\n                                        </button>\n                                    </div>\n                                </div>\n                                <div className=\"zoom-positioning-w1 zoom-positioning-h2 d-inline-block\">\n                                    <button type=\"button\"\n                                            className={\"btn btn-primary h-100\"}\n                                            onClick={()=>{this.props.alignRight()}}>\n                                        <Icon style={{transform:'rotate(90deg)'}}>vertical_align_top</Icon>\n                                    </button>\n                                </div>\n                            </div>\n                            <div className=\"zoom-positioning\">\n                                <div className=\"zoom-positioning-w1 zoom-positioning-h1 d-inline-block\"/>\n                                <div className=\"zoom-positioning-w2 zoom-positioning-h1 d-inline-block\">\n                                    <button type=\"button\"\n                                            className={\"btn btn-primary h-100\"}\n                                            onClick={()=>{this.props.alignBottom()}}>\n                                        <Icon style={{transform:'rotate(180deg)'}}>vertical_align_top</Icon>\n                                    </button>\n                                </div>\n                                <div className=\"zoom-positioning-w1 zoom-positioning-h1 d-inline-block\"/>\n                            </div>\n                            <div className=\"app-main-editor-visual-rotate-buttons mt-4 text-center\">\n                                <button type=\"button\"\n                                        className={\"btn  btn-medium btn-primary mr-4\"}\n                                        onClick={this.imageRotate}>\n                                    <Icon>rotate_right</Icon>\n                                </button>\n                                <button type=\"button\"\n                                        className={\"btn  btn-medium btn-primary\"}\n                                        onClick={()=>this.props.appFormatRotate()}>\n                                    <Icon>crop_rotate</Icon>\n                                </button>\n                            </div>\n\n\n                        </div>\n\n                    </div>\n\n                </div>\n            </div>\n\n        )\n    }\n}\n","import React from \"react\";\nimport * as tools from \"../../tools\";\n\nexport default class ImageEditorColorCanvas extends React.Component {\n    constructor(props) {\n        super(props);\n        this.canvasImg = new Image();\n        this.canvasImg.crossOrigin = 'anonymous';\n        const _upd = this.updateCanvas.bind(this);\n        this.canvasImg.onload = function() {\n            _upd();\n        };\n\n\n\n        this.state = {\n            imgSrc: null,\n            fakeThins: true,\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n\n        // console.log('componentDidUpdate');\n\n        if(this.props.app.currentImage!==prevProps.app.currentImage) {\n            console.log('new image clicked');\n            this.setState({\n                imgSrc: null,\n            });\n            return;\n        }\n\n        this.props.appEditorChanged(this.myImgContainer.clientWidth, this.myImgContainer.clientHeight);\n\n        const image = this.props.app.images[this.props.app.currentImage];\n        if(!image.editorState.initedMask) {\n            this.props.appImageInitMask(this.props.app.currentImage);\n            return;\n        }\n\n        if(!image.editorState.initedImagePosition) {\n            this.props.alignInit(this.props.app.currentImage);\n            return;\n        }\n\n        let img_src = tools.makeGetUri()+encodeURI(image.src);\n        if(this.canvasImg.src!==img_src) {\n            const _upd = this.updateCanvas.bind(this);\n            this.canvasImg.onload = function() {\n                _upd();\n            };\n            this.canvasImg.src=img_src;\n            return;\n        }\n\n        // if(image.editorState.needUpdateCanvas) {\n        this.updateCanvas();\n        // }\n\n\n    }\n\n    updateCanvas() {\n\n        // console.log('Zoom updateCanvas');\n        if(!this.myCanvas || this.myCanvas.clientWidth===0 || this.myCanvas.clientHeight===0) return;\n\n        const ctx = this.myCanvas.getContext('2d');\n        let canvasX = this.myCanvas.clientWidth;\n        let canvasY = this.myCanvas.clientHeight;\n        // console.log('drawImage', this.canvasImg.src, canvasX, canvasY);\n\n        const editorState = this.props.app.images[this.props.app.currentImage].editorState;\n        try {\n            ctx.drawImage(this.canvasImg, 0, 0, canvasX, canvasY);\n            let pixelArray = ctx.getImageData(0,0, canvasX, canvasY);\n\n            if(editorState.brightness!==1 || editorState.contrast!==1 || editorState.colorR!==1 || editorState.colorG!==1 || editorState.colorB!==1 ) {\n                pixelArray = tools.ColorCorrection(pixelArray, editorState.brightness, editorState.contrast, editorState.colorR, editorState.colorG, editorState.colorB);\n            }\n            if(editorState.sepia) {\n                pixelArray = tools.ColorSepia(pixelArray, 1);\n            }\n            if(editorState.saturate!==1) {\n                pixelArray = tools.saturate(pixelArray, editorState.saturate);\n            }\n            ctx.putImageData(pixelArray, 0, 0);\n\n            // this.setState({\n            //     imgSrc: this.myCanvas.toDataURL('image/jpeg', 0.7),\n            // });\n            // this.props.appImageChanged( this.props.app.currentImage,{needUpdateCanvas: false})\n\n        } catch (e) {\n            console.log('drawImage failed');\n        }\n\n    }\n\n    render() {\n\n        // console.log('ColorCanvas render');\n        const newImage = this.renderedImageIndex !== this.props.app.currentImage;\n        this.renderedImageIndex = this.props.app.currentImage;\n\n        const image = this.props.app.images[this.props.app.currentImage];\n        if(newImage) {\n            let img_src = tools.makeGetUri()+encodeURI(image.src);\n            if(this.canvasImg.src!==img_src) {\n                this.canvasImg.src=img_src;\n            }\n        }\n\n\n        // console.log('render ImageEditorZoomCanvas ');\n        let maskTBStyle = {\n            height: image.editorState.maskTB,\n        };\n        let viewportStyles = {\n            height: this.props.app.editorHeight - image.editorState.maskTB*2,\n            width: this.props.app.editorWidth - image.editorState.maskLR*2,\n            top: image.editorState.maskTB,\n            left: image.editorState.maskLR,\n        };\n        let maskLRStyle = {\n            width: image.editorState.maskLR,\n        };\n\n        let canvasWidth = Math.ceil(image.editorState.imgWidth);\n        let canvasHeight = Math.ceil(image.editorState.imgHeight);\n        let canvasStyle = {\n            top: image.editorState.sliderPositionTB,\n            left: image.editorState.sliderPositionLR,\n            transform: 'rotate('+image.editorState.imageRotate+'deg)',\n        };\n\n        return (\n            <div className=\"app-main-editor-Printable-Mask border-light fld3d\">\n                <div className=\"app-main-editor-Printable-mask _t\" style={{height:'1rem'}} />\n                <div className=\"app-main-editor-Printable-mask _l\" style={{width:'1rem'}} />\n\n                <div ref={(node)=>{this.myImgContainer=node}} className='app-main-editor-Printable' >\n\n                    <div className=\"app-main-editor-Printable-mask _t\" style={maskTBStyle} />\n                    <div className=\"app-main-editor-Printable-mask _l\" style={maskLRStyle} />\n\n                    <div className=\"app-main-editor-Printable-viewport\"\n                         style={viewportStyles}>\n                        <canvas\n                            className=\"app-main-editor-Printable-img\"\n                            ref={(node)=>{this.myCanvas=node}}\n                            width={ canvasWidth }\n                            height={ canvasHeight}\n                            style={ canvasStyle }\n                        />\n\n\n\n                    </div>\n                    <div className=\"app-main-editor-Printable-mask _r\" style={maskLRStyle} />\n                    <div className=\"app-main-editor-Printable-mask _b\" style={maskTBStyle} />\n\n\n                </div>\n\n                <div className=\"app-main-editor-Printable-mask _r\" style={{width:'1rem'}} />\n                <div className=\"app-main-editor-Printable-mask _b\" style={{height:'1rem'}} />\n\n            </div>\n\n\n        );\n    }\n}\n\n","import React from \"react\";\nimport Icon from \"@material-ui/core/Icon\";\nimport Slider from \"@material-ui/lab/Slider\";\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\nimport ImageEditorColorCanvas from \"./ImageEditorColorCanvas\";\n\n\nexport default class ImageEditorBrightness extends React.Component {\n\n    sliderChangeBrightness =  (event, value)=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, brightness: value} );\n        // this.props.setStateFromChild({ brightness: value, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderChangeContrast =  (event, value)=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, contrast: value} );\n        // this.props.setStateFromChild({ contrast: value, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderChangeSaturate =  (event, value)=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, saturate: value} );\n        // this.props.setStateFromChild({ saturate: value, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderResetBrightness =  ()=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, brightness: 1} );\n        // this.props.setStateFromChild({ brightness: 1, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderResetContrast =  ()=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, contrast: 1} );\n        // this.props.setStateFromChild({ contrast: 1, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderResetSaturate =  ()=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, saturate: 1} );\n        // this.props.setStateFromChild({ saturate: 1, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderChangeSepia = () => {\n        this.props.appImageChanged(this.props.app.currentImage, {\n            sepia: !this.props.app.images[this.props.app.currentImage].editorState.sepia,\n            colorR: 1,\n            colorG: 1,\n            colorB: 1,\n            needUpdateCanvas: true,\n        } );\n        // this.props.setStateFromChild({\n        //     sepia: !this.props.parentState.sepia,\n        //     colorR: 1,\n        //     colorG: 1,\n        //     colorB: 1,\n        //     needUpdateCanvas: true,\n        // }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n\n\n    render() {\n\n        const image = this.props.app.images[this.props.app.currentImage];\n\n        return (\n            <div className=\"h-100 d-flex flex-row\">\n                <div className=\"app-main-editor-visual-left h-90  flex-grow-0 flex-shrink-0\">\n                </div>\n                <div className=\"app-main-editor-visual-container h-100  flex-grow-1 flex-shrink-1\">\n                    <div className=\"h-90\">\n                        <ImageEditorColorCanvas\n                            {...this.props}\n                        />\n                    </div>\n                    <div className=\"app-main-editor-visual-bottom h-10 w-100\">\n\n                    </div>\n                </div>\n                <div className=\"app-main-editor-visual-right h-90  flex-grow-0 flex-shrink-0\">\n                    <div className=\"h-75\">\n                        <div className=\"vert-slider-wrapper h-100 position-relative d-inline-flex\">\n                            <Icon className={'_reset'} color='primary' onClick={this.sliderResetBrightness}>brightness_medium</Icon>\n                            <Slider className='app-slider-for-filter'\n                                    max={2}\n                                    value={image.editorState.brightness}\n                                    min={0}\n                                    onChange={this.sliderChangeBrightness}\n                                    vertical\n                            />\n                            {this.props.app.isDebugShow && (\n                            <div className={'_value'}><small>({image.editorState.brightness})</small></div>\n                            )}\n                        </div>\n                        <div className=\"vert-slider-wrapper h-100 position-relative d-inline-flex\">\n                            <Icon className={'_reset'} color='primary' onClick={this.sliderResetContrast}>tonality</Icon>\n                            <Slider className='app-slider-for-filter'\n                                    max={2}\n                                    value={image.editorState.contrast}\n                                    min={0}\n                                    onChange={this.sliderChangeContrast}\n                                    vertical\n                            />\n                            {this.props.app.isDebugShow && (\n                            <div className={'_value'}><small>({image.editorState.contrast})</small></div>\n                            )}\n                        </div>\n                        <div className=\"vert-slider-wrapper h-100 position-relative d-inline-flex\">\n                            <Icon className={'_reset'} color='primary' onClick={this.sliderResetSaturate}>color_lens</Icon>\n                            <Slider className='app-slider-for-filter'\n                                    max={2}\n                                    value={image.editorState.saturate}\n                                    min={0}\n                                    onChange={this.sliderChangeSaturate}\n                                    vertical\n                            />\n                            {this.props.app.isDebugShow && (\n                            <div className={'_value'}><small>({image.editorState.saturate})</small></div>\n                            )}\n                        </div>\n\n\n                    </div>\n                    <div className=\"h-25\">\n                        <div className=\"hori-slider-wrapper w-100 position-relative d-inline-flex\">\n                            <FormControlLabel\n                                control={\n                                    <Switch\n                                        checked={image.editorState.sepia}\n                                        onChange={this.sliderChangeSepia}\n                                        value=\"true\"\n                                        color=\"primary\"\n                                    />\n                                }\n                                label=\"Sepia\"\n                            />\n                        </div>\n\n                    </div>\n\n\n                </div>\n            </div>\n\n        )\n\n    }\n}\n\n","import React from \"react\";\nimport {THEME} from \"../../tools\";\nimport Slider from \"@material-ui/lab/Slider\";\nimport ImageEditorColorCanvas from \"./ImageEditorColorCanvas\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Switch from \"@material-ui/core/Switch\";\n\nexport default class ImageEditorBrightness extends React.Component {\n\n    sliderChangeColorR =  (event, value)=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, colorR: value} );\n\n        // this.props.setStateFromChild({ colorR: value, needUpdateCanvas: true }, ()=>{\n        //         this.props.setStateFromChild({needUpdateCanvas: false});\n        //     })\n    };\n    sliderChangeColorG =  (event, value)=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, colorG: value} );\n        // this.props.setStateFromChild({ colorG: value, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderChangeColorB =  (event, value)=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, colorB: value} );\n        // this.props.setStateFromChild({ colorB: value, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n\n    sliderResetColorR =  ()=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, colorR: 1} );\n        // this.props.setStateFromChild({ colorR: 1, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderResetColorG =  ()=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, colorG: 1} );\n        // this.props.setStateFromChild({ colorG: 1, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderResetColorB =  ()=>{\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas: true, colorB: 1} );\n        // this.props.setStateFromChild({ colorB: 1, needUpdateCanvas: true }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n    sliderChangeSepia = () => {\n        this.props.appImageChanged(this.props.app.currentImage, {\n            sepia: !this.props.app.images[this.props.app.currentImage].editorState.sepia,\n            colorR: 1,\n            colorG: 1,\n            colorB: 1,\n            needUpdateCanvas: true,\n        });\n        // this.props.setStateFromChild({\n        //     sepia: !this.props.parentState.sepia,\n        //     colorR: 1,\n        //     colorG: 1,\n        //     colorB: 1,\n        //     needUpdateCanvas: true,\n        // }, ()=>{\n        //     this.props.setStateFromChild({needUpdateCanvas: false});\n        // })\n    };\n\n\n\n    render() {\n\n        const image = this.props.app.images[this.props.app.currentImage];\n\n        return (\n            <div className=\"h-100 d-flex flex-row\">\n                <div className=\"app-main-editor-visual-left h-90  flex-grow-0 flex-shrink-0\">\n                </div>\n                <div className=\"app-main-editor-visual-container h-100  flex-grow-1 flex-shrink-1\">\n                    <div className=\"h-90\">\n                        <ImageEditorColorCanvas\n                            {...this.props}\n                        />\n                    </div>\n                    <div className=\"app-main-editor-visual-bottom h-10 w-100\">\n\n                    </div>\n                </div>\n                <div className=\"app-main-editor-visual-right h-90  flex-grow-0 flex-shrink-0\">\n                    <div className=\"h-75\">\n\n                        <div className=\"vert-slider-wrapper h-100 position-relative d-inline-flex\">\n                            <div className=\"_reset app-slider-icon\"\n                                 style={{backgroundColor: THEME.palette.primary.main, color:THEME.palette.primary.contrastText }}\n                                 onClick={this.sliderResetColorR}>R</div>\n                            <Slider className='app-slider-for-filter'\n                                    classes={{track: '_trackR', thumb: '_thumbR'}}\n                                    step={0.05}\n                                    max={2}\n                                    value={image.editorState.colorR}\n                                    min={0}\n                                    onChange={this.sliderChangeColorR}\n                                    disabled={image.editorState.sepia}\n                                    vertical\n                            />\n                            {this.props.app.isDebugShow && (\n                            <div className={'_value'}><small>({image.editorState.colorR})</small></div>\n                            )}\n                        </div>\n\n                        <div className=\"vert-slider-wrapper h-100 position-relative d-inline-flex\">\n                            <div className=\"_reset app-slider-icon\"\n                                 style={{backgroundColor: THEME.palette.primary.main, color:THEME.palette.primary.contrastText }}\n                                 onClick={this.sliderResetColorG}>G</div>\n                            <Slider className='app-slider-for-filter'\n                                    classes={{track: '_trackG', thumb: '_thumbG'}}\n                                    step={0.05}\n                                    max={2}\n                                    value={image.editorState.colorG}\n                                    min={0}\n                                    onChange={this.sliderChangeColorG}\n                                    disabled={image.editorState.sepia}\n                                    vertical\n                            />\n                            {this.props.app.isDebugShow && (\n                            <div className={'_value'}><small>({image.editorState.colorG})</small></div>\n                            )}\n                        </div>\n\n                        <div className=\"vert-slider-wrapper h-100 position-relative d-inline-flex\">\n                            <div className=\"_reset app-slider-icon\"\n                                 style={{backgroundColor: THEME.palette.primary.main, color:THEME.palette.primary.contrastText }}\n                                 onClick={this.sliderResetColorB}>B</div>\n                            <Slider className='app-slider-for-filter'\n                                    classes={{track: '_trackB', thumb: '_thumbB'}}\n                                    step={0.05}\n                                    max={2}\n                                    value={image.editorState.colorB}\n                                    min={0}\n                                    onChange={this.sliderChangeColorB}\n                                    disabled={image.editorState.sepia}\n                                    vertical\n                            />\n                            {this.props.app.isDebugShow && (\n                            <div className={'_value'}><small>({image.editorState.colorB})</small></div>\n                            )}\n                        </div>\n                    </div>\n                    <div className=\"h-25\">\n                        <div className=\"hori-slider-wrapper w-100 position-relative d-inline-flex\">\n                            <FormControlLabel\n                                control={\n                                    <Switch\n                                        checked={image.editorState.sepia}\n                                        onChange={this.sliderChangeSepia}\n                                        value=\"true\"\n                                        color=\"primary\"\n                                    />\n                                }\n                                label=\"Sepia\"\n                            />\n                        </div>\n\n                    </div>\n\n\n                </div>\n            </div>\n\n        )\n\n    }\n}\n\n","import React from \"react\";\nimport * as tools from \"../../tools\";\nimport Icon from \"@material-ui/core/Icon\";\nimport Fab from '@material-ui/core/Fab';\nimport ImageEditorZoom from \"./ImageEditorZoom\";\nimport ImageEditorBrightness from \"./ImageEditorBrightness\";\nimport ImageEditorColor from \"./ImageEditorColor\";\nimport Paper from \"@material-ui/core/Paper\";\n\nexport default class ImageEditor extends React.Component {\n    state = {\n        showTabButton: true,\n    };\n\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if(!this.props.app.images[this.props.app.currentImage].editorState.initedMask) {\n            this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas:true, currentTab:0} );\n        }\n    }\n\n    tabChange = (value) => {\n        this.props.appImageChanged( this.props.app.currentImage, {needUpdateCanvas:true, currentTab:value} );\n    };\n\n    // setStateFromChild=(newState, callback)=> {\n    //     // console.log(newState);\n    //     this.setState(newState, ()=>{\n    //         if(typeof(callback)==='function') callback();\n    //     });\n    // };\n\n\n    alignTop = ()=> {\n        let image = this.props.app.images[this.props.app.currentImage];\n        // if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) return;\n        let sliderPositionTB = 0;\n        if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) {\n            sliderPositionTB = (image.editorState.imgWidth-image.editorState.imgHeight)/2;\n        }\n        this.props.appImageChanged( this.props.app.currentImage, {sliderPositionTB:sliderPositionTB} );\n    };\n\n    alignRight = ()=> {\n        let image = this.props.app.images[this.props.app.currentImage];\n        // if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) return;\n\n        let imgWidth = tools.dpi_inch2dots(image.width, image.format.dpi)*image.editorState.imageZoom*image.editorState.ratio;\n        let sliderPositionLR = this.props.app.editorWidth - image.editorState.maskLR*2 - imgWidth;\n\n        if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) {\n            sliderPositionLR += (image.editorState.imgWidth-image.editorState.imgHeight)/2;\n        }\n        this.props.appImageChanged( this.props.app.currentImage, {sliderPositionLR: sliderPositionLR} );\n\n    };\n\n    alignBottom = ()=> {\n        let image = this.props.app.images[this.props.app.currentImage];\n        // if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) return;\n        let imgHeight = tools.dpi_inch2dots(image.height, image.format.dpi)*image.editorState.imageZoom*image.editorState.ratio;\n        let sliderPositionTB =  this.props.app.editorHeight - image.editorState.maskTB*2 - imgHeight;\n        if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) {\n            sliderPositionTB -= (image.editorState.imgWidth-image.editorState.imgHeight)/2;\n        }\n\n        this.props.appImageChanged( this.props.app.currentImage, {sliderPositionTB:sliderPositionTB} );\n    };\n\n    alignLeft = ()=> {\n        let image = this.props.app.images[this.props.app.currentImage];\n        // if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) return;\n        let sliderPositionLR = 0;\n        if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270) {\n            sliderPositionLR -= (image.editorState.imgWidth-image.editorState.imgHeight)/2;\n        }\n\n        this.props.appImageChanged( this.props.app.currentImage, {sliderPositionLR:sliderPositionLR} );\n    };\n\n    render() {\n\n        const image = this.props.app.images[this.props.app.currentImage];\n        let currentTab = image.editorState.currentTab;\n        if(currentTab<0 || currentTab>2) currentTab = 0;\n\n        return (\n            <div className=\"h-100\" ref={(node)=>{this.editorWrapper=node}}>\n                <div ref={(node)=>{this.editorTabs=node}} className=\"app-main-editor-visual-container-tabs\">\n\n                </div>\n                <Paper className=\"app-main-editor-visual-container-controls app-bg-e h-100 position-relative\">\n                    {currentTab===0 &&(\n                        <ImageEditorZoom\n                            {...this.props}\n                            alignTop = {this.alignTop.bind(this)}\n                            alignRight = {this.alignRight.bind(this)}\n                            alignBottom = {this.alignBottom.bind(this)}\n                            alignLeft = {this.alignLeft.bind(this)}\n                        />\n                    )}\n                    {currentTab===1 &&(\n                        <ImageEditorBrightness\n                            {...this.props}\n                        />\n                    )}\n                    {currentTab===2 &&(\n                        <ImageEditorColor\n                            {...this.props}\n                        />\n                    )}\n\n                    <div onClick={ ()=>{this.setState({showTabButton: !this.state.showTabButton})} }\n                        className=\"app-btn-pie app-main-editor-tabs-pie bg-primary text-light \">\n                        <Icon>settings_brightness</Icon>\n                    </div>\n\n                    {this.state.showTabButton &&(\n                        <Fab color=\"primary\" className={'app-main-editor-tabs-pie-button position-absolute bg-success'}\n                             style={{right: '1em', bottom: '8em'}}\n                             onClick={()=>{this.tabChange(2)}}\n                             disabled={false}\n                             aria-label=\"Colors\">\n                            <Icon>tune</Icon>\n                        </Fab>\n\n                    )}\n\n                    {this.state.showTabButton &&(\n                        <Fab color=\"primary\" className={'app-main-editor-tabs-pie-button position-absolute bg-success'}\n                             style={{right: '5.5em', bottom: '5.5em' }}\n                             onClick={()=>{this.tabChange(1)}}\n                             disabled={false}\n                             aria-label=\"Brightness\"\n                             type=\"button\" >\n                            <Icon>brightness_medium</Icon>\n                        </Fab>\n                    )}\n\n                    {this.state.showTabButton &&(\n                        <Fab color=\"primary\" className={'app-main-editor-tabs-pie-button position-absolute bg-success'}\n                             style={{right: '8em', bottom: '1em' }}\n                             onClick={()=>{this.tabChange(0)}}\n                             disabled={false}\n                             aria-label=\"Zoom\">\n                            <Icon>transform</Icon>\n                        </Fab>\n                    )}\n\n                    {this.state.showTabButton &&(\n                        <Fab color=\"primary\" className={'app-main-editor-tabs-pie-button position-absolute bg-success'}\n                             style={{right: '1em', bottom: '18em' }}\n                             onClick={()=>{this.props.changeCountImage(this.props.app.currentImage, image.count+1)}}\n                             disabled={image.count>98}\n                             aria-label=\"Increase\">\n                            <Icon>add</Icon>\n                        </Fab>\n                    )}\n\n                    {this.state.showTabButton &&(\n                        <Fab color=\"primary\" className={'app-main-editor-tabs-pie-button position-absolute bg-success'}\n                             style={{right: '1em', bottom: '13em' }}\n                             onClick={()=>{this.props.changeCountImage(this.props.app.currentImage, image.count-1)}}\n                             disabled={image.count<0}\n                             aria-label=\"Decrease\">\n                            <Icon>remove</Icon>\n                        </Fab>\n                    )}\n\n                </Paper>\n\n\n\n\n\n\n            </div>\n\n        )\n    }\n}\n\n","import React from 'react';\n\nimport './index.css';\n\nimport t from \"../i18n\";\nimport * as tools from \"../../tools\";\n\n\nimport ImageThumb from \"./ImageThumb\"\nimport ImageEditor from \"./ImageEditor\"\n\nimport Paper from \"@material-ui/core/Paper\";\nimport Icon from \"@material-ui/core/Icon\";\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Fab from \"@material-ui/core/Fab\";\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\n\n\nexport default class PageEditor extends React.Component {\n    constructor(props) {\n        super(props);\n        this.undo = {\n            history:[],\n            current:null,\n            skipChanges: true,\n        };\n\n\n        this.state = {\n            confirmBack: false,\n            imagesCount: 0,\n            imagesSum: 0,\n        };\n    }\n\n    componentDidMount() {\n        // if(this.props.app.currentImage===null)\n            this.selectImage(0);\n        this.countSumm();\n    };\n\n    countSumm() {\n        let imagesCount = 0;\n        let imagesSum = 0;\n        let len=this.props.app.images.length;\n        for(let i=0; i<len; i++) {\n            imagesCount += this.props.app.images[i].count;\n            imagesSum += this.props.app.images[i].count * this.props.app.images[i].format.cost;\n        }\n        this.setState({imagesCount:imagesCount, imagesSum:imagesSum})\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        if(this.props.app.images[this.props.app.currentImage].editorState.initedImagePosition && this.props.app.images[this.props.app.currentImage].editorState.initedMask) {\n            let wasChanged = true;\n            if(this.undo.history.length>0) {\n                let lastUndo = this.undo.history[this.undo.history.length-1];\n                wasChanged = !(tools.deepCompare(lastUndo, this.props.app.images[this.props.app.currentImage].editorState));\n            }\n            // console.log('skipChanges:', this.undo.skipChanges, 'history.length', this.undo.history.length);\n            if(!this.undo.skipChanges || this.undo.history.length===0) {\n                // console.log('wasChanged:', wasChanged);\n                if(wasChanged) {\n                    if(this.undo.current!==null) {\n                        this.undo.history = this.undo.history.slice(0, this.undo.current-1);\n                        // console.log('this.undo.history.slice', 0, this.undo.current);\n                        // console.log('slice undo', this.undo);\n                    }\n                    this.undo.history.push( Object.assign({}, this.props.app.images[this.props.app.currentImage].editorState ) );\n                    let maxHistoryLength = 99;\n                    if(this.undo.history.length>maxHistoryLength) {\n                        let start = this.undo.history.length-maxHistoryLength;\n                        this.undo.history = this.undo.history.slice(start, start+maxHistoryLength);\n                    }\n                    this.undo.current =null;\n                    // console.log('add undo', this.undo);\n                }\n            }\n            this.undo.skipChanges = false;\n        }\n\n        return true;\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n\n        // if(!this.props.app.images[this.props.app.currentImage].editorState.initedMask) {\n\n\n        // if(!this.props.app.images[0].editorState.initedMask) {\n        //     this.selectImage(0);\n        //     return;\n        // }\n        this.props.savePages();\n\n\n    }\n\n    checkUndo = () => {\n        return !(this.undo.history.length===1 || this.undo.current===0);\n    };\n    clickUndo = () => {\n        if(!this.checkUndo) return false;\n        let currentUndo = this.undo.history.length-2;\n        if(this.undo.current>0) currentUndo = this.undo.current-1;\n        this.props.appImageChanged( this.props.app.currentImage, this.undo.history[currentUndo] );\n\n        this.undo.current = currentUndo;\n        this.undo.skipChanges = true;\n\n        // console.log('clickUndo', currentUndo);\n        // console.log('undo:', this.undo);\n\n    };\n\n    checkRedo = () => {\n        return !(this.undo.current===null || this.undo.current===this.undo.history.length-1);\n    };\n    clickRedo = () => {\n        if(!this.checkRedo) return false;\n        let currentUndo = this.undo.current+1;\n        this.props.appImageChanged( this.props.app.currentImage, this.undo.history[currentUndo] );\n\n        this.undo.current = currentUndo;\n        this.undo.skipChanges = true;\n\n        // console.log('clickRedo', currentUndo);\n        // console.log('undo:', this.undo);\n\n    };\n\n    selectImage = (index) => {\n        // console.log('selected '+index, this.props.app.currentImage);\n        if(index!==this.props.app.currentImage) {\n            this.undo = {\n                history:[],\n                current:null,\n                skipChanges: true,\n            };\n        }\n\n        this.props.appSetState({\n            currentImage : index,\n        });\n    };\n\n    changeCurrentImage = (step) => {\n        const newCurrent = this.props.app.currentImage+step;\n        if(newCurrent>=0 && newCurrent<this.props.app.images.length) {\n            this.selectImage(newCurrent);\n        }\n    };\n\n    changeCountImage = (index, count) => {\n        if(count>-1) {\n            let images = this.props.app.images;\n            images[index].count = count;\n            let state = {images : images};\n            if(count===0) {\n                this.changeCurrentImage(1);\n            }\n            this.props.appSetState(state, ()=>{this.countSumm()})\n        } else {\n            this.changeCurrentImage(1);\n            if(this.props.app.currentImage<this.props.app.images.length-1) {\n                this.props.appSetState({currentImage : this.props.app.currentImage+1});\n            }\n        }\n\n    };\n\n\n    scrollIntoViewIfNeed = (domNode) => {\n        domNode.scrollIntoViewIfNeeded();\n    };\n\n    backPressed() {\n        this.setState({confirmBack: true});\n\n    }\n    backConfirmed(back) {\n        if(back) {\n            this.props.onClickPrevBtn();\n        }\n        this.setState({confirmBack: false});\n    }\n\n    openFormatsPanel = () => {\n        this.setState({isFormatsOpen:!this.state.isFormatsOpen});\n    };\n\n    formatChange(index) {\n        let format = this.props.app.formats[index];\n        let currentImage = this.props.app.currentImage;\n        let images = this.props.app.images; //[this.props.app.currentImage];\n        images[currentImage].format = format;\n        images[currentImage].editorState.initedMask = false;\n        images[currentImage].editorState.initedImagePosition = false;\n\n        this.props.appSetState({images: images}, ()=>{\n            this.props.appImageInitMask(currentImage, true, ()=>{\n                this.props.alignInit(currentImage, ()=>{this.countSumm()});\n            });\n        });\n\n        // appSetState\n        this.setState({isFormatsOpen:false});\n    }\n\n    repeatColors =() => {\n        let colors = this.getColorsToRepeat();\n        if(colors)\n            this.props.appImageChanged( this.props.app.currentImage, colors );\n    };\n\n    getColorsToRepeat = () => {\n        if(this.props.app.currentImage===null || this.props.app.currentImage===0) return false;\n        let editorState = this.props.app.images[this.props.app.currentImage-1].editorState;\n        let current =  this.props.app.images[this.props.app.currentImage].editorState;\n        let hasChange = false;\n        if(editorState.brightness!==current.brightness) hasChange = true;\n        if(editorState.contrast!==current.contrast) hasChange = true;\n        if(editorState.saturate!==current.saturate) hasChange = true;\n        if(editorState.colorR!==current.colorR) hasChange = true;\n        if(editorState.colorG!==current.colorG) hasChange = true;\n        if(editorState.colorB!==current.colorB) hasChange = true;\n\n        if(!hasChange) return false;\n        return {\n            brightness: editorState.brightness,\n            contrast: editorState.contrast,\n            saturate: editorState.saturate,\n            colorR: editorState.colorR,\n            colorG: editorState.colorG,\n            colorB: editorState.colorB,\n        }\n    };\n\n    render() {\n\n        let image = this.props.app.images[this.props.app.currentImage];\n        let format = image ? image.format : {};\n        // let format_lanscape = (format.width-format.height)>1;\n\n        let formatsList = this.state.isFormatsOpen ? (\n            <ClickAwayListener onClickAway={()=>{this.openFormatsPanel()}}>\n                <Paper className=\"app-main-change-formats scrollbar position-absolute\">\n                    <table className=\"table-formats\">\n                        {this.props.app.formats.map( (format, index)=>format.enabled ?\n                            <tbody key={index} onClick={()=>this.formatChange(index)}>\n                            <tr>\n                                <th scope=\"row\">{format.name}</th>\n                                <th scope=\"row\">{format.height}\"x {format.width}\"</th>\n                                <th scope=\"row\">{Math.round(format.height*25.4)}x{Math.round(format.width*25.4)}</th>\n                                <th scope=\"row\">{t(format.surface)}</th>\n                                <th scope=\"row\">{tools.Round(format.cost)}</th>\n                            </tr>\n                            </tbody>\n\n                            : '' )}\n                    </table>\n                </Paper>\n            </ClickAwayListener>\n        ) : null;\n\n        let rightwidget = (\n            <div className=\"app-main-rightwidget h-100 p-2 d-inline-block\">\n                <Paper className=\"h-100 p-2 app-bg-e position-relative\">\n                    <div className=\"_fabwrapper\">\n                        <button className={\"btn btn-big btn-primary\"}\n                                onClick={() => this.props.onClickNextBtn()}\n                                disabled={false}\n                                title={t('Next')}\n                                type=\"button\" >\n                            <Icon>arrow_forward</Icon> {t('Next')}\n                        </button>\n                    </div>\n\n                    <div className=\"_fabwrapper\">\n                        <button className={\"btn btn-big btn-primary\"}\n                                onClick={this.backPressed.bind(this)}\n                                disabled={false}\n                                title={t('Previous')}\n                                type=\"button\" >\n                            <Icon>arrow_back</Icon> {t('Previous')}\n                        </button>\n                    </div>\n\n                    <div className=\"_fabwrapper\">\n                        <button className=\"btn btn-light mr-2\"\n                                onClick={this.repeatColors.bind(this)}\n                                disabled={!this.getColorsToRepeat()}\n                                title={t('repeat color settings')}\n                                type=\"button\" >\n                            <Icon>compare</Icon>\n                        </button>\n\n                        <button className=\"btn btn-light mr-2\"\n                                onClick={this.clickUndo.bind(this)}\n                                disabled={!this.checkUndo()}\n                                title={t('Undo')}\n                                type=\"button\" >\n                            <Icon>undo</Icon>\n                        </button>\n\n                        <button className=\"btn btn-light mr-2\"\n                                onClick={this.clickRedo.bind(this)}\n                                disabled={!this.checkRedo()}\n                                title={t('Redo')}\n                                type=\"button\" >\n                            <Icon>redo</Icon>\n                        </button>\n                    </div>\n\n                    <div className=\"app-main-rightwidget-tablewrp\">\n\n                        {formatsList}\n\n                        <Fab color=\"primary\" className=\"app-main-change-formats-button position-absolute text-primary bg-light\"\n                             style={{right: '0', bottom: '100%' }}\n                             onClick={()=>{this.openFormatsPanel()}}\n                             aria-label=\"Colors\">\n                            <Icon>menu</Icon>\n                        </Fab>\n\n                        <table className=\"table\">\n                            <tbody>\n\n                            <tr>\n                                <th scope=\"row\" colSpan={2}>\n                                    {t('Format')} {format.name}\n                                </th>\n                            </tr>\n                            <tr>\n                                <th scope=\"row\" colSpan={2}>\n                                    {format.height}\"x {format.width}\" {Math.round(format.height*25.4)}x{Math.round(format.width*25.4)}\n                                </th>\n                            </tr>\n\n                            <tr>\n                                <th scope=\"row\">{t('Files')}</th>\n                                <th scope=\"row\">{this.props.app.images.length} / {this.state.imagesCount}</th>\n                            </tr>\n                            <tr>\n                                <th scope=\"row\">{t('Cost')}</th>\n                                <th scope=\"row\">{tools.Round(this.state.imagesSum)}</th>\n                            </tr>\n                            </tbody>\n                        </table>\n\n                    </div>\n\n                </Paper>\n\n            </div>\n        );\n        let dialogConfirmBack = (\n            <Dialog\n                open={this.state.confirmBack}\n                onClose={()=>this.backConfirmed(false)}\n                aria-labelledby=\"alert-dialog-title\"\n                aria-describedby=\"alert-dialog-description\"\n            >\n                <DialogTitle id=\"alert-dialog-title\">{t(\"Warning\")}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText id=\"alert-dialog-description\">\n                        {t('Current state of editor images will be lost.')} {t('Are you sure?')}\n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <button onClick={()=>this.backConfirmed(true)} className={\"btn btn-big btn-light\"} autoFocus>\n                        {t('OK')}\n                    </button>\n                    <button onClick={()=>this.backConfirmed(false)} className={\"btn btn-big btn-primary\"}>\n                        {t('Cancel')}\n                    </button>\n                </DialogActions>\n            </Dialog>\n\n        );\n\n        return (\n            <div className=\"app-page app-bg-e0 app-page-start w-100 h-100\">\n                <div style={{display:'none', visibility:'hidden'}}>\n                    <canvas ref={(node)=>{this.processCanvasNode=node}} />\n                </div>\n                <div className=\"app-main h-75\">\n                    <div className=\"app-main-selectors w-100 h-100\">\n\n                        <div className=\"app-main-editor-wrapper h-100 p-2 d-inline-block\">\n                            <div className=\" h-100 position-relative\">\n                                {this.props.app.currentImage!==null && (\n                                    <ImageEditor\n                                        changeCountImage={this.changeCountImage.bind(this)}\n                                        processCanvas={this.processCanvasNode}\n                                        onMessage={this.props.onMessage}\n                                        {...this.props}\n                                    />\n                                )}\n                            </div>\n                        </div>\n\n                        {rightwidget}\n\n                    </div>\n\n                </div>\n\n                <Paper className=\"app-bottomframe h-25 p-2 position-relative app-bg-e\">\n                    <div className=\"app-bottom-thumblist-button\">\n                        <button type=\"button\"\n                                className={\"btn btn-primary\"}\n                                disabled={this.props.app.currentImage===0}\n                                onClick={()=>{this.changeCurrentImage(-1)}}>\n                            <Icon>navigate_before</Icon>\n                        </button>\n                    </div>\n                    <div className=\"scrollbar _horizontal h-100 w-100\">\n\n                        <div id='listImages' className=\"app-bottom-thumblist h-100 p-2\">\n                            {this.props.app.images.map( (image, index)=>\n                                <ImageThumb\n                                    key={index}\n                                    image={image}\n                                    itemIndex={index}\n                                    selected={this.props.app.currentImage===index}\n                                    onSelect={()=>this.selectImage(index)}\n                                    scrollIntoView={this.scrollIntoViewIfNeed}\n                                    {...this.props}\n                                />\n                            )}\n\n                        </div>\n\n                    </div>\n\n                    <div className=\"app-bottom-thumblist-button\">\n                        <button type=\"button\"\n                                className={\"btn btn-primary\"}\n                                disabled={this.props.app.currentImage===this.props.app.images.length-1}\n                                onClick={()=>{this.changeCurrentImage(1)}}>\n                            <Icon>navigate_next</Icon>\n                        </button>\n                    </div>\n                </Paper>\n\n                {dialogConfirmBack}\n            </div>\n\n        )\n    }\n}\n\n\n\n\n\n","import React from 'react';\nimport * as tools from \"../../tools\";\nimport axios from \"axios\";\n\nimport './index.css';\nimport Icon from \"@material-ui/core/Icon\";\nimport Paper from '@material-ui/core/Paper';\nimport {makeGetUri} from \"../../tools\";\nimport Switch from \"@material-ui/core/Switch\";\nimport Fab from \"@material-ui/core/Fab\";\nimport t from \"../i18n\";\n\n\nexport default class PageSetupFormats extends React.Component {\n\n    state = {\n        editedFormats: null,\n    };\n\n    componentDidMount() {\n        let formats = this.props.app.formats.filter((f)=>!f.rotated);\n        for(let i=0; i<formats.len; i++) {\n            formats[i].cost = tools.Round(formats[i].cost)\n        }\n        this.setState( {editedFormats: formats} );\n\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n    }\n\n    formatNew = ()=>{\n        let formats = this.state.editedFormats.slice();\n        if(formats.length>0) {\n            formats.push( Object.assign({}, formats[formats.length-1]) );\n        } else {\n            formats.push( {} );\n        }\n        const last = formats.length-1;\n        formats[last].name = 'new format';\n        formats[last].enabled = false;\n\n        this.setState({editedFormats: formats});\n\n    };\n\n    formatRemove = (index) => {\n        let formats = this.state.editedFormats;\n        formats.splice(index,1);\n        this.setState({editedFormats: formats});\n\n    };\n    formatChange = (index, id, ev) => {\n        let formats = this.state.editedFormats;\n        let changed = true;\n        switch (id) {\n            case 'enabled':\n            case 'portrait':\n                formats[index][id] = !formats[index][id];\n                break;\n\n            case 'name':\n            case 'height':\n            case 'width':\n            case 'surface':\n                formats[index][id] = ev.target.value;\n                break;\n\n            case 'dpi':\n                formats[index][id] = tools.Round(ev.target.value,0);\n                break;\n\n            case 'cost':\n                const x = ev.target.value.replace(/,/g,'.');\n                formats[index][id] = x;\n                break;\n\n            default:\n                changed = false;\n\n        }\n        if(changed)\n            this.setState({editedFormats: formats});\n    };\n\n    formatSave() {\n        let formats = this.state.editedFormats.slice();\n        console.log(formats);\n        for(let i=0; i<formats.length; i++) {\n            // console.log(i, formats[i]);\n\n            formats[i].dpi = Math.max(150, Math.min(tools.Round(formats[i].dpi,0), 1500));\n            formats[i].cost = tools.Round(formats[i].cost,2);\n        }\n        let uri = makeGetUri();\n        const params = new URLSearchParams();\n        params.append('q', 'setupFormatSave');\n        params.append('formats', JSON.stringify(formats));\n        params.append('p', this.props.app.isSetupPassword);\n        axios.post(uri, params ).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    this.props.appSetState({formats: formats}, ()=>{\n                        this.props.onMessage( t('successful saved') );\n                    });\n\n                } else {\n                    this.props.onMessage('error :'+res.data.error);\n                }\n            } else {\n                console.log('axios.post status ', res.status);\n            }\n        });\n    }\n\n    formatMove(index,shift) {\n        let newIndex = index+shift;\n\n        console.log(newIndex);\n        if(newIndex<0 || newIndex>this.state.editedFormats.length-1 ) {\n            return false;\n        }\n        let formats = this.state.editedFormats.slice();\n        let tmp = formats[index];\n        formats[index] = formats[newIndex];\n        formats[newIndex] = tmp;\n        this.setState({editedFormats: formats});\n\n    }\n\n    render() {\n\n        let formats = (this.state.editedFormats ? this.state.editedFormats : []);\n\n        return (\n            <div className=\"app-page app-bg-e0 app-page-setup-formats w-100 h-100\">\n                <div className=\"app-setup  h-100\">\n\n\n\n                    <div className=\"app-setup-main h-100\">\n                        <Paper className=\"app-setup-formats scrollbar p-2 h-100\">\n                            <div className=\"app-setup-formats-header\">\n                                <div className=\"_wrp _wrp_enabled\"><small>On</small></div>\n                                <div className=\"_wrp _wrp_name\"><small>{t('Name')}</small></div>\n                                <div className=\"_wrp _wrp_dpi\"><small>DPI</small></div>\n                                <div className=\"_wrp _wrp_height\"><small>{t('Height')}</small></div>\n                                <div className=\"_wrp _wrp_width\"><small>{t('Width')}</small></div>\n                                <div className=\"_wrp _wrp_surface\"><small>{t('Surface')}</small></div>\n                                <div className=\"_wrp _wrp_cost\"><small>{t('Cost')}</small></div>\n                                <div className=\"_wrp _wrp_portrait\"><small>{t('Portrait')}</small></div>\n                                <div className=\"_wrp _wrp_movecontrol\"> </div>\n                            </div>\n\n                            {formats.map((format, index)=>\n                                <div key={index} className={\"app-setup-format-item\"+(format.enabled ? '' : ' _disabled' )}>\n                                    <div className=\"_wrp _wrp_enabled\">\n                                        <Switch\n                                            checked={format.enabled}\n                                            onChange={(ev) => this.formatChange(index,'enabled', ev)}\n                                            value={'enabled'}\n                                            color=\"primary\"\n                                        />\n\n                                    </div>\n                                    <div className=\"_wrp _wrp_name\">\n                                        <input type=\"text\" value={format.name} onChange={(ev) => this.formatChange(index,'name', ev)}/>\n                                    </div>\n                                    <div className=\"_wrp _wrp_dpi\">\n                                        <input type=\"text\" value={format.dpi} onChange={(ev) => this.formatChange(index,'dpi', ev)}/>\n                                    </div>\n                                    <div className=\"_wrp _wrp_height\">\n                                        <select value={format.height} data-hint={format.height} onChange={(ev) => this.formatChange(index,'height', ev)}>\n                                            {[2.5, 3.5, 4, 4.5, 5, 6, 8, 8.27, 10, 11, 12].map((h, i)=>\n                                                <option key={i} value={h}>{h}\" ({Math.round(h*25.4)})</option>\n                                            )}\n                                        </select>\n\n                                    </div>\n                                    <div className=\"_wrp _wrp_width\">\n                                        <select value={format.width} onChange={(ev) => this.formatChange(index,'width', ev)}>\n                                            {[3.5, 5, 6, 7, 8, 8.27, 10, 12, 14, 15, 16, 17, 18].map((h, i)=>\n                                                <option key={i} value={h}>{h}\" ({Math.round(h*25.4)})</option>\n                                            )}\n                                        </select>\n                                    </div>\n                                    <div className=\"_wrp _wrp_surface\">\n                                        <select value={format.surface} onChange={(ev) => this.formatChange(index,'surface', ev)}>\n                                            {['glance', 'matte'].map((h, i)=>\n                                                <option key={i} value={h}>{t(h)}</option>\n                                            )}\n                                        </select>\n                                    </div>\n                                    <div className=\"_wrp _wrp_cost\">\n                                        <input type=\"text\" value={format.cost} onChange={(ev) => this.formatChange(index,'cost', ev)}/>\n                                    </div>\n                                    <div className=\"_wrp _wrp_portrait\">\n                                        <Switch\n                                            checked={format.portrait}\n                                            onChange={(ev) => this.formatChange(index,'portrait', ev)}\n                                            value={'portrait'}\n                                            color=\"primary\"\n                                        />\n                                    </div>\n\n                                    {format.enabled && (\n                                        <div className=\"_wrp _wrp_movecontrol\">\n                                            <div>\n                                                <Icon className=\"text-primary\"\n                                                      onClick={()=>{this.formatMove(index,-1)}}\n                                                >arrow_upward</Icon>\n                                            </div>\n                                            <div>\n                                                <Icon className=\"text-primary\"\n                                                      onClick={()=>{this.formatMove(index,1)}}\n                                                >arrow_downward</Icon>\n                                            </div>\n                                        </div>\n                                    )}\n                                    {!format.enabled && (\n                                        <div className=\"_wrp _wrp_movecontrol\">\n                                            <Fab className={\"app-setup-format-item-remove\"}\n                                                 onClick={() => this.formatRemove(index)}\n                                                 color=\"secondary\" aria-label=\"Remove\"\n                                                 size=\"small\">\n                                                <Icon>delete</Icon>\n                                            </Fab>\n                                        </div>\n\n                                    )}\n\n\n\n\n                                    <hr/>\n                                </div>\n                            )\n                            }\n                            <div className=\"app-setup-format-new\">\n                                <button className={\"btn btn-primary\"}\n                                        onClick={this.formatNew}\n                                        disabled={false}\n                                        title=\"newFormat\"\n                                        type=\"button\" >\n                                    <Icon>add</Icon>\n                                </button>\n                                <span className=\"float-right\">\n                                    <button className={\"btn btn-success \"}\n                                            onClick={this.formatSave.bind(this)}\n                                            disabled={false}\n                                            title=\"Save\"\n                                            type=\"button\" >\n                                        <Icon>save</Icon>\n                                    </button>\n\n                                </span>\n                            </div>\n\n                        </Paper>\n                    </div>\n\n\n                </div>\n            </div>\n        )\n    }\n}\n\n","import React from 'react';\nimport axios from \"axios\";\nimport * as tools from \"../../tools\";\n\n\nimport './index.css';\nimport Icon from \"@material-ui/core/Icon\";\nimport Paper from '@material-ui/core/Paper';\nimport t from \"../i18n\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\n\n\nexport default class PageSetupArchive extends React.Component {\n\n    state = {\n        arhives: [],\n        currentArchive: null,\n        isLoading: false,\n        archiveFiles: [],\n        currentArchiveFile: null,\n        isMultipleSelectOrders: false,\n        isDeleteConfirmation: 0,\n    };\n\n\n    componentDidMount() {\n        this.loadList();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n    }\n\n    loadList() {\n        if(this.state.isLoading) return;\n\n        let uri = tools.makeGetUri({'q':'loadArchives', 'p': this.props.app.isSetupPassword});\n        this.setState({arhives:[], currentArchive:null, archiveFiles:[], isLoading:true});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    if(res.data.data) {\n                        let arhives = res.data.data.map((d)=>{return {folder:d, selected:false}});\n                        this.setState({arhives: arhives});\n                    }\n                }\n            }\n            this.setState({isLoading: false});\n        });\n\n    }\n\n    tryDeleteArchive() {\n        let archCount = 0;\n        const isMultipleSelectOrders = this.state.isMultipleSelectOrders;\n        if (isMultipleSelectOrders) {\n            let as = this.state.arhives.filter((a)=>{return a.selected});\n            console.log(as);\n            archCount = as.length;\n        }\n        if(archCount>0)\n            this.setState({isDeleteConfirmation: archCount});\n    }\n    deleteArchive() {\n        const isMultipleSelectOrders = this.state.isMultipleSelectOrders;\n        if (isMultipleSelectOrders) {\n            let len = this.state.arhives.length;\n            for( let i=0; i<len; i++) {\n                if(this.state.arhives[i].selected)\n                    this._remove(this.state.arhives[i].folder);\n            }\n        }\n\n        this.setState({isDeleteConfirmation:0, isMultipleSelectOrders:false, currentArchive:null, archiveFiles:[]});\n    }\n    _remove(folder) {\n        let uri = tools.makeGetUri({'q':'removeArchive', folder: folder, 'p': this.props.app.isSetupPassword});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    this.loadList();\n                }\n            }\n        });\n    }\n\n    toggleMultiple() {\n        const isMultipleSelectOrders = !this.state.isMultipleSelectOrders;\n        if (!isMultipleSelectOrders) {\n            let arhives = this.state.arhives.slice();\n            let len = arhives.length;\n            for( let i=0; i<len; i++) {\n                arhives[i].selected = false;\n            }\n            this.setState({arhives: arhives, isMultipleSelectOrders: isMultipleSelectOrders});\n        } else {\n            this.setState({isMultipleSelectOrders: isMultipleSelectOrders});\n        }\n    }\n\n    selectArchive(index) {\n        if(this.state.isMultipleSelectOrders) {\n            let arhives = this.state.arhives.slice();\n            arhives[index].selected = !arhives[index].selected;\n            this.setState({arhives: arhives, currentArchive: index});\n        } else {\n            this.setState({currentArchive: index});\n        }\n        if(index===this.state.currentArchive) return;\n\n        let uri = tools.makeGetUri({'q':'loadArchive', folder: this.state.arhives[index].folder, 'p': this.props.app.isSetupPassword});\n        this.setState({archiveFiles: [], isLoading: true});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    if(res.data.data) {\n                        this.setState({archiveFiles: res.data.data});\n                    }\n                }\n            }\n            this.setState({isLoading: false, currentArchiveFile: null});\n        });\n    }\n\n    selectFile(index) {\n        this.setState({currentArchiveFile: index});\n    }\n\n    render() {\n        let archiveCount = 0;\n        let archiveTotal = 0;\n        let archiveDate = '';\n        let len = this.state.archiveFiles.length;\n        for(let i=0; i<len; i++) {\n            archiveCount += this.state.archiveFiles[i].count;\n            archiveTotal += this.state.archiveFiles[i].format.cost * this.state.archiveFiles[i].count;\n            archiveDate = this.state.archiveFiles[i].date+' '+this.state.archiveFiles[i].time;\n        }\n\n        let archiveFile = null;\n        if(this.state.currentArchiveFile>=0 && this.state.archiveFiles[this.state.currentArchiveFile]) {\n            archiveFile = this.state.archiveFiles[this.state.currentArchiveFile];\n            // console.log(archiveFile);\n        }\n\n        const isMultipleSelectOrders = this.state.isMultipleSelectOrders;\n        let selectedArchiveCount = 0;\n        if (isMultipleSelectOrders) {\n            let as = this.state.arhives.filter((a)=>{return a.selected});\n            console.log(as);\n            selectedArchiveCount = as.length;\n        }\n\n        return (\n            <div className=\"app-page app-bg-e0 app-page-setup-formats w-100 h-100\">\n                <div className=\"app-setup  h-100\">\n\n\n\n                    <div className=\"app-setup-main h-100\">\n                        <Paper className=\"app-setup-arhives p-2 h-100 w-100 d-flex flex-column\">\n                            <div className=\"_listswrp flex-grow-1 h-75\">\n                                <div className=\"h-100 d-flex flex-row\">\n                                    <div className=\"app-setup-archives-list scrollbar flex-grow-0 border position-relative\">\n                                        {(this.state.isLoading) && (\n                                            <div className = \"spinner-border text-primary position-absolute\" role = \"status\" >\n                                                <span className = \"sr-only\" > Loading...</span>\n                                            </div>\n                                        )}\n\n                                        {this.state.arhives.map((a, i)=>\n                                        <div key={i} className={\"_item\"+(i===this.state.currentArchive ? ' bg-primary text-light' : ' bg-light')}\n                                             onClick={()=>{this.selectArchive(i)}}\n                                        >\n\n                                            {isMultipleSelectOrders && (\n                                                <Icon fontSize={\"inherit\"} className=\"text-success\">{a.selected ? 'check_circle' : 'radio_button_unchecked'}</Icon>\n                                            )}\n                                            {a.folder}\n\n                                        </div>\n                                        ) }\n                                    </div>\n                                    <div className=\"app-setup-archive-files scrollbar flex-grow-0 border position-relative\">\n                                        {(this.state.isLoading) && (\n                                            <div className = \"spinner-border text-primary position-absolute\" role = \"status\" >\n                                                <span className = \"sr-only\" > Loading...</span>\n                                            </div>\n                                        )}\n                                        {this.state.archiveFiles.map((f, i)=>\n                                            <div key={i} className={\"_item\"+(i===this.state.currentArchiveFile ? ' bg-primary text-light' : ' bg-light')}\n                                                 onClick={()=>{this.selectFile(i)}}\n                                            >\n                                                {f.name}\n\n                                            </div>\n                                        ) }\n                                    </div>\n                                    <div className=\"app-setup-archive-fileview flex-grow-1 border h-100\">\n                                        <div className=\"d-flex flex-column h-100\">\n                                            <div className=\"_view-img border bg-light flex-grow-1\"\n                                                 style={{backgroundImage: (archiveFile ? \"url('\"+tools.makeGetUri()+archiveFile.file+\"')\" : '')}}\n                                            > </div>\n                                            <div className=\"_infobottom flex-grow-0\">\n                                                <table className=\"table\">\n                                                    <thead>\n                                                    <tr>\n                                                        <th scope=\"col\" colSpan=\"2\">{t('Format')}</th>\n                                                        <th scope=\"col\">{t('Amount')}</th>\n                                                        <th scope=\"col\">{t('Date')}</th>\n                                                        <th scope=\"col\">{t('Prints')}</th>\n                                                        <th scope=\"col\">{t('Total')}</th>\n                                                    </tr>\n                                                    </thead>\n                                                    <tbody>\n                                                        <tr>\n                                                            <td>{archiveFile ? archiveFile.format.name+' '+archiveFile.format.width+'\"x'+archiveFile.format.height+'\"' : ''}</td>\n                                                            <td>{archiveFile ? Math.round(archiveFile.format.height*25.4)+'x'+Math.round(archiveFile.format.width*25.4)+' , '+t(archiveFile.format.surface) : '' }</td>\n                                                            <td>{archiveFile ? archiveFile.count : ''}</td>\n                                                            <td>{archiveFile ? archiveFile.date+' '+archiveFile.time : archiveDate}</td>\n                                                            <td>{archiveCount}</td>\n                                                            <td>{tools.Round(archiveTotal)}</td>\n                                                        </tr>\n                                                    </tbody>\n                                                </table>\n\n\n                                            </div>\n                                        </div>\n\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"_btnswrp flex-grow-0\">\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className={\"btn btn-success btn \"}\n                                            onClick={()=>{this.loadList()}}\n                                            title=\"sample\"\n                                            type=\"button\" >\n                                        <Icon>refresh</Icon>\n                                    </button>\n\n                                </div>\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className={\"btn\"+(isMultipleSelectOrders ? ' btn-outline-success':' btn-outline-secondary')}\n                                            onClick={()=>{this.toggleMultiple()}}\n                                            title=\"multiple\"\n                                            type=\"button\" >\n                                        <Icon>filter_none</Icon>\n                                    </button>\n                                </div>\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className={\"btn btn-success btn \"}\n                                            onClick={()=>{this.tryDeleteArchive()}}\n                                            disabled={selectedArchiveCount===0}\n                                            title=\"Delete\"\n                                            type=\"button\" >\n                                        <Icon>delete_forever</Icon>\n                                    </button>\n\n                                </div>\n\n\n                            </div>\n                        </Paper>\n                    </div>\n\n\n                </div>\n\n\n                <Dialog\n                    open={this.state.isDeleteConfirmation>0}\n                    onClose={()=>this.setState({isDeleteConfirmation:0})}\n                    aria-labelledby=\"alert-dialog-title\"\n                    aria-describedby=\"alert-dialog-description\"\n                >\n                    <DialogTitle id=\"alert-dialog-title\">{t(\"Warning\")}</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText id=\"alert-dialog-description\">\n                            {t('You are selected archives to remove:')} <span className=\"text-center text-dark\" style={{fontSize:'1.4em'}}>{this.state.isDeleteConfirmation>0 ? this.state.isDeleteConfirmation : ''}</span>\n                            <br/>\n                            {t('Are you sure?')}\n                        </DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <button onClick={()=>this.deleteArchive()} className={\"btn btn-big btn-light\"}>\n                            {t('OK')}\n                        </button>\n                        <button onClick={()=>this.setState({isDeleteConfirmation:0})} className={\"btn btn-big btn-primary\"} autoFocus>\n                            {t('Cancel')}\n                        </button>\n                    </DialogActions>\n                </Dialog>\n\n            </div>\n        )\n    }\n}\n\n","import React from 'react';\nimport * as tools from \"../../tools\";\nimport axios from \"axios\";\n\nimport './index.css';\nimport Icon from \"@material-ui/core/Icon\";\nimport Paper from '@material-ui/core/Paper';\nimport {makeGetUri} from \"../../tools\";\nimport Switch from \"@material-ui/core/Switch\";\nimport Fab from \"@material-ui/core/Fab\";\nimport t from \"../i18n\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\n\n\nexport default class PageSetupSources extends React.Component {\n\n    state = {\n        editedSources: this.props.app.sources.slice(),\n        listIcons: [],\n        listScripts: [],\n        scriptTxt: false,\n\n    };\n\n    componentDidMount() {\n        if(!this.state.editedSources) {\n            this.setState({\n                editedSources: this.props.app.sources.slice()\n            });\n        }\n\n        let uri = tools.makeGetUri({'q':'setupSourcesListIcons', 'p': this.props.app.isSetupPassword});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    if(res.data.data) {\n                        this.setState({listIcons: res.data.data});\n                    }\n                }\n            }\n        });\n\n        uri = tools.makeGetUri({'q':'setupSourcesListScripts', 'p': this.props.app.isSetupPassword});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    if(res.data.data) {\n                        this.setState({listScripts: res.data.data});\n                    }\n                }\n            }\n        });\n    }\n\n    viewScript(name) {\n        let scriptTxt = false;\n        let len = this.state.listScripts.length;\n        for(let i=0; i<len; i++) {\n            console.log(this.state.listScripts[i].name, name);\n            if(this.state.listScripts[i].name === name) {\n                console.log('gotcha');\n                scriptTxt = this.state.listScripts[i].script;\n                break;\n            }\n        }\n        this.setState({scriptTxt: scriptTxt});\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n    }\n\n    sourceNew = ()=>{\n        let sources = this.state.editedSources.slice();\n        sources.push( Object.assign({}, sources[0]) );\n        const last = sources.length-1;\n        sources[last].name = 'new source';\n        sources[last].enabled = false;\n\n        this.setState({editedSources: sources});\n\n    };\n\n    sourceRemove = (index) => {\n        let sources = this.state.editedSources;\n        sources.splice(index,1);\n        this.setState({editedSources: sources});\n\n    };\n    sourceChange = (index, id, ev) => {\n        let sources = this.state.editedSources;\n        let changed = true;\n        switch (id) {\n            case 'enabled':\n            case 'emptyhide':\n            case 'autoclear':\n                sources[index][id] = !sources[index][id];\n                break;\n\n            case 'name':\n            case 'path':\n            case 'icon':\n            case 'scripton':\n            case 'scriptoff':\n                sources[index][id] = ev.target.value;\n                break;\n\n            default:\n                changed = false;\n\n        }\n        if(changed)\n            this.setState({editedSources: sources});\n    };\n\n    sourcesSave() {\n        let sources = this.state.editedSources;\n        // for(let i=0; i<sources.length; i++) {\n        //     console.log(i, sources[i]);\n        // }\n        let uri = makeGetUri();\n        const params = new URLSearchParams();\n        params.append('q', 'setupSourcesSave');\n        params.append('sources', JSON.stringify(sources));\n        params.append('p', this.props.app.isSetupPassword);\n        axios.post(uri, params ).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    this.props.appSetState({sources: sources}, ()=>{\n                        this.props.onMessage( t('successful saved') );\n                    });\n\n                } else {\n                    this.props.onMessage('error :'+res.data.error);\n                }\n            } else {\n                console.log('axios.post status ', res.status);\n            }\n        });\n    }\n\n    sourceMove(index,shift) {\n        let newIndex = index+shift;\n\n        console.log(newIndex);\n        if(newIndex<0 || newIndex>this.state.editedSources.length-1 ) {\n            return false;\n        }\n        let sources = this.state.editedSources.slice();\n        let tmp = sources[index];\n        sources[index] = sources[newIndex];\n        sources[newIndex] = tmp;\n        this.setState({editedSources: sources});\n\n    }\n\n    render() {\n\n        let sources = (this.state.editedSources ? this.state.editedSources : []);\n        let listIcons = this.state.listIcons;\n        let listScripts = this.state.listScripts;\n\n        return (\n            <div className=\"app-page app-bg-e0 app-page-setup-formats w-100 h-100\">\n                <div className=\"app-setup  h-100\">\n\n\n\n                    <div className=\"app-setup-main h-100\">\n                        <Paper className=\"app-setup-sources scrollbar p-2 h-100\">\n                            <div className=\"app-setup-sources-header\">\n                                <div className=\"_wrp _wrp_enabled\"><small>On</small></div>\n                                <div className=\"_wrp _wrp_name\"><small>{t('Name')}</small></div>\n                                <div className=\"_wrp _wrp_icondisplay\"> </div>\n                                <div className=\"_wrp _wrp_path\"><small>{t('Path')}</small></div>\n                                <div className=\"_wrp _wrp_scripton\"><small>{t('Script ON / OFF')}</small></div>\n                                <div className=\"_wrp _wrp_emptyhide\"><small>{t('Emptyhide')}</small></div>\n                                <div className=\"_wrp _wrp_autoclear\"><small>{t('Autoclear')}</small></div>\n                                <div className=\"_wrp _wrp_movecontrol\"> </div>\n                            </div>\n\n                            {sources.map((source, index)=>\n                                <div key={index} className={\"app-setup-source-item\"+(source.enabled ? '' : ' _disabled' )}>\n                                    <div className=\"_wrp _wrp_enabled\">\n                                        <Switch\n                                            checked={source.enabled}\n                                            onChange={(ev) => this.sourceChange(index,'enabled', ev)}\n                                            value={'enabled'}\n                                            color=\"primary\"\n                                        />\n\n                                    </div>\n                                    <div className=\"_wrp _wrp_name\">\n                                        <div>\n                                            <input type=\"text\" value={source.name} onChange={(ev) => this.sourceChange(index,'name', ev)} className=\"w-100\"/>\n                                        </div>\n                                        <div>\n                                            <select value={source.icon} data-value={source.icon} onChange={(ev) => this.sourceChange(index,'icon', ev)}  className=\"w-100\">\n                                                {listIcons.map((h, i)=>\n                                                    <option key={i} value={h}>{h.replace(/^.*[\\\\\\/]/, '')}</option>\n                                                )}\n                                            </select>\n\n                                        </div>\n                                    </div>\n                                    <div className=\"_wrp _wrp_icondisplay\"\n                                         style={{backgroundImage: (source.icon ? 'url('+tools.makeGetUri()+source.icon+')' : '')}}\n                                    > </div>\n                                    <div className=\"_wrp _wrp_path\">\n                                        <input type=\"text\" value={source.path} onChange={(ev) => this.sourceChange(index,'path', ev)} className=\"w-100\"/>\n                                    </div>\n                                    <div className=\"_wrp _wrp_scripton\">\n                                        <div>\n                                            <select value={source.scripton} onChange={(ev) => this.sourceChange(index,'scripton', ev)}>\n                                                <option key={'d'} value=''>{t('---')}</option>\n                                                {listScripts.map((h, i)=>\n                                                    <option key={i} value={h.name}>{h.name}</option>\n                                                )}\n                                            </select>\n                                            <Icon onClick={()=>{this.viewScript(source.scripton)}} className=\"text-success\" >description</Icon>\n                                        </div>\n                                        <div>\n                                            <select value={source.scriptoff} onChange={(ev) => this.sourceChange(index,'scriptoff', ev)}>\n                                                <option key={'d'} value=''>{t('---')}</option>\n                                                {listScripts.map((h, i)=>\n                                                    <option key={i} value={h.name}>{h.name}</option>\n                                                )}\n                                            </select>\n                                            <Icon onClick={()=>{this.viewScript(source.scriptoff)}} className=\"text-warning\" >description</Icon>\n\n                                        </div>\n                                    </div>\n\n                                    <div className=\"_wrp _wrp_emptyhide\">\n                                        <Switch\n                                            checked={source.emptyhide}\n                                            onChange={(ev) => this.sourceChange(index,'emptyhide', ev)}\n                                            value={'emptyhide'}\n                                            color=\"primary\"\n                                        />\n                                    </div>\n                                    <div className=\"_wrp _wrp_autoclear\">\n                                        <Switch\n                                            checked={source.autoclear}\n                                            onChange={(ev) => this.sourceChange(index,'autoclear', ev)}\n                                            value={'autoclear'}\n                                            color=\"primary\"\n                                        />\n                                    </div>\n                                    {source.enabled && (\n                                        <div className=\"_wrp _wrp_movecontrol\">\n                                            <div>\n                                                <Icon className=\"text-primary\"\n                                                      onClick={()=>{this.sourceMove(index,-1)}}\n                                                >arrow_upward</Icon>\n                                            </div>\n                                            <div>\n                                                <Icon className=\"text-primary\"\n                                                      onClick={()=>{this.sourceMove(index,1)}}\n                                                >arrow_downward</Icon>\n                                            </div>\n                                        </div>\n                                    )}\n\n                                    {!source.enabled && (\n                                        <div className=\"_wrp _wrp_movecontrol\">\n                                            <Fab className={\"app-setup-format-item-remove\"}\n                                                 onClick={() => this.sourceRemove(index)}\n                                                 color=\"secondary\" aria-label=\"Remove\"\n                                                 size=\"small\">\n                                                <Icon>delete</Icon>\n                                            </Fab>\n                                        </div>\n                                    )}\n\n                                    <hr/>\n                                </div>\n                            )\n                            }\n                            <div className=\"app-setup-format-new\">\n                                <button className={\"btn btn-primary\"}\n                                        onClick={this.sourceNew}\n                                        disabled={false}\n                                        title=\"newFormat\"\n                                        type=\"button\" >\n                                    <Icon>add</Icon>\n                                </button>\n                                <span className=\"float-right\">\n                                    <button className={\"btn btn-success \"}\n                                            onClick={this.sourcesSave.bind(this)}\n                                            disabled={false}\n                                            title=\"Save\"\n                                            type=\"button\" >\n                                        <Icon>save</Icon>\n                                    </button>\n\n                                </span>\n                            </div>\n\n                        </Paper>\n                    </div>\n\n\n                </div>\n\n                <Dialog\n                    open={this.state.scriptTxt}\n                    onClose={()=>this.setState({scriptTxt: null})}\n                    aria-labelledby=\"alert-dialog-title\"\n                    aria-describedby=\"alert-dialog-description\"\n                    maxWidth={false}\n                >\n                    <DialogContent>\n                        <DialogContentText id=\"alert-dialog-description\" className=\"app-setup-view-code-wrapper\">\n                        <textarea className=\"app-setup-view-code\" readOnly>\n                            {this.state.scriptTxt}\n                        </textarea>\n                        </DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <button onClick={()=>this.setState({scriptTxt: null})} className={\"btn btn-primary\"}>\n                            {t('Close')}\n                        </button>\n                    </DialogActions>\n                </Dialog>\n            </div>\n        )\n    }\n}\n\n","import React from 'react';\nimport * as tools from \"../../tools\";\nimport axios from \"axios\";\n\nimport './index.css';\nimport Paper from '@material-ui/core/Paper';\nimport {makeGetUri} from \"../../tools\";\nimport t from \"../i18n\";\nimport Switch from \"@material-ui/core/Switch\";\n\n\nexport default class PageSetupParameters extends React.Component {\n\n    state = {\n        inputNP: '',\n        inputNP2: '',\n        setup: this.props.app.setup,\n        removeOlder: !(this.props.app.setup.removeArchiveOlder<14 || this.props.app.setup.removeArchiveOlder>5000),\n    };\n\n    savePass() {\n        if(this.state.inputNP!==this.state.inputNP2) {\n            this.props.onMessage(t('New password and his confirm does not match'));\n            this.setState({inputNP:'', inputNP2:''});\n            return;\n        }\n        let uri = tools.makeGetUri({'q':'setupPasswordSave', 'value': this.state.inputNP, 'p':this.props.app.isSetupPassword});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    this.props.onMessage(t('New password saved'));\n                    this.setState({inputNP:'', inputNP2:''})\n                    if(this.props.needConfigure) {\n                        document.location.reload();\n                    }\n                } else {\n                    this.props.onMessage(t('error')+res.data.error);\n                    console.log(res.data.error);\n                }\n            }\n        });\n    }\n\n    saveParameters() {\n        let uri = makeGetUri();\n        const params = new URLSearchParams();\n        params.append('q', 'setupParametersSave');\n        let setup = Object.assign(this.state.setup);\n        if(setup.removeArchiveOlder<14 || setup.removeArchiveOlder>5000) {\n            setup.removeArchiveOlder = 0;\n            this.setState( {setup: setup, removeOlder: false} );\n        }\n        params.append('setup', JSON.stringify(setup));\n        params.append('p', this.props.app.isSetupPassword);\n        axios.post(uri, params ).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    this.props.onMessage(t('Parameters saved'));\n                } else {\n                    this.props.onMessage(t('error')+res.data.error);\n                    console.log(res.data.error);\n                }\n            } else {\n                console.log('axios.post status ', res.status);\n            }\n        });\n\n    }\n\n\n\n\n    inputTyped = (ev , key) => {\n        let state = {};\n        state[key] = ev.target.value;\n        this.setState(state);\n    };\n\n    removeOlderToggle() {\n        this.setState( {removeOlder: !this.state.removeOlder} );\n    }\n\n    setupChange(key, ev) {\n        let setup = Object.assign(this.state.setup);\n        let changed = true;\n        switch (key) {\n\n            case 'processMode':\n            case 'batchSaveMode':\n            case 'copiesMode':\n            case 'printNaming':\n            case 'copiesNaming':\n            case 'removeArchiveOlder':\n\n                setup[key] = ev.target.value;\n                break;\n\n\n            default:\n                changed = false;\n\n        }\n        if(changed)\n            this.setState( {setup: setup} );\n\n    }\n\n    render() {\n\n        let namingOption = [\n            '_4x6_102x152_glance',\n            '_102x152_glance',\n            '_4x6_glance',\n            '_102x152',\n            '_4x6',\n            '_4x6_102x152',\n        ];\n\n        return (\n            <div className=\"app-page app-bg-e0 app-page-setup-formats w-100 h-100\">\n                <div className=\"app-setup  h-100\">\n\n\n\n                    <div className=\"app-setup-main h-100\">\n                        <Paper className=\"app-setup-formats scrollbar p-4 mr-2\">\n                            <div className=\"m-2\">\n                                {this.props.needConfigure &&\n                                <div className=\"text-center text-danger\">\n                                    <strong>{t('You should setup new password!')}</strong>\n                                </div>\n                                }\n                                <form>\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"np\">{t('New password')}</label>\n                                        <input id=\"np\" type=\"text\" autoComplete={'off'} className={\"app-login-pass form-control text-center\"} value={this.state.inputNP} onChange={(e)=>this.inputTyped(e,'inputNP')} autoFocus/>\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"np2\">{t('Retype password')}</label>\n                                        <input id=\"np2\" type=\"text\" autoComplete={'off'} className={\"app-login-pass form-control text-center\"} value={this.state.inputNP2} onChange={(e)=>this.inputTyped(e,'inputNP2')} />\n                                    </div>\n\n                                    <div className=\"p-2 text-right\">\n                                        <button className={\"btn btn-primary\"}\n                                                onClick={this.savePass.bind(this)}\n                                                disabled={false}\n                                                title=\"save\"\n                                                type=\"button\" >\n                                            {t('Save')}\n                                        </button>\n\n                                    </div>\n                                </form>\n\n                            </div>\n\n                        </Paper>\n                        <Paper className=\"app-setup-formats scrollbar p-4 mr-2\">\n                            <div className=\"m-2\">\n                                <form>\n\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"processmode\">{t('Process mode')}</label>\n                                        <select  id=\"processmode\" value={this.state.setup.processMode} onChange={(ev) => this.setupChange('processMode', ev)} className={\"form-control\"}>\n                                            <option key={'frontend'} value='frontend'>DOESN'T WORK{t('frontend')}</option>\n                                            <option key={'backend'} value='backend'>{t('backend')} ({t('Recomended')})</option>\n                                        </select>\n                                    </div>\n\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"batch\">{t('Print mode')}</label>\n                                        <select  id=\"batch\" value={this.state.setup.batchSaveMode} onChange={(ev) => this.setupChange('batchSaveMode', ev)} className={\"form-control\"}>\n                                            <option value='0'>DOESN'T WORK {t('Wait for each file')}</option>\n                                            <option value='1'>{t('Fast batch on backend')} ({t('Recomended')})</option>\n                                        </select>\n                                    </div>\n\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"copiesMode\">{t('Print copies')}</label>\n                                        <select  id=\"copiesMode\" value={this.state.setup.copiesMode} onChange={(ev) => this.setupChange('copiesMode', ev)} className={\"form-control\"}>\n                                            <option value='1'>{t('Make copy for each file')}</option>\n                                            <option value='0'>{t('Add count to name of file')} ({t('Recomended')})</option>\n                                        </select>\n                                    </div>\n\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"printNaming\">{t('Print naming')}</label>\n                                        <select  id=\"printNaming\" value={this.state.setup.printNaming} onChange={(ev) => this.setupChange('printNaming', ev)} className={\"form-control\"}>\n                                            {namingOption.map((t,n)=>\n                                                <option key={n} value={n}>{t}</option>\n                                            )}\n                                        </select>\n                                    </div>\n\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"copiesNaming\">{t('Copies naming')}</label>\n                                        <select  id=\"copiesNaming\" value={this.state.setup.copiesNaming} onChange={(ev) => this.setupChange('copiesNaming', ev)} className={\"form-control\"}>\n                                            <option value='0'>999_copy2{namingOption[this.state.setup.printNaming]}</option>\n                                            <option value='1'>999{namingOption[this.state.setup.printNaming]}_copy2</option>\n                                            <option value='2'>999{namingOption[this.state.setup.printNaming]}_c2</option>\n                                            <option value='3'>999_c2{namingOption[this.state.setup.printNaming]}</option>\n                                        </select>\n                                    </div>\n\n\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"removeArchiveOlder\">{t('Remove archives, older than days')}</label>\n                                        <Switch\n                                            checked={this.state.removeOlder}\n                                            onChange={(ev) => this.removeOlderToggle()}\n                                            value={'enabled'}\n                                            color=\"primary\"\n                                        />\n                                        <input type=\"text\" value={this.state.setup.removeArchiveOlder} onChange={(ev) => this.setupChange('removeArchiveOlder', ev)}/>\n\n                                    </div>\n\n\n                                    <div className=\"p-2 text-right\">\n                                        <button className={\"btn btn-primary\"}\n                                                onClick={this.saveParameters.bind(this)}\n                                                disabled={false}\n                                                title=\"save\"\n                                                type=\"button\" >\n                                            {t('Save')}\n                                        </button>\n\n                                    </div>\n                                </form>\n\n                            </div>\n                        </Paper>\n                    </div>\n\n\n                </div>\n            </div>\n        )\n    }\n}\n\n","import React from 'react';\n\nimport './index.css';\nimport Icon from \"@material-ui/core/Icon\";\nimport Paper from '@material-ui/core/Paper';\nimport t from \"../i18n\";\nimport PageSetupFormats from './PageSetupFormats'\nimport PageSetupArchive from './PageSetupArchive'\nimport PageSetupSources from './PageSetupSources'\nimport PageSetupParameters from './PageSetupParameters'\n\nexport default class PageSetup extends React.Component {\n\n    state = {\n        currentTab: 'archive',\n    };\n\n    componentDidMount() {\n        if(this.props.needConfigure) {\n            this.setState({currentTab: 'parameters'});\n        }\n    }\n\n    openTab = (tab) => {\n        if(tab!== this.state.currentTab)\n            this.setState({currentTab: tab})\n    };\n\n    render() {\n\n        let tab = null;\n        switch (this.state.currentTab) {\n            case 'formats':\n                tab = <PageSetupFormats key={this.state.currentTab} {...this.props}/>;\n                break;\n\n            case 'sources':\n                tab = <PageSetupSources key={this.state.currentTab} {...this.props}/>;\n                break;\n\n            case 'parameters':\n                tab = <PageSetupParameters key={this.state.currentTab} {...this.props}/>;\n                break;\n\n            default:\n                tab = <PageSetupArchive key={this.state.currentTab} {...this.props}/>;\n                break;\n        }\n\n        return (\n            <div className=\"app-page app-bg-e0 app-setup w-100 h-100\">\n                <div className=\"app-setup-wrapper h-100\">\n                    <div className=\"app-setup-main h-85 w-100\">\n                        <div className=\"app-setup-main-tabcontrol w-15 h-100 d-inline-block p-2\">\n                            <Paper className=\"_tab-control w-100 h-100 p-2\">\n                                <div className=\"_menuwrapper\">\n                                    <button className={\"btn \"+(this.state.currentTab==='formats' ? 'btn-primary' : 'btn-outline-primary')}\n                                            onClick={()=>{this.openTab('formats')}}\n                                            type=\"button\" > {t('Formats')}\n                                    </button>\n                                </div>\n                                <div className=\"_menuwrapper\">\n                                    <button className={\"btn \"+(this.state.currentTab==='sources' ? 'btn-primary' : 'btn-outline-primary')}\n                                            onClick={()=>{this.openTab('sources')}}\n                                            type=\"button\" > {t('Sources')}\n                                    </button>\n                                </div>\n                                <div className=\"_menuwrapper\">\n                                    <button className={\"btn \"+(this.state.currentTab==='archive' ? 'btn-primary' : 'btn-outline-primary')}\n                                            onClick={()=>{this.openTab('archive')}}\n                                            type=\"button\" > {t('Archive')}\n                                    </button>\n                                </div>\n                                <div className=\"_menuwrapper\">\n                                    <button className={\"btn \"+(this.state.currentTab==='parameters' ? 'btn-primary' : 'btn-outline-primary')}\n                                            onClick={()=>{this.openTab('parameters')}}\n                                            type=\"button\" > {t('Parameters')}\n                                    </button>\n                                </div>\n                                <hr/>\n                                <div>\n                                    <small>\n                                        <p>{t('You should use Chrome-browser as client with parameters:')}</p>\n                                        <p className=\"text-info\">chrome {window.location.href} --kiosk  --new-window --start-maximized --disable-extensions --disable-notifications --disable-sync --disable-translate=1</p>\n                                    </small>\n                                </div>\n\n                            </Paper>\n                        </div>\n                        <div className=\"app-setup-main-tab w-85 h-100 d-inline-block p-2\">\n                            {tab}\n                        </div>\n                    </div>\n                    <div className=\"app-setup-bottom h-15 p-2\">\n                            <Paper className=\"app-setup-bottom-buttons text-center h-100 p-2\">\n                                <Paper className=\"float-left h-100 p-2\">\n                                    {this.props.app.appWidth}x{this.props.app.appHeight}\n                                    <div>\n                                        <button className={\"btn btn-light\"}\n                                                onClick={()=>{if(window.confirm(t('Refresh application')+'?')) document.location.reload();}}\n                                                disabled={false}\n                                                title=\"Refresh\"\n                                                type=\"button\" >\n                                            <Icon>update</Icon> {this.props.app.version}\n                                        </button>\n\n                                    </div>\n                                </Paper>\n                                {!this.props.needConfigure &&\n                                    <div className=\"m-2 d-inline-block\">\n                                        <button className={\"btn btn-primary btn-big\"}\n                                                onClick={()=>{this.props.Logout()}}\n                                                disabled={false}\n                                                title=\"Logout\"\n                                                type=\"button\" >\n                                            <Icon>close</Icon>\n                                        </button>\n                                    </div>\n                                }\n\n                            </Paper>\n\n                    </div>\n                </div>\n            </div>\n            )\n    }\n}\n\n","import React from 'react';\nimport * as tools from \"../../tools\";\nimport axios from \"axios\";\nimport t from \"../i18n\";\n\nimport './index.css';\nimport Icon from \"@material-ui/core/Icon\";\nimport Paper from '@material-ui/core/Paper';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport {makeGetUri} from \"../../tools\";\nimport {calculateImageDimensions} from \"../../tools\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\n\nexport default class PagePrint extends React.Component {\n    state = {\n        orderFolder: null,\n        orderNum: null,\n        savingImages: false,\n        orderPrinted: false,\n    };\n\n    savePartialProgress(start, processed, party, imageslen) {\n        processed /= 2; // increment twice (init + process)\n        let progress = Math.ceil((start+processed)/imageslen*100);\n        let job_done = start+processed >= imageslen;\n        if(job_done) {\n            progress = -1;\n            if(this.props.app.setup.batchSaveMode==='1') {\n                let uri = makeGetUri({'q':'orderFilesProcessBatch', 'folder': this.state.orderFolder});\n                axios.get(uri).then(res => {\n                    if(res.status===200) {\n                        if(res.data.error!=='') {\n                            this.props.onMessage(t('orderFilesProcessBatch error:')+res.data.error);\n                        }\n                    } else {\n                        this.props.onMessage(t('orderFilesProcessBatch error status, let see log'));\n                        console.log(t('orderFilesProcessBatch error status'), res.status);\n                    }\n                });\n            }\n\n            // job done\n        } else {\n            if(processed >= party) {\n                // partial end\n                setTimeout(()=>{ this.saveImage(start+processed); },500);\n                // console.log('partial end', start, processed); job_done = true;\n            }\n        }\n        if(this.props.app.progressBarValue !== progress) {\n            let isPleaseWait = (progress>-1 && progress<99);\n            this.props.appSetState({progressBarValue:progress, isPleaseWait:isPleaseWait, savingImages:!job_done });\n        }\n        if(job_done)\n            this.setState({orderPrinted: true} );\n    }\n\n    checkBeforeSaveImage() {\n        let total = 0;\n        for(let i=0; i<this.props.app.images.length; i++) {\n            total += this.props.app.images[i].count;\n        }\n        if(total) {\n            this.saveImage(0);\n        } else {\n            this.props.onClickNextBtn();\n        }\n    }\n    saveImage = (first) => {\n        let party = 10;\n        let imageslen = this.props.app.images.length;\n        if(first+party>imageslen) {\n            party = imageslen - first;\n        }\n\n        let processed = 0;\n        let orderFolder = '';// '../';\n        if(this.state.orderFolder) {\n            orderFolder = this.state.orderFolder;\n        }\n        this.savePartialProgress(first, processed, party, imageslen);\n        let uri = makeGetUri({'q':'orderGetFolder', 'folder': orderFolder});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    if(res.data.data) {\n                        orderFolder = res.data.data;\n                        this.setState({orderFolder: orderFolder, orderNum: res.data.orderNum});\n\n                        let partImages = this.props.app.images.slice(first, first+party);\n                        partImages.forEach( (image, index)=>{\n                            let i = first+index;\n                            processed++; // count init\n                            this.savePartialProgress(first, processed, party, imageslen);\n\n                            // console.log('Process image from:', first, 'index:', index, 'key', i );\n\n                            this.autoInitImage(i, ()=>{\n\n                                let image = this.props.app.images[i];\n                                if(image.count) {\n                                    if(this.props.app.setup.processMode === 'frontend') {\n                                        tools.processImage(this.processCanvasNode, this.props.app, i, (DataURL)=>{\n\n                                            let uri = tools.makeGetUri();\n                                            const params = new URLSearchParams();\n                                            params.append('q', 'orderFileWrite');\n                                            params.append('folder', orderFolder);\n                                            params.append('image', JSON.stringify(image));\n                                            params.append('name', (i+1)+'.'+image.extension);\n                                            params.append('count', image.count);\n                                            params.append('copy', this.props.app.setup.copiesMode ? this.props.app.setup.copiesMode : 1);\n                                            params.append('data', DataURL);\n\n                                            axios.post(uri, params ).then(res => {\n                                                if(res.status===200) {\n                                                    if(res.data.error!=='') {\n                                                        this.props.onMessage('error '+res.data.error);\n                                                    }\n                                                    processed++;\n                                                    // console.log('processed', processed);\n                                                    this.savePartialProgress(first, processed, party, imageslen);\n                                                }\n                                            });\n                                        });\n\n                                    } else { // this.props.app.setup.processMode === backend\n                                        const p = calculateImageDimensions(this.props.app, i);\n\n                                        let uri = tools.makeGetUri();\n                                        const params = new URLSearchParams();\n                                        params.append('q', 'orderFileToProcess');\n                                        if(this.props.app.setup.batchSaveMode==='1') params.append('batch', '1');\n                                        params.append('folder', orderFolder);\n                                        params.append('name', (i+1)+'.'+image.extension);\n                                        params.append('image', JSON.stringify(image));\n                                        params.append('dimensions', JSON.stringify(p));\n                                        params.append('count', image.count);\n                                        params.append('copy', this.props.app.setup.copiesMode ? this.props.app.setup.copiesMode : 1);\n\n                                        axios.post(uri, params ).then(res => {\n                                            if(res.status===200) {\n                                                if(res.data.error!=='') {\n                                                    this.props.onMessage(t('error')+':'+res.data.error);\n                                                }\n                                                processed++;\n                                                // console.log('processed', processed);\n                                                this.savePartialProgress(first, processed, party, imageslen);\n                                            }\n                                        });\n                                    }\n\n                                } else {\n                                    processed++;\n                                    this.savePartialProgress(first, processed, party, imageslen);\n                                }\n                            });\n                        }, this );\n\n                        // for(let i=first; i<first+party; i++) {\n                        //\n                        //     // console.log('image init ', first+i);\n                        //     processed++; // count init\n                        //     this.savePartialProgress(first, processed, party, imageslen);\n                        //\n                        // }//for\n\n                    }\n                } else {\n                    this.props.onMessage(t('error')+':'+res.data.error);\n                }\n            } else {\n                this.props.onMessage(t('error status, let see log'));\n                console.log('error status', res.status);\n            }\n        });\n    };\n\n    autoInitImage = (i, fn_callback) => {\n        let image = this.props.app.images[i];\n\n        this.props.appImageInitMask(i, false, ()=>{\n\n            // console.log(' autoInitImage appImageInitMask', i );\n\n            if(!image.editorState.initedImagePosition) {\n                // console.log('init image '+i);\n                this.props.alignInit(i, fn_callback);\n            } else {\n                if( typeof(fn_callback) === 'function') { fn_callback(); }\n            }\n\n        });\n\n    };\n\n\n\n    render() {\n\n        const formats = this.props.app.formats;\n        const images = this.props.app.images;\n        let temporary = [];\n        let _flen = formats.length;\n        for(let i=0; i<_flen; i++) {\n            const ims = images.filter((image)=>{\n                for (let key in image.format) {\n                    if (formats[i][key] === undefined || formats[i][key] !== image.format[key])\n                        return false;\n                }\n                return true;\n            });\n            temporary.push(ims);\n        }\n        // console.log(temporary);\n\n        let summary = []; //temporary.filter((t,i)=>t.length>0);\n        _flen = temporary.length;\n        let totalSum = 0;\n        for(let i=0; i<_flen; i++) {\n            const tmp = temporary[i];\n            if(tmp.length>0) {\n                let cnt = 0;\n                for(let j=0; j<tmp.length; j++) {\n                    cnt += tmp[j].count;\n                }\n                if(cnt>0) {\n                    summary.push({ format: formats[i], count: cnt, });\n                    totalSum += formats[i].cost * cnt;\n                }\n            }\n        }\n        // console.log(summary);\n\n        return (\n\n            <div className=\"app-page app-bg-e0 app-page-start w-100 h-100\">\n                <div className=\"app-print h-90 p-2\">\n                    <Paper className=\"h-100 w-100 p-2 app-bg-e text-center\">\n                        <Paper className=\"app-print-costs-paper scrollbar p-2 m-2\">\n                            <table className=\"table\">\n                                <thead>\n                                <tr>\n                                    <th scope=\"col\" colSpan=\"2\">{t('Format')}</th>\n                                    <th scope=\"col\">{t('Amount')}</th>\n                                    <th scope=\"col\">{t('Total')}: {totalSum}</th>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                {summary.map((sum, i)=>\n                                    <tr key={i}>\n                                        <td>{sum.format.name} {sum.format.width}\" x{sum.format.height}\"</td>\n                                        <td>{Math.round(sum.format.height*25.4)}x{Math.round(sum.format.width*25.4)} , {t(sum.format.surface)}</td>\n                                        <td>{sum.count}</td>\n                                        <td>{tools.Round(sum.format.cost * sum.count)}</td>\n                                    </tr>\n                                ) }\n                                </tbody>\n                            </table>\n\n                        </Paper>\n                        <div className=\"app-print-costs-buttons text-center\">\n                            <button className={\"btn btn-big btn-primary m-2\"}\n                                    onClick={() => {this.props.onClickPrevBtn()}}\n                                    disabled={false}\n                                    title={t('Previous')}\n                                    type=\"button\" >\n                                <Icon>arrow_back</Icon> {t('Previous')}\n                            </button>\n\n                            <button type=\"button\"\n                                    className={\"btn btn-big btn-success m-2\"}\n                                    disabled={this.state.savingImages}\n                                    onClick={()=>{this.checkBeforeSaveImage()}}>\n                                <Icon>print</Icon> {t('Print')}\n                            </button>\n\n                        </div>\n                    </Paper>\n\n\n                </div>\n\n                <div className=\"app-bottomframe w-100 h-10 p-2 position-relative\">\n                    <Paper className=\"h-100 w-100 p-2 app-bg-e\">\n                        {(this.props.app.progressBarValue>=0 && (\n                            <div className=\"app-bottom-progress h-100 p-2 w-100\">\n                                <LinearProgress variant=\"determinate\" value={this.props.app.progressBarValue} />\n                            </div>\n                        ))}\n                    </Paper>\n                </div>\n\n                <Dialog\n                    open={this.state.orderPrinted}\n                    onClose={this.props.onClickNextBtn}\n                    aria-labelledby=\"alert-dialog-title\"\n                    aria-describedby=\"alert-dialog-description\"\n                >\n                    <DialogTitle id=\"alert-dialog-title\">{t('Successful printed')}</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText id=\"alert-dialog-description\">\n                            {t(\"The number of your order is\")}\n                            <span className=\"text-center text-dark\" style={{fontSize:'1.4em', display:'block'}}>{this.state.orderNum}</span>\n                            {t('Dont forget to remove your source.')}\n                            <br/><br/>\n                            {t('Thank you!')}\n                        </DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <button onClick={this.props.onClickNextBtn} className={\"btn btn-big  btn-primary\"} autoFocus>\n                            OK\n                        </button>\n                    </DialogActions>\n                </Dialog>\n\n            </div>\n        );\n    }\n}\n\n","import React from 'react';\nimport '../index.css';\nimport Icon from \"@material-ui/core/Icon\";\nimport Paper from '@material-ui/core/Paper';\n\nexport default class SetupPin extends React.Component {\n    state = {\n        pwd : '',\n    };\n\n    passTyped = (ev) => {\n        this.setState({pwd: ev.target.value});\n        this.props.appSetState({isSetupPassword: ev.target.value});\n    };\n\n    numbClick(numb) {\n        let pwd = this.state.pwd+''+numb;\n        this.setState({pwd: pwd});\n        this.props.appSetState({isSetupPassword: pwd });\n    };\n\n\n    render() {\n        if (!this.props.app.isSetup || this.props.app.isSetupLogged) return null;\n\n        return (\n            <div className=\"app-page-login p-2 w-100 h-100\">\n                <div className=\"app-login-wrapper-bkg app-bg-e0 app-page-start p-2 w-100 h-100\"> </div>\n\n                <div className=\"app-main app-login-wrapper w-100\">\n                    <Paper className=\"app-login p-2\">\n                        <form onSubmit={(ev)=>{this.setState({pwd: ''}); this.props.Login(ev)}}>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"p\">Pin</label>\n                                <input id=\"p\" type=\"text\" autoComplete={'off'} className={\"app-login-pass form-control text-center\"} value={this.state.pwd} onChange={this.passTyped} autoFocus/>\n                            </div>\n                            <div className=\"numbrow\">\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"7\")}\n                                            type=\"button\" > 7\n                                    </button>\n                                </div>\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"8\")}\n                                            type=\"button\" > 8\n                                    </button>\n                                </div>\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"9\")}\n                                            type=\"button\" > 9\n                                    </button>\n                                </div>\n                            </div>\n\n                            <div className=\"numbrow\">\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"4\")}\n                                            type=\"button\" > 4\n                                    </button>\n                                </div>\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"5\")}\n                                            type=\"button\" > 5\n                                    </button>\n                                </div>\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"6\")}\n                                            type=\"button\" > 6\n                                    </button>\n                                </div>\n                            </div>\n\n                            <div className=\"numbrow\">\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"1\")}\n                                            type=\"button\" > 1\n                                    </button>\n                                </div>\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"2\")}\n                                            type=\"button\" > 2\n                                    </button>\n                                </div>\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"3\")}\n                                            type=\"button\" > 3\n                                    </button>\n                                </div>\n                            </div>\n                            <div className=\"numbrow\">\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className={\"btn btn-success btn-medium btn-3d\"}\n                                            disabled={false}\n                                            title=\"Login\"\n                                            type=\"submit\" >\n                                        <Icon>vpn_key</Icon>\n                                    </button>\n                                </div>\n\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className=\"btn btn-medium btn-3d\"\n                                            disabled={false}\n                                            onClick={()=>this.numbClick(\"0\")}\n                                            type=\"button\" > 0\n                                    </button>\n                                </div>\n\n                                <div className=\"m-2 d-inline-block\">\n                                    <button className={\"btn btn-medium btn-3d\"}\n                                            onClick={()=>{this.setState({pwd: ''});this.props.Logout()}}\n                                            disabled={false}\n                                            title=\"Logout\"\n                                            type=\"button\" >\n                                        <Icon>close</Icon>\n                                    </button>\n                                </div>\n\n                            </div>\n\n                        </form>\n                    </Paper>\n\n                </div>\n\n            </div>\n\n        )\n    }\n}\n\n","import React from 'react';\nimport './splash-screen.css';\nimport t from \"./i18n\";\nimport {getLangs} from \"./i18n\";\nimport {setLang} from \"./i18n\";\nimport '../index.css';\nimport Icon from \"@material-ui/core/Icon\";\n\n\nexport default class LoaderSplashScreen extends React.Component {\n    state = {\n        caseInfinityLoop: false,\n    };\n\n    componentDidMount() {\n        this.tm = setTimeout( ()=>{ this.setState({caseInfinityLoop:true}) }, 179000);\n    }\n    componentWillUnmount() {\n        if(this.tm) clearTimeout(this.tm);\n    }\n\n    langOnLoad(key) {\n        setLang(key);\n        this.setState({caseInfinityLoop:false});\n    }\n\n    render() {\n\n        let langs = getLangs();\n\n        return (\n            <div className=\"splash-screen app-bg-e\">\n                {this.props.serverError || this.state.caseInfinityLoop ?\n                    <div className='text-center'>\n                        <div className=\"splash-screen-text-wrapper error bg-danger text-light pr-5 pl-5\">\n                            {t('Server error:')}\n                            <br/><br/>\n                            {this.props.serverError}\n                        </div>\n                        <div className=\"p-4\">\n                            <button className={\"btn btn-primary btn-big btn-3d\"}\n                                    onClick={()=>{ document.location.reload();}}\n                                    disabled={false}\n                                    title=\"Refresh\"\n                                    type=\"button\" >\n                                <Icon>update</Icon> {t('Restart')}\n                            </button>\n                        </div>\n\n                    </div>\n                    :\n                    <div className=\"splash-screen-text-wrapper\">\n                        {t('Wait a moment while app loading')}\n                        <div className=\"loading-dot\">.</div>\n                    </div>\n                }\n\n                <div className=\"splash-screen-lang-buttons\">\n                    {langs.map( (lang, index)=>\n                        <div key={index} className=\"m-3 d-inline-block\">\n                            <button className=\"btn btn-success btn-3d p-3\"\n                                    onClick={()=>this.langOnLoad(lang.key)}\n                                    disabled={false}\n                                    title=\"Language\"\n                                    type=\"button\" >\n                                <Icon>language</Icon>{lang.caption}\n                            </button>\n\n                        </div>\n                    )}\n\n                </div>\n\n\n            </div>\n        )\n\n    }\n}\n\n","import React from 'react';\nimport './App.css';\nimport {version} from './version.json';\n\nimport {makeGetUri, THEME} from './tools.js';\nimport axios from \"axios\";\nimport 'bootstrap/dist/css/bootstrap.css';\nimport PageStart from './Components/PageStart';\nimport PageLoadImages from './Components/PageLoadImages';\nimport PageEditor from './Components/PageEditor';\nimport PageSetup from './Components/PageSetup';\nimport PagePrint from './Components/PagePrint';\nimport SetupPin from './Components/SetupPin.js';\n\nimport LoaderSplashScreen from './Components/LoaderSplashScreen';\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport './assets/iconfont/material-icons.css';\nimport './assets/iconfont/test.css';\n\nimport * as tools from \"./tools\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport t from \"./Components/i18n\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\n\n\n// CANCELED: запрос на відновлення роботи\n\n// DONE: repeat apply contrast & brightness & color from previous photo (and undo)\n\n// TODO: поворот вікна едітора - портрет/ландскейп\n// DONE: при створенні нового формата порожнє поле DPI\n// TODO: printMode 'backend - Wait for each file' broken\n// TODO: перевірити роботу printMode frontent\n// TODO: перегляд виконаної роботи після друку\n\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.updateSavePageTimer = null;\n        this.appWrapperNode = null;\n        this.needConfigure = false;\n    }\n    state = {\n        appstate: 'start',\n        pages: {},\n        sources: [],\n        currentSource: null,\n        formats: [],\n        currentFormat: null,\n        images: [],\n        is_loading_init: false,\n\n        editorHeight: 0,\n        editorWidth: 0,\n\n        // needUpdateCanvas: false,\n\n        snackMessage: null,\n        setup: {\n            batchSaveMode: false\n        },\n\n        isAppStarting: true,\n        isSetup: false,\n        isSetupLogged: false,\n        isSetupPassword: '',\n        isUploadEnable: false,\n        isPleaseWait: false,\n        progressBarValue: -1,\n\n        isDebugShow: false,\n\n        appWidth: null,\n        appHeight: null,\n\n        serverError: null,\n        version: version\n    };\n\n\n    appSetState = (stateToSave, fn_callback)=> {\n        let state = this.state;\n        for (let prop in stateToSave) {\n            state[prop] = stateToSave[prop];\n        }\n        this.setState(state,\n            ()=>{\n                if( typeof(fn_callback) === 'function') fn_callback();\n            });\n    };\n\n    appImageChanged = (index, editorState, fn_callback) => {\n        let image = this.state.images[index];\n        for (let prop in editorState) {\n            image.editorState[prop] = editorState[prop];\n        }\n        let images = this.state.images;\n        images[index] = image;\n        this.setState({\n            images: images,\n        }, ()=>{\n            if( typeof(fn_callback) === 'function') fn_callback();\n        })\n    };\n\n\n    appEditorChanged = (clientWidth,clientHeight) => {\n        // console.log(\"appEditorChanged: \"+this.state.editorWidth+\" === \"+clientWidth+\" && \"+this.state.editorHeight+\" === \"+clientHeight)\n\n        if(this.state.editorWidth === clientWidth && this.state.editorHeight === clientHeight) {\n            return;\n        }\n\n        let images = this.state.images;\n        let len = images.length;\n        for(let i=0; i<len; i++ ) {\n            images[i].editorState.initedMask = false;\n        }\n        this.setState({\n            editorWidth: clientWidth,\n            editorHeight: clientHeight,\n            images: images,\n        }, ()=>{\n            if(this.state.currentImage>=0) {\n                console.log('try reinit');\n                this.appImageInitMask(this.state.currentImage, true);\n            }\n        })\n    };\n\n    appImageInitMask(index, force, fn_callback) {\n\n        let image = this.state.images[index];\n        if(image.editorState.initedMask && !force) {\n            if( typeof(fn_callback) === 'function') fn_callback();\n            return;\n        }\n\n        // console.log(p.stateEditorWidth, p.editorWidth, p.stateEditorHeight, p.editorHeight);\n        let formatRatio = (image.format.height && image.format.width ? image.format.height / image.format.width : 1);\n        // console.log('this ratio : '+ratio);\n        let maskTB = 0;\n        let maskLR = 0;\n\n        let editorRatio = this.state.editorHeight / this.state.editorWidth;\n        // console.log('editorWidth:'+this.state.editorWidth, ' editorHeight:'+this.state.editorHeight);\n        if(formatRatio>editorRatio) {\n            maskLR = (this.state.editorWidth-image.format.width/image.format.height*this.state.editorHeight)/2;\n        } else {\n            maskTB = (this.state.editorHeight-image.format.height/image.format.width*this.state.editorWidth)/2;\n        }\n\n        let newState = {\n            maskTB: maskTB,\n            maskLR: maskLR,\n            ratio: (this.state.editorHeight-maskTB*2)/tools.dpi_inch2dots(image.format.height, image.format.dpi),\n            initedMask: true,\n        };\n        // console.log(newState);\n        // if(!ret) {\n            this.appImageChanged(index, newState, ()=>{\n                if( typeof(fn_callback) === 'function') fn_callback();\n            });\n        // }\n\n        // return newState;\n\n    }\n\n    appFormatRotate = (index, fn_callback) => {\n        let currentImage = this.state.currentImage;\n        if(index!==undefined) {\n            currentImage = index;\n        }\n        let currentFormat = this.state.images[currentImage].format;\n        let rotated_key = currentFormat.rotated_key;\n        // console.log(rotated_key);\n        if(!this.state.formats[rotated_key]) {\n            this.onMessage(t('Error - format does not exist!'));\n            return;\n        }\n        let format = this.state.formats[rotated_key];\n        let images = this.state.images; //[this.props.app.currentImage];\n        images[currentImage].format = format;\n        images[currentImage].editorState.initedMask = false;\n        images[currentImage].editorState.initedImagePosition = false;\n        images[currentImage].editorState.imageRotate = 0;\n        images[currentImage].editorState.initedFormat = true;\n\n        this.appSetState({images: images}, ()=>{\n            this.appImageInitMask(currentImage, true, fn_callback);\n        });\n\n    };\n\n\n    alignInit = (index, fn_callback)=> {\n        console.log('alignInit', index, fn_callback);\n        let image = this.state.images[index];\n        let format = image.format;\n        let initrotate = false;\n        let format_lanscape = (format.width-format.height)>1;\n        let image_landscape = (image.width-image.height)>1;\n\n        // 1 - no rotate\n        // 3 - 180deg\n        // 6 - 90deg\n        // 8 - 270deg\n        if(!image.editorState.initedFormat) {\n            if(image.orientation === 6 || image.orientation === 8) {\n                this.appFormatRotate(index, ()=>{this.alignInit(index, fn_callback)});\n                return;\n            }\n            if(format_lanscape !== image_landscape) {\n                this.appFormatRotate(index, ()=>{this.alignInit(index, fn_callback)});\n                return;\n            }\n        }\n\n        // console.log('format_lanscape:', format.width,'>', format.height, '=', format_lanscape);\n\n        if(format_lanscape !== image_landscape) {\n            initrotate = true;\n                        // console.log('initrotate', initrotate);\n        }\n\n        if(initrotate) {\n            if(format_lanscape) {\n                this.alignPortrait(index, fn_callback,true, initrotate);\n            } else {\n                this.alignLandscape(index, fn_callback, true, initrotate);\n            }\n        } else {\n            if(format_lanscape) {\n                this.alignLandscape(index, fn_callback, true);\n            } else {\n                this.alignPortrait(index, fn_callback, true);\n            }\n        }\n    };\n\n    alignLandscape = (index, fn_callback, init, initrotate)=> {\n        let image = this.state.images[index];\n                                // console.log('alignLandscape landscape', image.editorState.ratio);\n        let sliderPositionLR = 0;\n        let imageZoom = image.format.width/image.width;\n        let imgWidth = tools.dpi_inch2dots(image.width, image.format.dpi) * imageZoom * image.editorState.ratio;\n        let imgHeight = tools.dpi_inch2dots(image.height, image.format.dpi) * imageZoom * image.editorState.ratio;\n        let viewportY = this.state.editorHeight - image.editorState.maskTB*2;\n        let sliderPositionTB = (viewportY - imgHeight)/2;\n        let isWhiteFields = viewportY > imgHeight;\n                                // console.log('alignLandscape', 'isWhiteFields', isWhiteFields,)\n\n        if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270 || initrotate) {\n            imageZoom = image.format.width/image.height;\n            imgWidth = tools.dpi_inch2dots(image.width, image.format.dpi) * imageZoom * image.editorState.ratio;\n            imgHeight = tools.dpi_inch2dots(image.height, image.format.dpi) * imageZoom * image.editorState.ratio;\n            sliderPositionTB = (imgWidth-imgHeight)/2 + (viewportY-imgWidth)/2 ;\n            sliderPositionLR = (imgHeight-imgWidth)/2;\n            isWhiteFields = viewportY > imgWidth;\n                                // console.log('alignLandscape', 'isWhiteFields', isWhiteFields,)\n        }\n\n        if(init && isWhiteFields) {\n            this.alignPortrait(index, fn_callback, false, initrotate);\n            return;\n        }\n\n        let editorState = {\n            imageZoom : imageZoom,\n            imageZoomMax: imageZoom*5,\n            imageZoomMin: imageZoom*0.5,\n            sliderPositionTB: sliderPositionTB,\n            sliderPositionLR: sliderPositionLR,\n            imgWidth: imgWidth,\n            imgHeight: imgHeight,\n            initedImagePosition: !(imgWidth===0 && imgHeight===0),\n            needUpdateCanvas: imageZoom>image.editorState.imageZoom,\n        };\n        if(initrotate) editorState['imageRotate']=90;\n\n        this.appImageChanged(index, editorState, fn_callback);\n\n    };\n    alignPortrait = (index, fn_callback, init, initrotate)=> {\n        let image = this.state.images[index];\n                                // console.log('alignPortrait', image.editorState.ratio);\n        let sliderPositionTB = 0;\n        let imageZoom = image.format.height/image.height;\n        let imgWidth = tools.dpi_inch2dots(image.width, image.format.dpi) * imageZoom * image.editorState.ratio;\n        let imgHeight = tools.dpi_inch2dots(image.height, image.format.dpi) * imageZoom * image.editorState.ratio;\n        let viewportX = this.state.editorWidth - image.editorState.maskLR*2;\n        let sliderPositionLR = (viewportX - imgWidth)/2;\n        let isWhiteFields = viewportX > imgWidth;\n                                // console.log('alignPortrait', 'isWhiteFields', isWhiteFields,)\n\n        if(image.editorState.imageRotate===90 || image.editorState.imageRotate===270 || initrotate) {\n            imageZoom = image.format.height/image.width;\n            imgWidth = tools.dpi_inch2dots(image.width, image.format.dpi) * imageZoom * image.editorState.ratio;\n            imgHeight = tools.dpi_inch2dots(image.height, image.format.dpi) * imageZoom * image.editorState.ratio;\n            sliderPositionLR = (imgHeight-imgWidth)/2 + (viewportX-imgHeight)/2 ;\n            sliderPositionTB = (imgWidth-imgHeight)/2;\n            isWhiteFields = viewportX > imgHeight;\n                                // console.log('alignPortrait', 'isWhiteFields', isWhiteFields,)\n        }\n\n        if(init && isWhiteFields) {\n            this.alignLandscape(index, fn_callback, false, initrotate);\n            return;\n        }\n\n        let editorState = {\n            imageZoom: imageZoom,\n            imageZoomMax: imageZoom*5,\n            imageZoomMin: imageZoom*0.5,\n            sliderPositionTB: sliderPositionTB,\n            sliderPositionLR: sliderPositionLR,\n            imgWidth: imgWidth,\n            imgHeight: imgHeight,\n            initedImagePosition: !(imgWidth===0 && imgHeight===0),\n            needUpdateCanvas: imageZoom>image.editorState.imageZoom,\n        };\n        if(initrotate) editorState['imageRotate']=90;\n\n        this.appImageChanged(index, editorState, fn_callback);\n\n    };\n\n    updateDimensions() {\n        if(this.appWrapperNode) {\n            let appWidth = this.appWrapperNode.clientWidth;\n            let appHeight = this.appWrapperNode.clientHeight;\n            if(this.appWrapperNode.clientWidth > this.appWrapperNode.clientHeight) {\n                // console.log(appWidth,appHeight);\n                this.setState({appWidth: appWidth, appHeight: appHeight});\n            }\n        }\n    }\n\n    checkLoadedState = (state)=> {\n        console.log('checkLoadedState');\n        let fl=state.formats.length;\n        let formats_rotated = [];\n        for(let i=0; i<fl; i++) {\n            if(state.formats[i].rotated===undefined) {\n                state.formats[i].rotated = false;\n                state.formats[i].rotated_key = fl+i;\n                formats_rotated.push({\n                    cost: state.formats[i].cost,\n                    dpi: state.formats[i].dpi,\n                    enabled: false,\n                    rotated: true,\n                    rotated_key: i,\n                    height: state.formats[i].width,\n                    width:  state.formats[i].height,\n                    name: 'm'+state.formats[i].name,\n                });\n\n            }\n        }\n        state.formats = state.formats.concat(formats_rotated);\n\n        state.isUploadEnable = false;\n        delete state.version;\n        delete state.appWidth;\n        delete state.appHeight;\n        state.isAppStarting = false;\n        return state;\n    };\n\n    componentWillUnmount() {\n        window.removeEventListener(\"resize\", this.updateDimensions);\n    }\n    componentDidMount() {\n        window.addEventListener(\"resize\", this.updateDimensions);\n\n        // this.updateDimensions();\n\n        let uri = makeGetUri({'q':'init'});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    if(res.data.data) {\n                        let state = this.checkLoadedState(res.data.data);\n                        for (let prop in res.data.setup) {\n                            state.setup[prop] = res.data.setup[prop];\n                        }\n                        this.setState(state, ()=>{\n                            this.updateDimensions();\n                            // ---------------------------------------------------\n                            axios.get(makeGetUri({'q':'configure'})).then(res => {\n                                if(res.status===200) {\n                                    if(res.data.error) {\n                                        this.needConfigure = true;\n                                        this.setState({appstate: 'setup'});\n                                    }\n                                }\n                            });\n                            // ---------------------------------------------------\n                        });\n                    }\n                } else {\n                    this.setState({serverError:res.data.error});\n                }\n            } else {\n                this.setState({serverError:'Error: server fail'});\n            }\n        }).catch((error)=>{\n            console.log(error);\n            this.setState({serverError:error.message});\n        });\n    }\n\n    resetApp() {\n        let uri = makeGetUri({'q':'init', 'reset':'reset'});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    if(res.data.data) {\n                        let state = this.checkLoadedState(res.data.data);\n                        for (let prop in res.data.setup) {\n                            state.setup[prop] = res.data.setup[prop];\n                        }\n                        this.setState(state, ()=>{ this.updateDimensions(); this.savePages(); });\n                    }\n                }\n            }\n        });\n\n    }\n\n\n\n    onMessage = (msg) => {\n      if(msg) {\n          this.setState({\n              snackMessage: msg\n          })\n      }\n    };\n    onMessageHide = () => {\n        this.setState({\n            snackMessage: null\n        })\n    };\n\n    uploadEnable =(ev)=> {\n        ev.preventDefault();\n\n        let uri = tools.makeGetUri({'q':'login', 'pass': this.state.isSetupPassword});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    this.setState({isUploadEnable:true, isSetup:false});\n                } else {\n                    console.log(res.data.error);\n                    this.Logout();\n                }\n            }\n        });\n\n    };\n\n    Login = (ev) => {\n        ev.preventDefault();\n        // ev.stopPropagation();\n        let uri = tools.makeGetUri({'q':'login', 'pass': this.state.isSetupPassword});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    this.setState({isSetupLogged: true,})\n                } else {\n                    console.log(res.data.error);\n                    this.Logout();\n                }\n            }\n        });\n        return false;\n    };\n\n    Logout = () => {\n        let isSetupLogged = this.state.isSetupLogged;\n        this.setState({isSetup : false, isSetupLogged: false, isSetupPassword: '' },\n            ()=>{\n                    this.savePages();\n                    if(isSetupLogged) {\n                        this.resetApp();\n                    }\n                }\n            );\n\n    };\n\n\n\n    savePages(pageid, pagestate, OKmessage) {\n      let newAppState = this.state;\n\n        if(this.updateSavePageTimer) clearTimeout(this.updateSavePageTimer);\n        this.updateSavePageTimer = setTimeout(()=>{\n            let uri = makeGetUri();\n            const params = new URLSearchParams();\n            params.append('q', 'saveClientState');\n            params.append('state', JSON.stringify(newAppState));\n            axios.post(uri, params ).then(res => {\n                if(res.status===200) {\n                    if(res.data.error==='') {\n                        if(OKmessage) this.onMessage(OKmessage);\n                        // console.log('state saved, '+this.state.appstate);\n                    }\n                }\n            });\n        }, 1700);\n    }\n\n\n    sourceClick(id) {\n      //console.log(id);\n        const source = this.state.sources[id];\n        if(!source.enabled) return;\n\n        if(!source.emptyhide || (source.emptyhide && source.hasFiles))\n            this.setState({currentSource: id})\n    }\n\n    formatClick(id) {\n        //console.log(id);\n        this.setState({currentFormat: id})\n    }\n\n    removeTmp( fn_callback ){\n        let uri = makeGetUri({'q':'removetmp'});\n        axios.get(uri).then(res => {\n            if(res.status===200) {\n                if(res.data.error==='') {\n                    if( typeof(fn_callback) === 'function') fn_callback();\n                }\n            }\n        });\n    }\n\n    scriptSource = (source, s_key) => {\n        // let s_key = 'scripton';\n        if(source[s_key] && source[s_key]!=='') {\n            let uri = makeGetUri({'q':'scriptSource', 'scripts':source[s_key]});\n            axios.get(uri);\n        }\n    };\n\n    autoclearSource = (source_id) => {\n        if(this.state.sources[source_id].autoclear) {\n            let uri = makeGetUri({'q':'autoclearSource','id':source_id} );\n            axios.get(uri);\n        }\n    };\n\n    ClickNextBtn(args) {\n      switch (this.state.appstate) {\n          case 'start':\n              this.scriptSource(this.state.sources[this.state.currentSource], 'scripton');\n              this.removeTmp(()=>{ this.setState({appstate: 'loadImages'}) });\n              break; // ---------------------------------------------------------------------------------\n\n          case 'loadImages':\n              this.scriptSource(this.state.sources[this.state.currentSource], 'scriptoff');\n              this.setState({appstate:'editor', images:args, currentImage:null, isPleaseWait:false });\n              break; // ---------------------------------------------------------------------------------\n\n          case 'editor':\n              this.setState({appstate:'print' }, ()=>{this.savePages()});\n              break; // ---------------------------------------------------------------------------------\n\n          case 'print':\n              this.autoclearSource(this.state.currentSource);\n              this.resetApp();\n              break; // ---------------------------------------------------------------------------------\n\n          default:\n              alert('no action');\n              break;\n      }\n    }\n\n    ClickPrevBtn() {\n        switch (this.state.appstate) {\n            case 'loadImages':\n                this.autoclearSource(this.state.currentSource);\n                this.resetApp();\n                break; // ---------------------------------------------------------------------------------\n\n            case 'editor':\n                this.scriptSource(this.state.sources[this.state.currentSource], 'scripton');\n                this.setState({appstate: 'loadImages'});\n                break; // ---------------------------------------------------------------------------------\n\n            case 'print':\n                this.setState({appstate: 'editor'});\n                break; // ---------------------------------------------------------------------------------\n\n            default:\n                alert('no action');\n\n        }\n    }\n\n    render() {\n\n        let wrongOrientation = (!this.state.serverError && this.appWrapperNode && this.appWrapperNode.clientHeight > this.appWrapperNode.clientWidth) ? true: false;\n\n        let toRenderd = <div> </div>;\n        let appstate = this.state.appstate;\n        if(this.state.isSetupLogged) {\n            appstate = 'setup';\n        }\n\n        if(this.state.isAppStarting || wrongOrientation) {\n            toRenderd = <LoaderSplashScreen serverError={this.state.serverError} />;\n        } else {\n            switch (appstate) {\n                case 'setup':\n                    toRenderd =  (\n                        <PageSetup\n                            app={this.state}\n                            onMessage={this.onMessage}\n                            appSetState = {this.appSetState.bind(this)}\n                            Logout = {this.Logout.bind(this)}\n                            savePages={this.savePages.bind(this)}\n                            needConfigure={this.needConfigure}\n                />\n                    );\n                    break;\n                case 'start':\n                    toRenderd =  (\n                        <PageStart\n                            app={this.state}\n                            onMessage={this.onMessage}\n                            onClickSource={(id) => this.sourceClick(id)}\n                            onClickFormat={(id) => this.formatClick(id)}\n                            onClickNextBtn={() => this.ClickNextBtn()}\n                            savePages={this.savePages.bind(this)}\n                            appSetState = {this.appSetState.bind(this)}\n                        />\n                    );\n                    break;\n\n                case 'loadImages':\n                    toRenderd =  (\n                        <PageLoadImages\n                            app={this.state}\n                            onMessage={this.onMessage}\n                            onClickNextBtn={(this.ClickNextBtn.bind(this))}\n                            onClickPrevBtn={() => this.ClickPrevBtn()}\n                            savePages={this.savePages.bind(this)}\n                            appSetState = {this.appSetState.bind(this)}\n                        />\n                    );\n                    break;\n\n                case 'editor':\n                    toRenderd =  (\n                        <PageEditor\n                            app={this.state}\n                            onMessage={this.onMessage}\n                            onClickNextBtn={() => this.ClickNextBtn()}\n                            onClickPrevBtn={() => this.ClickPrevBtn()}\n                            savePages={this.savePages.bind(this)}\n\n                            appSetState = {this.appSetState.bind(this)}\n                            appFormatRotate = {this.appFormatRotate.bind(this)}\n                            appImageInitMask = {this.appImageInitMask.bind(this)}\n                            appEditorChanged = {this.appEditorChanged.bind(this)}\n                            appImageChanged = {this.appImageChanged.bind(this)}\n                            alignInit = {this.alignInit.bind(this)}\n                            alignLandscape = {this.alignLandscape.bind(this)}\n                            alignPortrait = {this.alignPortrait.bind(this)}\n\n\n\n                        />\n                    );\n                    break;\n\n                case 'print':\n                    toRenderd =  (\n                        <PagePrint\n                            app={this.state}\n                            onMessage={this.onMessage}\n                            onClickNextBtn={(this.ClickNextBtn.bind(this))}\n                            onClickPrevBtn={() => this.ClickPrevBtn()}\n                            savePages={this.savePages.bind(this)}\n                            appSetState = {this.appSetState.bind(this)}\n                            alignInit = {this.alignInit.bind(this)}\n                            alignLandscape = {this.alignLandscape.bind(this)}\n                            alignPortrait = {this.alignPortrait.bind(this)}\n                            appImageInitMask = {this.appImageInitMask.bind(this)}\n                        />\n                    );\n                    break;\n\n                default:\n                    toRenderd = (\n                        <div className=\"App\">\n                            Learn React\n                        </div>\n                    );\n            }\n\n        }\n\n\n        let appWidth = this.state.appWidth ? this.state.appWidth : '100%';\n        let appHeight = this.state.appHeight ? this.state.appHeight : '100%';\n        return (\n            <div ref={(node)=>{this.appWrapperNode=node}}\n                style={{width:appWidth, height:appHeight}}\n                className={\"app-wrapper\"}>\n                <CssBaseline />\n                <MuiThemeProvider theme={THEME}>\n                    <SetupPin app={this.state}\n                              appSetState = {this.appSetState.bind(this)}\n                              Login = { this.state.isSetup === 1 ? this.Login.bind(this) :\n                                        this.state.isSetup === 2 ? this.uploadEnable.bind(this) :\n                                        this.Login.bind(this)\n                              }\n                              Logout = {this.Logout.bind(this)}\n                    />\n                    {toRenderd}\n                    <Snackbar\n                        anchorOrigin={{ vertical: 'bottom', horizontal: 'left', }}\n                        autoHideDuration={6000}\n                        open={(this.state.snackMessage!==null)}\n                        onClose={this.onMessageHide}\n                        ContentProps={{\n                            'aria-describedby': 'message-id',\n                        }}\n                        message={<span id=\"message-id\">{this.state.snackMessage}</span>}\n                        action={[\n                            <IconButton\n                                key=\"close\"\n                                aria-label=\"Close\"\n                                color=\"inherit\"\n                                className={'classes.close'}\n                                onClick={this.onMessageHide}\n                            >\n                                <CloseIcon />\n                            </IconButton>\n                        ]}\n                    />\n\n                    {this.state.isPleaseWait && (\n                        <div className=\"app-please-wait-wrp position-fixed\">\n                            <div onClick={()=>{this.setState({isPleaseWait:false})}} className = \"app-please-wait spinner-border text-primary\" role = \"status\" >\n                                <span className = \"sr-only\" > Loading...</span>\n                            </div>\n                        </div>\n                    )}\n\n                    <Dialog\n                        open={wrongOrientation}\n                        onClose={()=>{this.updateDimensions()}}\n                        aria-labelledby=\"alert-dialog-title\"\n                        aria-describedby=\"alert-dialog-description\"\n                    >\n                        <DialogTitle id=\"alert-dialog-title\">{t('Wrong orientation')}</DialogTitle>\n                        <DialogContent>\n                            <DialogContentText id=\"alert-dialog-description\">\n                                {t(\"Please, turn your device to lanscape\")}\n                            </DialogContentText>\n                        </DialogContent>\n                        <DialogActions>\n                            <button onClick={()=>{this.updateDimensions()}} className={\"btn btn-big  btn-primary\"} autoFocus>\n                                OK\n                            </button>\n                        </DialogActions>\n                    </Dialog>\n\n\n                </MuiThemeProvider>\n\n            </div>\n        )\n\n    }\n\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n//import 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\n\nimport App from './App';\n\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}